(function(e){function t(t){for(var s,o,a=t[0],l=t[1],c=t[2],d=0,h=[];d<a.length;d++)o=a[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&h.push(r[o][0]),r[o]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);u&&u(t);while(h.length)h.shift()();return n.push.apply(n,c||[]),i()}function i(){for(var e,t=0;t<n.length;t++){for(var i=n[t],s=!0,o=1;o<i.length;o++){var a=i[o];0!==r[a]&&(s=!1)}s&&(n.splice(t--,1),e=l(l.s=i[0]))}return e}var s={},o={app:0},r={app:0},n=[];function a(e){return l.p+"js/"+({}[e]||e)+"."+{"chunk-69bedc3b":"926d2850"}[e]+".js"}function l(t){if(s[t])return s[t].exports;var i=s[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,l),i.l=!0,i.exports}l.e=function(e){var t=[],i={"chunk-69bedc3b":1};o[e]?t.push(o[e]):0!==o[e]&&i[e]&&t.push(o[e]=new Promise((function(t,i){for(var s="css/"+({}[e]||e)+"."+{"chunk-69bedc3b":"5ad2deec"}[e]+".css",r=l.p+s,n=document.getElementsByTagName("link"),a=0;a<n.length;a++){var c=n[a],d=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(d===s||d===r))return t()}var h=document.getElementsByTagName("style");for(a=0;a<h.length;a++){c=h[a],d=c.getAttribute("data-href");if(d===s||d===r)return t()}var u=document.createElement("link");u.rel="stylesheet",u.type="text/css",u.onload=t,u.onerror=function(t){var s=t&&t.target&&t.target.src||r,n=new Error("Loading CSS chunk "+e+" failed.\n("+s+")");n.code="CSS_CHUNK_LOAD_FAILED",n.request=s,delete o[e],u.parentNode.removeChild(u),i(n)},u.href=r;var p=document.getElementsByTagName("head")[0];p.appendChild(u)})).then((function(){o[e]=0})));var s=r[e];if(0!==s)if(s)t.push(s[2]);else{var n=new Promise((function(t,i){s=r[e]=[t,i]}));t.push(s[2]=n);var c,d=document.createElement("script");d.charset="utf-8",d.timeout=120,l.nc&&d.setAttribute("nonce",l.nc),d.src=a(e);var h=new Error;c=function(t){d.onerror=d.onload=null,clearTimeout(u);var i=r[e];if(0!==i){if(i){var s=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;h.message="Loading chunk "+e+" failed.\n("+s+": "+o+")",h.name="ChunkLoadError",h.type=s,h.request=o,i[1](h)}r[e]=void 0}};var u=setTimeout((function(){c({type:"timeout",target:d})}),12e4);d.onerror=d.onload=c,document.head.appendChild(d)}return Promise.all(t)},l.m=e,l.c=s,l.d=function(e,t,i){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(l.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)l.d(i,s,function(t){return e[t]}.bind(null,s));return i},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="",l.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],d=c.push.bind(c);c.push=t,c=c.slice();for(var h=0;h<c.length;h++)t(c[h]);var u=d;n.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("cd49")},"0323":function(e,t,i){},"0469":function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var s=i("898b"),o=i("7f3b"),r=i("35f6"),n=i("13c3"),a=i("1dd9");class l{constructor(e,t){this.dx=0,this.dy=0,this.ox=0,this.oy=0,this.odx=0,this.ody=0,this.anchor=void 0,this._cx=0,this._cy=0,this._cdx=0,this._cdy=0,this._alignment=a["a"].Free,this._gridX=e,this._gridY=t,this._anchors=[]}reset(e,t,i,s,o,r){this.dx=0,this.dy=0,this.ox=s,this.oy=o,this.odx=0,this.ody=0,this.anchor=void 0,this._cx=t,this._cy=i,this._cdx=0,this._cdy=0,this._alignment=e,this._anchors=null!==r&&void 0!==r?r:[]}updateDelta(e,t){this._cdx+=e,this._cdy+=t;let i,s,o,r,l=this._cx+this._cdx,c=this._cy+this._cdy;for(let n of this._anchors)if(r=n.boundingBox,i=n.radius,s=r.xMid-l,o=r.yMid-c,s*s+o*o<i*i)return this.dx=r.xMid-(this.ox+this.odx),this.dy=r.yMid-(this.oy+this.ody),this.odx+=this.dx,this.ody+=this.dy,void(this.anchor=n);switch(this.anchor=void 0,this._alignment){case a["a"].Grid:this.dx=Object(n["m"])(this._cdx,this._gridX)-this.odx,this.dy=Object(n["m"])(this._cdy,this._gridY)-this.ody;break;case a["a"].Free:default:this.dx=this._cdx-this.odx,this.dy=this._cdy-this.ody;break}this.odx+=this.dx,this.ody+=this.dy}}class c{constructor(){this.showGrid=!0,this.showShadows=!0,this.showDebug=!1,this.ssaaScale=1,this.shadowsDisableAt=0}}var d,h=i("cbc0"),u=i("a80d");class p extends n["a"]{constructor(){super();let e=h["n"].createDummy(),t=new o["a"];this._canvas=null,this._context=null,this._display=new c,this._elWidth=0,this._elHeight=0,this._mover=new l(...e.grid),this._layoutLocked=!1,this._page=e.createView(t),this._rafId=0,this._rasterCache=t,this._resizeObserver=null,this._transform=s["e"],this._viewport=new r["a"],this._ztoId=0,this._zoom=s["d"]().scaleExtent([1/8,6]).on("zoom",this.onCanvasZoom.bind(this)).on("end",()=>this.onCanvasZoomEnd()),this._hovObj=null}inject(e){this._elWidth=e.clientWidth,this._elHeight=e.clientHeight,this._canvas=s["c"](e).append("canvas").attr("style","display:block;").attr("width",this._elWidth).attr("height",this._elHeight).on("mousemove",e=>{this.onHoverSubject(...s["b"](e))}).on("contextmenu",e=>e.preventDefault()),this._context=this._canvas.node().getContext("2d",{alpha:!1}),this._resizeObserver=new ResizeObserver(e=>this.onCanvasResize(e[0].target)),this._resizeObserver.observe(e),this._canvas.call(s["a"]().filter(()=>!0).subject(this.onSelectSubject.bind(this)).on("start",this.onObjectDragStarted.bind(this)).on("drag",this.onObjectDragged.bind(this)).on("end",this.onObjectDragEnded.bind(this))).call(this._zoom)}destroy(){var e,t;null===(e=this._canvas)||void 0===e||e.remove(),this._canvas=null,this._context=null,this.removeAllListeners(),null===(t=this._resizeObserver)||void 0===t||t.disconnect()}on(e,t){super.on(e,t)}once(e,t){super.once(e,t)}removeAllListeners(e){super.removeAllListeners(e)}emit(e,...t){super.emit(e,...t)}setGridDisplay(e){this._display.showGrid=e}setShadowsDisplay(e){this._display.showShadows=e}setDebugDisplay(e){this._display.showDebug=e}setSsaaScale(e){this._display.ssaaScale=e,this._rasterCache.setScale(e)}setShadowsDisableAt(e){this._display.shadowsDisableAt=e}render(){0==this._rafId&&(this._rafId=requestAnimationFrame(()=>{this._rafId=0,this.executeRenderPipeline()}))}executeRenderPipeline(){if(null===this._context)return;let e=this._display;this._page.renderPageSurfaceTo(this._context,this._viewport,e.showGrid),e.showShadows&&e.shadowsDisableAt<=this._transform.k?this._page.renderTo(this._context,this._viewport):this._page.renderTo(this._context,this._viewport,0,0),e.showDebug&&this._page.renderDebugTo(this._context,this._viewport)}onHoverSubject(e,t,i){var s;e=this._transform.invertX(e),t=this._transform.invertY(t);let o=this._page.el.getObjectAt(e,t);this._hovObj!==o&&(this._hovObj=o,i=null!==(s=null!==i&&void 0!==i?i:null===o||void 0===o?void 0:o.getCursor())&&void 0!==s?s:a["c"].Default,this.emit("object-hover",o,i))}onSelectSubject(e){let t,i=e.sourceEvent,s=this._transform.invertX(e.x),o=this._transform.invertY(e.y),r=this._page.el.getObjectAt(s,o),a=i.button===n["e"].Right;if(r){if(r instanceof h["c"]){if(this.emit("canvas-click",i,e.x,e.y),a)return;let t=r.makeLine(),s=r.boundingBox.xMid,o=r.boundingBox.yMid;t.srcEnding.moveTo(s,o),t.trgEnding.moveTo(s,o);let n=t.createView(this._rasterCache).updateView();return{type:d.CreateLine,line:n,parent:this._page,anchor:r,obj:n.trgEnding}}if(r.parent instanceof h["e"]){if(this.emit("object-click",i,r.parent,e.x,e.y),a)return;t=[this._page.lookup(r.id)]}else{if(this.emit("object-click",i,r,e.x,e.y),a)return;t=this._page.selects}return t[0]instanceof u["d"]&&1===t.length?{type:d.MoveAnchorable,obj:t[0]}:{type:d.Move,objs:t}}this.emit("canvas-click",i,e.x,e.y)}onObjectDragStarted(e){setTimeout(()=>{this._layoutLocked=!0;let t=e.subject,i=this._transform.invertX(e.x),s=this._transform.invertY(e.y),o=0,r=0,n=a["a"].Free,l=void 0;switch(t.type){case d.Move:for(let e of t.objs)o+=e.x,r+=e.y,n=Math.max(n,e.el.getAlignment());o/=t.objs.length,r/=t.objs.length;break;case d.CreateLine:t.parent.children.push(t.line);case d.MoveAnchorable:o=t.obj.x,r=t.obj.y,n=t.obj.el.getAlignment(),l=this._page.el.anchorCache;break}this._mover.reset(n,i,s,o,r,l)},0)}onObjectDragged(e){let t,i=e.subject;switch(this._mover.updateDelta(e.dx/this._transform.k,e.dy/this._transform.k),i.type){case d.Move:for(let e of i.objs)t=e.fakePositionSetByUser(a["j"].True),e.moveBy(this._mover.dx,this._mover.dy,t);break;case d.CreateLine:i.obj.el.moveBy(this._mover.dx,this._mover.dy);case d.MoveAnchorable:this.onHoverSubject(e.x,e.y,i.obj.el.getCursor()),t=i.obj.fakePositionSetByUser(a["j"].True),i.obj.moveBy(this._mover.dx,this._mover.dy,t);break}this.render()}onObjectDragEnded(e){this._layoutLocked=!1;let t=e.subject,i=this._mover.odx,s=this._mover.ody;switch(t.type){case d.Move:if(!i&&!s)return;let e=t.objs.map(e=>e.el);this.emit("object-move",e,i,s);break;case d.MoveAnchorable:if(!i&&!s)return;if(this._mover.anchor){let e=this._mover.anchor,i=t.obj.el;this.emit("object-attach",i,e)}else if(t.obj.el.isAttached()){let e=t.obj.el;this.emit("object-detach",e,i,s)}else{let e=[t.obj.el];this.emit("object-move",e,i,s)}break;case d.CreateLine:if((i||s)&&t.anchor!==this._mover.anchor){let e=t.line.el,i=t.parent.el,s=t.anchor,o=this._mover.anchor;this.emit("line-create",e,i,s,o)}else this.updateView(),this.render();break}}onCanvasZoom(e){var t;this._transform.k!==e.transform.k&&(clearTimeout(this._ztoId),this._ztoId=setTimeout(()=>{let e=this._transform.k*this._display.ssaaScale;this._rasterCache.getScale()!==e&&(this._rasterCache.setScale(e),this.render())},p.RASTER_CACHE_UPDATE_DELAY)),this._transform=e.transform,this.updateViewportBounds(),null===(t=this._context)||void 0===t||t.setTransform(this._transform.k,0,0,this._transform.k,this._transform.x,this._transform.y),null===e.sourceEvent?0===this._rafId&&this.executeRenderPipeline():this.render()}onCanvasZoomEnd(){this.emit("view-transform",this._transform.x,this._transform.y,this._transform.k,this._elWidth,this._elHeight)}onCanvasResize(e){var t,i,s;let o=e.clientWidth,r=e.clientHeight;this._transform.x+=(o-this._elWidth)/2,this._transform.y+=(r-this._elHeight)/2,this._elWidth=o,this._elHeight=r,null===(i=null===(t=this._canvas)||void 0===t?void 0:t.attr("width",this._elWidth))||void 0===i||i.attr("height",this._elHeight),this.updateViewportBounds(),null===(s=this._context)||void 0===s||s.setTransform(this._transform.k,0,0,this._transform.k,this._transform.x,this._transform.y),this._context&&this.executeRenderPipeline()}updateViewportBounds(){let e=this._transform,t=p.VIEWPORT_PADDING;this._viewport.xMin=Math.round(e.invertX(-t)),this._viewport.xMax=Math.round(e.invertX(this._elWidth+t)),this._viewport.yMin=Math.round(e.invertY(-t)),this._viewport.yMax=Math.round(e.invertY(this._elHeight+t)),this._viewport.scale=e.k}setPage(e){this._page=e.createView(this._rasterCache),this._mover=new l(...e.grid)}updateView(){this._layoutLocked||this._page.updateView()}setCameraLocation(e,t=1e3){if(!this._canvas)return;let i=e.k,o=Math.round(this._elWidth/2-e.x*i),r=Math.round(this._elHeight/2-e.y*i);this._canvas.transition().duration(t).call(this._zoom.transform,s["e"].translate(o,r).scale(i))}}p.VIEWPORT_PADDING=0,p.RASTER_CACHE_UPDATE_DELAY=100,function(e){e[e["Move"]=0]="Move",e[e["MoveAnchorable"]=1]="MoveAnchorable",e[e["CreateLine"]=2]="CreateLine"}(d||(d={}))},"0da8":function(e,t,i){},"13c3":function(e,t,i){"use strict";i.d(t,"d",(function(){return p})),i.d(t,"h",(function(){return f})),i.d(t,"i",(function(){return g})),i.d(t,"a",(function(){return b})),i.d(t,"b",(function(){return _})),i.d(t,"c",(function(){return v})),i.d(t,"f",(function(){return x})),i.d(t,"m",(function(){return w})),i.d(t,"j",(function(){return j})),i.d(t,"k",(function(){return O})),i.d(t,"l",(function(){return M})),i.d(t,"g",(function(){return S})),i.d(t,"n",(function(){return B})),i.d(t,"e",(function(){return P}));const s="0123456789abcdef";function o(e){let t="";for(let i=0;i<=3;i++)t+=s.charAt(e>>8*i+4&15)+s.charAt(e>>8*i&15);return t}function r(e){let t,i=1+(e.length+8>>6),s=new Array(16*i).fill(0);for(t=0;t<e.length;t++)s[t>>2]|=e.charCodeAt(t)<<t%4*8;return s[t>>2]|=128<<t%4*8,s[16*i-2]=8*e.length,s}function n(e,t){var i=(65535&e)+(65535&t),s=(e>>16)+(t>>16)+(i>>16);return s<<16|65535&i}function a(e,t){return e<<t|e>>>32-t}function l(e,t,i,s,o,r){return n(a(n(n(t,e),n(s,r)),o),i)}function c(e,t,i,s,o,r,n){return l(t&i|~t&s,e,t,o,r,n)}function d(e,t,i,s,o,r,n){return l(t&s|i&~s,e,t,o,r,n)}function h(e,t,i,s,o,r,n){return l(t^i^s,e,t,o,r,n)}function u(e,t,i,s,o,r,n){return l(i^(t|~s),e,t,o,r,n)}function p(e){let t=r(e),i=1732584193,s=-271733879,a=-1732584194,l=271733878;for(let o=0;o<t.length;o+=16){let e=i,r=s,p=a,f=l;i=c(i,s,a,l,t[o+0],7,-680876936),l=c(l,i,s,a,t[o+1],12,-389564586),a=c(a,l,i,s,t[o+2],17,606105819),s=c(s,a,l,i,t[o+3],22,-1044525330),i=c(i,s,a,l,t[o+4],7,-176418897),l=c(l,i,s,a,t[o+5],12,1200080426),a=c(a,l,i,s,t[o+6],17,-1473231341),s=c(s,a,l,i,t[o+7],22,-45705983),i=c(i,s,a,l,t[o+8],7,1770035416),l=c(l,i,s,a,t[o+9],12,-1958414417),a=c(a,l,i,s,t[o+10],17,-42063),s=c(s,a,l,i,t[o+11],22,-1990404162),i=c(i,s,a,l,t[o+12],7,1804603682),l=c(l,i,s,a,t[o+13],12,-40341101),a=c(a,l,i,s,t[o+14],17,-1502002290),s=c(s,a,l,i,t[o+15],22,1236535329),i=d(i,s,a,l,t[o+1],5,-165796510),l=d(l,i,s,a,t[o+6],9,-1069501632),a=d(a,l,i,s,t[o+11],14,643717713),s=d(s,a,l,i,t[o+0],20,-373897302),i=d(i,s,a,l,t[o+5],5,-701558691),l=d(l,i,s,a,t[o+10],9,38016083),a=d(a,l,i,s,t[o+15],14,-660478335),s=d(s,a,l,i,t[o+4],20,-405537848),i=d(i,s,a,l,t[o+9],5,568446438),l=d(l,i,s,a,t[o+14],9,-1019803690),a=d(a,l,i,s,t[o+3],14,-187363961),s=d(s,a,l,i,t[o+8],20,1163531501),i=d(i,s,a,l,t[o+13],5,-1444681467),l=d(l,i,s,a,t[o+2],9,-51403784),a=d(a,l,i,s,t[o+7],14,1735328473),s=d(s,a,l,i,t[o+12],20,-1926607734),i=h(i,s,a,l,t[o+5],4,-378558),l=h(l,i,s,a,t[o+8],11,-2022574463),a=h(a,l,i,s,t[o+11],16,1839030562),s=h(s,a,l,i,t[o+14],23,-35309556),i=h(i,s,a,l,t[o+1],4,-1530992060),l=h(l,i,s,a,t[o+4],11,1272893353),a=h(a,l,i,s,t[o+7],16,-155497632),s=h(s,a,l,i,t[o+10],23,-1094730640),i=h(i,s,a,l,t[o+13],4,681279174),l=h(l,i,s,a,t[o+0],11,-358537222),a=h(a,l,i,s,t[o+3],16,-722521979),s=h(s,a,l,i,t[o+6],23,76029189),i=h(i,s,a,l,t[o+9],4,-640364487),l=h(l,i,s,a,t[o+12],11,-421815835),a=h(a,l,i,s,t[o+15],16,530742520),s=h(s,a,l,i,t[o+2],23,-995338651),i=u(i,s,a,l,t[o+0],6,-198630844),l=u(l,i,s,a,t[o+7],10,1126891415),a=u(a,l,i,s,t[o+14],15,-1416354905),s=u(s,a,l,i,t[o+5],21,-57434055),i=u(i,s,a,l,t[o+12],6,1700485571),l=u(l,i,s,a,t[o+3],10,-1894986606),a=u(a,l,i,s,t[o+10],15,-1051523),s=u(s,a,l,i,t[o+1],21,-2054922799),i=u(i,s,a,l,t[o+8],6,1873313359),l=u(l,i,s,a,t[o+15],10,-30611744),a=u(a,l,i,s,t[o+6],15,-1560198380),s=u(s,a,l,i,t[o+13],21,1309151649),i=u(i,s,a,l,t[o+4],6,-145523070),l=u(l,i,s,a,t[o+11],10,-1120210379),a=u(a,l,i,s,t[o+2],15,718787259),s=u(s,a,l,i,t[o+9],21,-343485551),i=n(i,e),s=n(s,r),a=n(a,p),l=n(l,f)}return o(i)+o(s)+o(a)+o(l)}function f(e,t,i,s,o,r=12,n=0){let a=s-t,l=o-i,c=Math.atan2(l,a),d=s-r*Math.cos(c-Math.PI/6),h=o-r*Math.sin(c-Math.PI/6),u=s-r*Math.cos(c+Math.PI/6),p=o-r*Math.sin(c+Math.PI/6);e.beginPath(),e.moveTo(d,h),e.lineTo(u,p),e.lineTo(s,o),e.closePath()}function g(e,t,i,s,o,r,n=1){t+=n/2,i+=n/2,s-=n,o-=n,r="number"===typeof r?{tl:r,tr:r,br:r,bl:r}:Object.assign({tl:0,tr:0,br:0,bl:0},r),e.beginPath(),e.moveTo(t+r.tl,i),e.lineTo(t+s-r.tr,i),e.quadraticCurveTo(t+s,i,t+s,i+r.tr),e.lineTo(t+s,i+o-r.br),e.quadraticCurveTo(t+s,i+o,t+s-r.br,i+o),e.lineTo(t+r.bl,i+o),e.quadraticCurveTo(t,i+o,t,i+o-r.bl),e.lineTo(t,i+r.tl),e.quadraticCurveTo(t,i,t+r.tl,i),e.closePath()}class b{constructor(){this._listeners=new Map}on(e,t){this._listeners.has(e)||this._listeners.set(e,[]),this._listeners.get(e).unshift(t)}once(e,t){let i=(...s)=>{let o=this._listeners.get(e);o.splice(o.indexOf(i),1),t(...s)};this._listeners.has(e)||this._listeners.set(e,[]),this._listeners.get(e).unshift(i)}emit(e,...t){if(this._listeners.has(e)){let i=this._listeners.get(e);for(let e=i.length-1;0<=e;e--)i[e](...t)}}removeAllListeners(e){void 0!==e?this._listeners.delete(e):this._listeners.clear()}}var y=i("9ab4");class m{constructor(){this._fontList=new Map([["default",new _({size:"10pt",family:"sans-serif"})]])}getFont(e){let t=m.getCssFontString(e);return this._fontList.has(t)?this._fontList.get(t):this._fontList.get("default")}loadFonts(e,t=4e3){return Object(y["a"])(this,void 0,void 0,(function*(){let i=[];for(let r of e)i.push(this.loadFont(r,t));let s=yield Promise.allSettled(i),o=[];for(let t=0;t<s.length;t++)"fulfilled"!==s[t].status&&o.push(m.getCssFontString(e[t]));if(o.length){let e=`'${o.join("', '")}'`;throw new Error("The following fonts failed to load: "+e)}}))}loadFont(e,t=4e3){return Object(y["a"])(this,void 0,void 0,(function*(){let i=m.getCssFontString(e),s=document.fonts;if(s.check(i))return this._fontList.has(i)||this._fontList.set(i,new _(e)),!0;{let o,r=this._fontList.set.bind(this._fontList),n=Date.now(),a=new Promise((o,a)=>Object(y["a"])(this,void 0,void 0,(function*(){(function l(){return Object(y["a"])(this,void 0,void 0,(function*(){t<=Date.now()-n?a(new Error(`Failed to load font '${i}' request timed out after ${t}ms.`)):s.load(i).then(t=>{if(0<t.length){let t=s.check(i);t&&r(i,new _(e)),o(t)}else setTimeout(l,50)},a)}))})()}))),l=new Promise((e,s)=>{o=setTimeout(()=>s(new Error(`Failed to load font '${i}' request timed out after ${t}ms.`)),t)}),c=yield Promise.race([a,l]);return clearTimeout(o),c}}))}static getCssFontString(e){var t;return`${null!==(t=e.weight)&&void 0!==t?t:400} ${e.size} ${e.family}`}}class _{constructor(e){this.css=m.getCssFontString(e),this.descriptor=e,this._ctx=document.createElement("canvas").getContext("2d"),this._ctx.font=this.css,this._widthIndex=new Map;for(let t of _.DEFAULT_INDEX)this._widthIndex.set(t,this.measureWidth(t))}measureWidth(e){if(document.fonts.check(this.css))return this._ctx.measureText(e).width;throw new Error(`The font '${this.css}' has not been loaded. The width of '${e}' cannot be measured.`)}measure(e){if(document.fonts.check(this.css)){let t=this._ctx.measureText(e);return{width:t.width,ascent:t.actualBoundingBoxAscent,descent:t.actualBoundingBoxDescent}}throw new Error(`The font '${this.css}' has not been loaded. The width of '${e}' cannot be measured.`)}getCharWidth(e){return this._widthIndex.has(e)||this._widthIndex.set(e,this.measureWidth(e)),this._widthIndex.get(e)}wordWrap(e,t){let i=e.trim().split(/\n/),s=[];for(let o=0;o<i.length;o++)i[o]?s[o]=this.lineWrap(i[o],t):s[o]=i[o];return s.flat()}lineWrap(e,t){let i="",s=0,o=[],r=e.split(_.WHITESPACE).filter(Boolean),n=_.WHITESPACE.test(r[0])?0:1;for(let a=0;a<r.length;a++){let e=this.measureWidth(r[a]);if(a%2!==n)if(t<s+e&&(0!==a&&(o.push(i.trimEnd()),i="",s=0),t<e)){let n=r[a];for(let r=0;r<n.length;r++)e=this.getCharWidth(n[r]),0!==r&&t<s+e&&(o.push(i),i="",s=0),i+=n[r],s+=e}else i+=r[a],s+=e;else i+=r[a],s+=e}return o.push(i.trimEnd()),o}}_.DEFAULT_INDEX="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789\t ",_.WHITESPACE=/(\s+)/;const v=new m;function x(e,t,i){return Math.min(Math.max(e,t),i)}function w(e,t){return Math.sign(e)*Math.round(Math.abs(e)/t)*t}function j(e){let t=0;for(let i in e)t|=e[i];return t}function O(e,t,i,s,o){let r=o/2,n=i-e,a=s-t,l=Math.acos(n/Math.sqrt(Math.pow(n,2)+Math.pow(a,2))),c=r*Math.sin(l),d=r*Math.cos(l);return[e-c,t-d,e+c,t+d,i+c,s+d,i-c,s-d]}function M(e,t,i){let s=1/0,o=1/0,r=-1/0,n=-1/0;for(let a=0;a<i.length;a+=2)s=Math.min(s,i[a]),o=Math.min(o,i[a+1]),r=Math.max(r,i[a]),n=Math.max(n,i[a+1]);if(s<e&&e<r&&o<t&&t<n){let s=e,o=t,n=r+1,a=t,l=0,c=i.length;for(let e=0;e<c;e+=2){let t=k(s,o,n,a,i[e],i[e+1],i[(e+2)%c],i[(e+3)%c]);t&&l++}return l%2!==0}return!1}function k(e,t,i,s,o,r,n,a){let l,c,d,h,u,p,f,g;return l=t-s,c=i-e,d=e*s-i*t,f=l*o+c*r+d,g=l*n+c*a+d,!(f<0&&g<0||f>0&&g>0)&&(h=r-a,u=n-o,p=o*a-n*r,f=h*e+u*t+p,g=h*i+u*s+p,!(f<0&&g<0||f>0&&g>0)&&l*u-h*c!=0)}function S(e){let t=0;if(0===e.length)return t;for(let i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t|=0;return t}function C(e){return e?`${e[0].toLocaleUpperCase()}${e.substring(1)}`:""}function B(e){return e.split(/\s+|_/).map(e=>C(e)).join(" ")}var P;(function(e){e[e["Left"]=0]="Left",e[e["Middle"]=1]="Middle",e[e["Right"]=2]="Right"})(P||(P={}))},"14d9":function(e){e.exports=JSON.parse('{"file":{"image_export":{"padding":30}},"edit":{"clone_offset":[20,20]},"view":{"diagram":{"display_grid":true,"display_shadows":true,"display_debug_mode":false,"render_high_quality":true,"disable_shadows_at":0.7}},"hotkeys":{"file":{"new_file":"Control+N","open_file":"Control+O","save_file":"Control+S","save_image":"","save_select_image":"","publish_file":"","open_library":"","save_library":""},"edit":{"undo":"Control+Z","redo":"Control+Y","cut":"Control+X","copy":"Control+C","paste":"Control+V","delete":"Backspace","duplicate":"Control+D","select_all":"Control+A"},"layout":{"selection_to_front":"Control+Shift+F","selection_to_back":"Control+Shift+B","bring_selection_forward":"","send_selection_backward":"","align_left":"","align_center":"","align_right":"","align_top":"","align_middle":"","align_bottom":"","group":"Control+G","ungroup":"Control+Shift+U","open_group":"","close_group":""},"view":{"toggle_grid":"Control+Shift+G","toggle_shadows":"","reset_view":"Escape","zoom_in":"","zoom_out":"","fullscreen":"","jump_to_selection":"Shift+Z","jump_to_parents":"Shift+P","jump_to_children":"Shift+C","toggle_debug_view":""},"select":{"many":"Control"}}}')},1608:function(e,t,i){},1764:function(e,t,i){},"1b79":function(e,t,i){"use strict";var s=i("7a23");const o=e=>(Object(s["t"])("data-v-2d69016e"),e=e(),Object(s["s"])(),e),r=["fill"],n=o(()=>Object(s["g"])("path",{d:"m2.1167 0-1.0583 1.3229-1.0583-1.3229z","stroke-width":"0"},null,-1)),a=[n];function l(e,t,i,o,n,l){return Object(s["r"])(),Object(s["f"])("svg",{width:"8",height:"5",fill:e.color,class:Object(s["p"])({collapsed:e.collapsed}),version:"1.1",viewBox:"0 0 2.1167 1.3229",xmlns:"http://www.w3.org/2000/svg"},a,10,r)}var c=Object(s["k"])({name:"CollapseArrow",props:{collapsed:{type:Boolean,default:!1},color:{type:String,default:"#8c8c8c"}}}),d=(i("754c"),i("6b0d")),h=i.n(d);const u=h()(c,[["render",l],["__scopeId","data-v-2d69016e"]]);t["a"]=u},"1dd9":function(e,t,i){"use strict";i.d(t,"a",(function(){return r})),i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return a})),i.d(t,"e",(function(){return l})),i.d(t,"f",(function(){return c})),i.d(t,"g",(function(){return d})),i.d(t,"h",(function(){return h})),i.d(t,"i",(function(){return u})),i.d(t,"j",(function(){return p})),i.d(t,"k",(function(){return f})),i.d(t,"l",(function(){return g})),i.d(t,"m",(function(){return b})),i.d(t,"n",(function(){return y})),i.d(t,"o",(function(){return m})),i.d(t,"p",(function(){return v})),i.d(t,"d",(function(){return x}));var s=i("13c3"),o=i("317b");const r={Free:0,Grid:1},n=Object(s["j"])(r),a={Default:0,Pointer:2,Crosshair:4,Move:6,NotAllowed:8,Grab:10,Grabbing:12,N_Resize:14,E_Resize:16,S_Resize:18,W_Resize:20,EW_Resize:22,NS_Resize:24,Col_Resize:26,Row_Resize:28},l=Object(s["j"])(a),c={Off:0,Direct:32,Indirect:64},d=Object(s["j"])(c),h={False:0,True:128},u=Object(s["j"])(h),p={False:0,True:256},f=Object(s["j"])(p),g={Normal:512,High:1024},b=Object(s["j"])(g),y={False:0,True:2048},m=Object(s["j"])(y),_={None:o["f"].None,Node:o["f"].Node,Edge:o["f"].Edge,EdgeSource:o["f"].EdgeSource,EdgeTarget:o["f"].EdgeTarget},v=Object(s["j"])(_),x={[a.Default]:"default",[a.Pointer]:"pointer",[a.Crosshair]:"crosshair",[a.Move]:"move",[a.NotAllowed]:"not-allowed",[a.Grab]:"grab",[a.Grabbing]:"grabbing",[a.N_Resize]:"n-resize",[a.E_Resize]:"e-resize",[a.S_Resize]:"s-resize",[a.W_Resize]:"w-resize",[a.EW_Resize]:"ew-resize",[a.NS_Resize]:"ns-resize",[a.Col_Resize]:"col-resize",[a.Row_Resize]:"row-resize"}},"24a6":function(e,t,i){"use strict";i.d(t,"a",(function(){return s["a"]})),i.d(t,"d",(function(){return s["c"]})),i.d(t,"m",(function(){return s["f"]})),i.d(t,"n",(function(){return s["g"]})),i.d(t,"s",(function(){return s["j"]})),i.d(t,"v",(function(){return s["n"]})),i.d(t,"e",(function(){return s["d"]})),i.d(t,"A",(function(){return o["f"]})),i.d(t,"B",(function(){return o["m"]})),i.d(t,"C",(function(){return o["n"]})),i.d(t,"p",(function(){return o["e"]})),i.d(t,"u",(function(){return r["h"]})),i.d(t,"t",(function(){return r["g"]})),i.d(t,"f",(function(){return r["b"]})),i.d(t,"y",(function(){return r["j"]})),i.d(t,"q",(function(){return r["f"]})),i.d(t,"k",(function(){return r["c"]})),i.d(t,"o",(function(){return r["e"]})),i.d(t,"l",(function(){return r["d"]})),i.d(t,"j",(function(){return n["g"]})),i.d(t,"g",(function(){return n["c"]})),i.d(t,"h",(function(){return n["d"]})),i.d(t,"r",(function(){return n["n"]})),i.d(t,"z",(function(){return a["g"]})),i.d(t,"x",(function(){return a["f"]})),i.d(t,"b",(function(){return a["a"]})),i.d(t,"i",(function(){return a["d"]})),i.d(t,"w",(function(){return l})),i.d(t,"c",(function(){return c["a"]}));var s=i("1dd9"),o=i("13c3"),r=i("5368"),n=i("cbc0"),a=i("317b");class l{static toGraph(e){let t,i=[],s=[];for(let o of e.getSubtree()){switch(o.getSemanticRole()){case a["f"].Node:t=s;break;case a["f"].Edge:t=i;break;default:continue}t.push({id:o.id,template:o.template,data:o.props,prev:this.getPrevGraphLinks(o).map(e=>e.id),next:this.getNextGraphLinks(o).map(e=>e.id)})}return{edges:i,nodes:s}}static getNextGraphLinks(e){switch(e.getSemanticRole()){case a["f"].Edge:return this.getNodes(this.getEdgeTargetsFor(e));case a["f"].Node:return this.getEdges(this.getEdgeSourcesFor(e));default:return[]}}static getPrevGraphLinks(e){switch(e.getSemanticRole()){case a["f"].Edge:return this.getNodes(this.getEdgeSourcesFor(e));case a["f"].Node:return this.getEdges(this.getEdgeTargetsFor(e));default:return[]}}static getNodes(e){let t=[];for(let i of e){let e=this.getNode(i);e&&t.push(e)}return t}static getNode(e){if(!(e instanceof n["d"])||!e.hasRole(a["f"].EdgeSource)&&!e.hasRole(a["f"].EdgeTarget))return;let t=e.anchor;while(t){if(t.hasRole(a["f"].Node))return t;t=t.parent}}static getEdges(e){let t=[];for(let i of e){let e=this.getEdge(i);e&&t.push(e)}return t}static getEdge(e){if(!e.hasRole(a["f"].EdgeSource)&&!e.hasRole(a["f"].EdgeTarget))return;let t=e.parent;while(t){if(t.hasRole(a["f"].Edge))return t;t=t.parent}}static getEdgeSources(e){let t=[];for(let i of e)t=t.concat(this.getEdgeSourcesFor(i));return t}static getEdgeSourcesFor(e){if(!e.hasRole(a["f"].Edge)&&!e.hasRole(a["f"].Node))return[];let t=[e],i=[];while(t.length){let e=t.pop();if(e.hasRole(a["f"].EdgeSource))i.push(e);else for(let i of e.children)t.push(i)}return i}static getEdgeTargets(e){let t=[];for(let i of e)t=t.concat(this.getEdgeTargetsFor(i));return t}static getEdgeTargetsFor(e){if(!e.hasRole(a["f"].Edge)&&!e.hasRole(a["f"].Node))return[];let t=[e],i=[];while(t.length){let e=t.pop();if(e.hasRole(a["f"].EdgeTarget))i.push(e);else for(let i of e.children)t.push(i)}return i}}i("d288");var c=i("0469");i("28e0")},"27a3":function(e,t,i){},"28e0":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var s=i("7f3b"),o=(i("d288"),i("0469"),i("35f6")),r=i("1dd9");class n{constructor(e,t=30,i=!0,s=!0,o=!1){this._page=e,this._padding=t,this._showGrid=i,this._showShadows=s,this._showDebug=o}capture(e){let t,i,n,a;if(null===e||void 0===e?void 0:e.length){t=1/0,i=1/0,n=-1/0,a=-1/0;for(let s of e)t=Math.min(t,s.boundingBox.xMin),i=Math.min(i,s.boundingBox.yMin),n=Math.max(n,s.boundingBox.xMax),a=Math.max(a,s.boundingBox.yMax)}else t=this._page.boundingBox.xMin,i=this._page.boundingBox.yMin,n=this._page.boundingBox.xMax,a=this._page.boundingBox.yMax;let l=new s["a"],c=this._page.createView(l);c.updateView();let d=document.createElement("canvas");d.width=Math.round(n-t)+2*this._padding,d.height=Math.round(a-i)+2*this._padding;let h=d.getContext("2d");h.setTransform(1,0,0,1,-t+this._padding,-i+this._padding);let u=new o["a"];u.xMin=t-this._padding,u.yMin=i-this._padding,u.xMax=n+this._padding,u.yMax=a+this._padding;let p=new Map,f=this._page.getSubtree(e=>e.isHoveredOrSelected());for(let s of f)p.set(s,s.attrs),s.setSelect(r["n"].False),s.setHover(r["f"].Off);c.renderPageSurfaceTo(h,u,this._showGrid),this._showShadows?c.renderTo(h,u):c.renderTo(h,u,0,0),this._showDebug&&c.renderDebugTo(h,u);for(let[s,o]of p)s.attrs=o;return d}}},2975:function(e,t,i){},"2c04":function(e,t,i){"use strict";i("27a3")},"2c3e":function(e,t,i){"use strict";i("ec4a")},"317b":function(e,t,i){"use strict";i.d(t,"e",(function(){return s})),i.d(t,"g",(function(){return o})),i.d(t,"f",(function(){return r})),i.d(t,"a",(function(){return n})),i.d(t,"c",(function(){return a["b"]})),i.d(t,"b",(function(){return d})),i.d(t,"d",(function(){return f}));class s extends Error{constructor(e){super(e)}}var o,r,n;(function(e){e[e["AnchorPoint"]=0]="AnchorPoint",e[e["BranchBlock"]=1]="BranchBlock",e[e["DictionaryBlock"]=2]="DictionaryBlock",e[e["LineEndingPoint"]=3]="LineEndingPoint",e[e["LineHandlePoint"]=4]="LineHandlePoint",e[e["LineHorizontalElbow"]=5]="LineHorizontalElbow",e[e["LineVerticalElbow"]=6]="LineVerticalElbow",e[e["Page"]=7]="Page",e[e["TextBlock"]=8]="TextBlock"})(o||(o={})),function(e){e[e["None"]=0]="None",e[e["Node"]=4096]="Node",e[e["Edge"]=8192]="Edge",e[e["EdgeSource"]=12288]="EdgeSource",e[e["EdgeTarget"]=16384]="EdgeTarget"}(r||(r={})),function(e){e[e["DEG_0"]=0]="DEG_0",e[e["DEG_90"]=1]="DEG_90"}(n||(n={}));var a=i("c40c"),l=i("5368");const c="@__builtin__",d=[{id:c+"page",type:o.Page,role:r.None,grid:[10,10],properties:{name:{type:l["h"].String,value:"Untitled Document",is_primary:!0}},style:a["b"].Page()},{id:c+"anchor",type:o.AnchorPoint,role:r.None,radius:10,line_templates:{[n.DEG_0]:c+"line_horizontal_elbow",[n.DEG_90]:c+"line_vertical_elbow"},style:a["b"].AnchorPoint()},{id:c+"line_handle",type:o.LineHandlePoint,role:r.None,style:a["b"].LineHandle()},{id:c+"line_source",type:o.LineEndingPoint,role:r.EdgeSource,style:a["b"].LineEnding()},{id:c+"line_target",type:o.LineEndingPoint,role:r.EdgeTarget,style:a["b"].LineEnding()},{id:c+"line_horizontal_elbow",namespace:"horizontal_elbow",type:o.LineHorizontalElbow,role:r.Edge,hitbox_width:20,line_handle_template:c+"line_handle",line_ending_template:{source:c+"line_source",target:c+"line_target"},style:a["b"].Line()},{id:c+"line_vertical_elbow",namespace:"vertical_elbow",type:o.LineVerticalElbow,role:r.Edge,hitbox_width:20,line_handle_template:c+"line_handle",line_ending_template:{source:c+"line_source",target:c+"line_target"},style:a["b"].Line()}];var h=i("9ab4"),u=i("13c3"),p=i("cbc0");class f{constructor(e,t){this.schema=e,this.templates=t}static createDummy(){return new this({page_template:"",templates:[]},new Map)}static create(e){return Object(h["a"])(this,void 0,void 0,(function*(){let t=structuredClone(e),i=new Set;for(let e of t.templates){if(i.has(e.id))throw new s(`Template '${e.id}' can only be defined once.`);i.add(e.id)}let o=new Map;for(let e of[...d,...t.templates])o.set(e.id,e);let r=[];for(let e of o.values())r=r.concat(this.getFontDescriptorsFromTemplate(e));yield u["c"].loadFonts(r);for(let e of o.values())this.swapFontDescriptorsWithFonts(e);return new this(e,o)}))}getTemplate(e){return this.templates.get(e)}getNamespace(){let e=new Map([["@",new Map]]);for(let s of this.templates.values()){if(void 0===s.namespace)continue;let o=["@",...s.namespace.split(".")];for(var t=0,i=e;t<o.length-1;t++)i.has(o[t])||i.set(o[t],new Map),i=i.get(o[t]);i.set(o[t],s.id)}return e}createObject(e){let t,i;e instanceof Object?(t=e.template,i=e):t=e;let r=this.templates.get(t);if(!r)throw new s(`Template '${t}' does not exist.`);switch(r.type){case o.Page:return new p["n"](this,r,i);case o.AnchorPoint:return new p["a"](this,r,i);case o.BranchBlock:return new p["b"](this,r,i);case o.DictionaryBlock:return new p["h"](this,r,i);case o.LineEndingPoint:return new p["j"](this,r,i);case o.LineHandlePoint:return new p["k"](this,r,i);case o.LineVerticalElbow:return new p["m"](this,r,i);case o.LineHorizontalElbow:return new p["l"](this,r,i);case o.TextBlock:return new p["o"](this,r,i);default:throw new s(`Unknown template type: '${r.type}'.`)}}cloneObjects(...e){let t=new Map,i=new Map,s=e.map(e=>this.cloneObject(e,t,i));for(let[o,r]of i)for(let e of r){let i=t.get(e);i&&o.addChild(i)}return s}cloneObject(e,t,i){if(e instanceof p["c"]){let s=this.createObject(Object.assign(Object.assign({},e.toExport()),{id:crypto.randomUUID(),children:[]}));return t.set(e.id,s),i.set(s,e.children.map(e=>e.id)),s}let s=[];for(let r of e.children)s.push(this.cloneObject(r,t,i));let o=this.createObject(Object.assign(Object.assign({},e.toExport()),{id:crypto.randomUUID(),children:s}));return t.set(e.id,o),o}static getFontDescriptorsFromTemplate(e){let t=[];switch(e.type){case o.BranchBlock:let{style:i}=e;t.push(i.branch.font);case o.DictionaryBlock:let{style:s}=e;t=t.concat([s.head.one_title.title.font,s.head.two_title.title.font,s.head.two_title.subtitle.font,s.body.field_name.font,s.body.field_value.font]);break;case o.TextBlock:let{style:r}=e;t.push(r.text.font);break;default:break}return t}static swapFontDescriptorsWithFonts(e){let t=u["c"].getFont.bind(u["c"]);switch(e.type){case o.BranchBlock:let{branch:i}=e.style;i.font=t(i.font);case o.DictionaryBlock:let{head:s,body:r}=e.style;s.one_title.title.font=t(s.one_title.title.font),s.two_title.title.font=t(s.two_title.title.font),s.two_title.subtitle.font=t(s.two_title.subtitle.font),r.field_name.font=t(r.field_name.font),r.field_value.font=t(r.field_value.font);break;case o.TextBlock:let{text:n}=e.style;n.font=t(n.font);break;default:break}}getSchema(){let e=[];for(let t of this.templates.values()){let i=JSON.stringify(t,(e,t)=>t instanceof u["b"]?t.descriptor:t);e.push(JSON.parse(i))}return{page_template:this.schema.page_template,templates:e}}}},"335e":function(e,t,i){},"35f6":function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));class s{constructor(){this.xMin=0,this.yMin=0,this.xMax=0,this.yMax=0,this.scale=1}}},"41de":function(e,t,i){"use strict";i("a508")},"44e9":function(e,t,i){"use strict";i("9de6")},"4aad":function(e,t,i){},"4ba3":function(e,t,i){"use strict";i("f636")},5368:function(e,t,i){"use strict";var s;i.d(t,"h",(function(){return s})),i.d(t,"g",(function(){return r})),i.d(t,"b",(function(){return a})),i.d(t,"j",(function(){return l})),i.d(t,"f",(function(){return c})),i.d(t,"a",(function(){return d})),i.d(t,"c",(function(){return h})),i.d(t,"e",(function(){return u})),i.d(t,"d",(function(){return p})),i.d(t,"i",(function(){return f})),function(e){e[e["Int"]=0]="Int",e[e["Float"]=1]="Float",e[e["String"]=2]="String",e[e["Date"]=3]="Date",e[e["Enum"]=4]="Enum",e[e["List"]=5]="List",e[e["Dictionary"]=6]="Dictionary"}(s||(s={}));var o=i("7a23");class r{constructor(e,t){this.type=t.type,this.descriptor=t,this.trigger=Object(o["v"])(0),this._parent=e}get root(){let e=this;while(e._parent)e=e._parent;return e instanceof f?e:void 0}static create(e,t,i){switch(t.type){case s.String:return new l(e,t,i);case s.Int:case s.Float:return new c(e,t,i);case s.Date:return new a(e,t,i);case s.Enum:return new p(e,t,i);case s.List:return new u(e,t,i);case s.Dictionary:return new h(e,t,i)}}updateProperty(){var e;this.trigger.value=this.toHashValue(),null===(e=this._parent)||void 0===e||e.updateProperty()}}var n=i("13c3");class a extends r{constructor(e,t,i){var s;let o;super(e,t),this._value=null,this.descriptor=t,o=null===i?null:null!==(s=null!==i&&void 0!==i?i:t.value)&&void 0!==s?s:null,null===o?this.setValue(null):o instanceof Date||"string"===typeof o?this.setValue(new Date(o)):this.setValue(new Date)}isDefined(){return null!==this._value}setValue(e){this._value=e,this.updateProperty()}toRawValue(){var e,t;return null!==(t=null===(e=this._value)||void 0===e?void 0:e.toISOString())&&void 0!==t?t:null}toHashValue(){return null===this._value?Object(n["g"])(""):Object(n["g"])(this._value.toString())}toString(){var e;return""+(null!==(e=this._value)&&void 0!==e?e:"Null")}}class l extends r{constructor(e,t,i){var s;if(super(e,t),this.descriptor=t,this._value=null,null===i)this.setValue(null);else{let e=null!==(s=null!==i&&void 0!==i?i:t.value)&&void 0!==s?s:null;this.setValue(null===e?null:""+e)}}isDefined(){return null!==this._value}setValue(e){this._value=e,this.updateProperty()}toRawValue(){return this._value}toHashValue(){return null===this._value?Object(n["g"])(""):Object(n["g"])("v:"+this._value)}toString(){var e;return null!==(e=this._value)&&void 0!==e?e:"Null"}}class c extends r{constructor(e,t,i){var s,o,r;let n;super(e,t),this.min=null!==(s=t.min)&&void 0!==s?s:-1/0,this.max=null!==(o=t.max)&&void 0!==o?o:1/0,this.descriptor=t,this._value=null,n=null===i?null:null!==(r=null!==i&&void 0!==i?i:t.value)&&void 0!==r?r:null,null===n?this.setValue(null):"number"===typeof n?this.setValue(n):this.setValue(0)}isDefined(){return null!==this._value}setValue(e){if(null===e)this._value=null;else{let t=Object(n["f"])(e,this.min,this.max);this.type===s.Int?this._value=Math.round(t):this._value=t}this.updateProperty()}toRawValue(){return this._value}toHashValue(){var e;return Object(n["g"])(""+(null!==(e=this._value)&&void 0!==e?e:""))}toString(){var e;return""+(null!==(e=this._value)&&void 0!==e?e:"Null")}}class d extends r{constructor(e,t){super(e,t),this.descriptor=t,this.value=new Map}indexOf(e){return[...this.value.keys()].indexOf(e)}toRawValue(){return[...this.value.entries()].map(([e,t])=>[e,t.toRawValue()])}toHashValue(){let e=[...this.value.values()].map(e=>e.toHashValue()).join(".");return Object(n["g"])(e)}}class h extends d{constructor(e,t,i){super(e,t),this.descriptor=t,this.primaryKey=null,this.value=new Map;for(let s in t.form){let e;e=i?Array.isArray(i)?i.find(e=>e[0]===s):i[s]:void 0;let o=r.create(this,t.form[s],e);this.value.set(s,o),!this.primaryKey&&o.descriptor.is_primary&&(this.primaryKey=s)}}addProperty(e,t,i){throw new Error("Properties cannot be dynamically added to dictionaries.")}removeProperty(e){throw new Error("Properties cannot be dynamically removed from dictionaries.")}isDefined(){return!!this.primaryKey&&this.value.get(this.primaryKey).isDefined()}toString(){return this.primaryKey?this.value.get(this.primaryKey).toString():"Error - No Primary Key"}}class u extends d{constructor(e,t,i){if(super(e,t),this.descriptor=t,this.value=new Map,Array.isArray(i))for(let[s,o]of i){let e=r.create(this,t.form,o);this.value.set(s,e)}else if(t.value)if(Array.isArray(t.value))for(let[s,o]of t.value){let e=r.create(this,t.form,o);this.value.set(Object(n["d"])(s),e)}else for(let s in t.value){let e=t.value[s],i=r.create(this,t.form,e);this.value.set(Object(n["d"])(s),i)}}addProperty(e,t=this.getNextId(),i=this.value.size){let s=[...this.value.entries()];return s.splice(i,0,[t,e]),this.value=new Map(s),this.updateProperty(),t}removeProperty(e){this.value.delete(e),this.updateProperty()}isDefined(){return 0<this.value.size}toString(){return[...this.value.values()].map(e=>e.toString()).join(", ")}getNextId(){let e=Object(n["d"])(crypto.randomUUID());while(this.value.has(e))e=Object(n["d"])(crypto.randomUUID());return e}}class p extends r{constructor(e,t,i){super(e,t);let s,o=r.create(void 0,t.options);this.descriptor=t,this.options=o,this._value=null,s=null===i?null:void 0!==i?i:t.value?Object(n["d"])(t.value):null,null===s?this.setValue(null):"string"===typeof s?this.setValue(s):this.setValue(null)}isDefined(){return null!==this._value}setValue(e){null===e?this._value=null:this.options.value.has(e)?this._value=e:this._value=null,this.updateProperty()}toReferenceValue(){return null===this._value?null:this.options.value.get(this._value)}toRawValue(){return this._value}toHashValue(){return null===this._value?Object(n["g"])(""):Object(n["g"])("v:"+this._value)}toString(){var e,t;return null!==(t=null===(e=this.toReferenceValue())||void 0===e?void 0:e.toString())&&void 0!==t?t:"Null"}}class f extends h{constructor(e,t,i){let o={type:s.Dictionary,form:t};super(void 0,o,i),this.object=e}updateProperty(){super.updateProperty(),this._notifyPropertyUpdate&&this._notifyPropertyUpdate()}onUpdate(e){this._notifyPropertyUpdate=e}}},"69ee":function(e,t,i){"use strict";var s=i("7a23");const o={class:"dictionary-field-contents-control"},r={class:"field-name"};function n(e,t,i,n,a,l){return Object(s["r"])(),Object(s["f"])("div",o,[(Object(s["r"])(!0),Object(s["f"])(s["a"],null,Object(s["w"])(e.fields,([i,o])=>(Object(s["r"])(),Object(s["f"])("div",{class:"field-item",key:i},[Object(s["g"])("p",r,Object(s["A"])(e.titleCase(i)),1),(Object(s["r"])(),Object(s["d"])(Object(s["z"])(e.getField(o.type)),{class:"field-value",property:o,onChange:t[0]||(t[0]=(...t)=>e.$emit("change",...t)),onCreate:t[1]||(t[1]=(...t)=>e.$emit("create",...t)),onDelete:t[2]||(t[2]=(...t)=>e.$emit("delete",...t))},null,40,["property"]))]))),128))])}var a=i("24a6");const l={class:"grid-container"},c={class:"placeholder"},d=["contenteditable"];function h(e,t,i,o,r,n){return Object(s["r"])(),Object(s["f"])("div",{class:Object(s["p"])(["text-field-control",{disabled:!e.isEditable}]),tabindex:"0",onFocus:t[4]||(t[4]=t=>e.onFocus())},[Object(s["g"])("div",l,[Object(s["F"])(Object(s["g"])("p",c," Null ",512),[[s["C"],e.showPlaceholder]]),Object(s["g"])("div",{ref:"field",class:"field",onInput:t[0]||(t[0]=(...t)=>e.onInput&&e.onInput(...t)),onKeyup:t[1]||(t[1]=Object(s["G"])(()=>{},["stop"])),onKeydown:t[2]||(t[2]=Object(s["G"])(()=>{},["stop"])),onBlur:t[3]||(t[3]=(...t)=>e.onBlur&&e.onBlur(...t)),contenteditable:e.isEditable},Object(s["A"])(this.value),41,d)])],34)}var u=Object(s["k"])({name:"TextField",setup(){return{field:Object(s["v"])(null)}},props:{property:{type:Object,required:!0},updateTimeout:{type:Number,default:300}},data(){return{sto:0,value:"",showPlaceholder:!0,activeProperty:Object(s["o"])(this.property)}},computed:{_property(){this.activeProperty.trigger.value;return this.activeProperty},isEditable(){var e;return null===(e=this._property.descriptor.is_editable)||void 0===e||e}},methods:{onFocus(){this.$nextTick(()=>{this.field.focus()})},onInput(){clearTimeout(this.sto),this.value=this.field.innerText,this.sto=setTimeout(()=>{this.updateProperty()},this.updateTimeout),this.showPlaceholder=""===this.field.innerText},onBlur(){clearTimeout(this.sto),this.updateProperty()},updateProperty(){let e=this.value||null;this._property.toRawValue()!==e?this.$emit("change",this._property,e):this.refreshValue()},refreshValue(){this.value=this._property.toRawValue()||"",this.showPlaceholder=""===this.value}},emits:["change"],watch:{property(){this.updateProperty(),this.activeProperty=Object(s["o"])(this.property),this.refreshValue()},"_property.trigger.value"(){this.refreshValue()}},mounted(){this.refreshValue()},unmounted(){this.updateProperty()}}),p=(i("8ee3"),i("6b0d")),f=i.n(p);const g=f()(u,[["render",h],["__scopeId","data-v-cfce8e40"]]);var b=g;const y={class:"list-field-control"},m=["onPointerdown"],_=["onPointerdown"];function v(e,t,i,o,r,n){const a=Object(s["y"])("Plus");return Object(s["r"])(),Object(s["f"])("div",y,[(Object(s["r"])(!0),Object(s["f"])(s["a"],null,Object(s["w"])(e._property.value,([i,o])=>(Object(s["r"])(),Object(s["f"])("div",{class:"field-item",key:i},["DictionaryField"===e.getField(o.type)?(Object(s["r"])(),Object(s["d"])(Object(s["z"])(e.getField(o.type)),{key:0,property:o,onChange:t[0]||(t[0]=(...t)=>e.$emit("change",...t)),onCreate:t[1]||(t[1]=(...t)=>e.$emit("create",...t)),onDelete:t[2]||(t[2]=(...t)=>e.$emit("delete",...t))},{default:Object(s["E"])(()=>[e.isEditable?(Object(s["r"])(),Object(s["f"])("button",{key:0,class:"delete-button",onPointerdown:t=>e.onDelete(i),tabindex:"-1"},"✗",40,m)):Object(s["e"])("",!0)]),_:2},1064,["property"])):(Object(s["r"])(),Object(s["f"])(s["a"],{key:1},[(Object(s["r"])(),Object(s["d"])(Object(s["z"])(e.getField(o.type)),{property:o,onChange:t[3]||(t[3]=(...t)=>e.$emit("change",...t)),onCreate:t[4]||(t[4]=(...t)=>e.$emit("create",...t)),onDelete:t[5]||(t[5]=(...t)=>e.$emit("delete",...t))},null,40,["property"])),e.isEditable?(Object(s["r"])(),Object(s["f"])("button",{key:0,class:"delete-button",onPointerdown:t=>e.onDelete(i),tabindex:"-1"},"✗",40,_)):Object(s["e"])("",!0)],64))]))),128)),e.isEditable?(Object(s["r"])(),Object(s["f"])("button",{key:0,class:"create-button",onPointerdown:t[6]||(t[6]=t=>e.onCreate())},[Object(s["g"])("span",null,[Object(s["i"])(a)]),Object(s["h"])("Add ")],32)):Object(s["e"])("",!0)])}const x=["fill"],w=Object(s["g"])("path",{d:"m0.79375 0v0.79375h-0.79375v0.52917h0.79375v0.79375h0.52917v-0.79375h0.79375v-0.52917h-0.79375v-0.79375z"},null,-1),j=[w];function O(e,t,i,o,r,n){return Object(s["r"])(),Object(s["f"])("svg",{width:"8",height:"8",version:"1.1",viewBox:"0 0 2.1167 2.1167",xmlns:"http://www.w3.org/2000/svg",fill:e.color},j,8,x)}var M=Object(s["k"])({name:"Plus",props:{color:{type:String,default:"#737373"}}});const k=f()(M,[["render",O]]);var S=k;const C={class:"grid-container"},B={class:"value-container"},P={key:0,class:"dropdown-arrow"},T={class:"dropdown-options"},E=["onMouseenter","onClick"];function A(e,t,i,o,r,n){const a=Object(s["y"])("ScrollBox"),l=Object(s["y"])("FocusBox");return Object(s["r"])(),Object(s["d"])(l,{class:Object(s["p"])(["enum-field-control",{disabled:!e.isEditable,open:e.showMenu}]),onFocus:e.openMenu,onUnfocus:e.closeMenu},{default:Object(s["E"])(()=>[Object(s["g"])("div",C,[Object(s["g"])("div",B,[Object(s["g"])("div",{class:Object(s["p"])(["value-text",{"is-null":e.isNull}])},Object(s["A"])(e._property.toString()),3),e.isEditable?(Object(s["r"])(),Object(s["f"])("div",P,"▼")):Object(s["e"])("",!0)]),e.showMenu?(Object(s["r"])(),Object(s["d"])(a,{key:0,propagateScroll:!1,style:Object(s["q"])(e.style)},{default:Object(s["E"])(()=>[Object(s["g"])("ul",T,[Object(s["g"])("li",{class:Object(s["p"])([{active:"null"===e.hovered},"null"]),onMouseenter:t[0]||(t[0]=t=>e.hovered="null"),onClick:t[1]||(t[1]=Object(s["G"])(t=>e.updateProperty(null),["stop"]))}," Null ",34),(Object(s["r"])(!0),Object(s["f"])(s["a"],null,Object(s["w"])(e.options,([t,i])=>(Object(s["r"])(),Object(s["f"])("li",{key:t,class:Object(s["p"])({active:e.hovered===t}),onMouseenter:i=>e.hovered=t,onClick:Object(s["G"])(i=>e.updateProperty(t),["stop"])},Object(s["A"])(i.toString()),43,E))),128))])]),_:1},8,["style"])):Object(s["e"])("",!0)])]),_:1},8,["class","onFocus","onUnfocus"])}var D=i("e0ac"),H=i("6f01"),I=Object(s["k"])({name:"EnumField",props:{property:{type:Object,required:!0},maxHeight:{type:Number,default:200}},data(){return{hovered:"",showMenu:!1}},computed:{_property(){this.property.trigger.value;return this.property},isEditable(){var e;return null===(e=this._property.descriptor.is_editable)||void 0===e||e},options(){return this._property.options.value},isNull(){return null===this._property.toRawValue()},style(){return{maxHeight:this.maxHeight+"px"}}},methods:{openMenu(){this.isEditable&&(this.showMenu=!0)},closeMenu(){this.showMenu=!1,this.refreshValue()},updateProperty(e){this._property.toRawValue()!==e?this.$emit("change",this._property,e):this.refreshValue(),this.showMenu=!1},refreshValue(){var e;this.hovered=null!==(e=this._property.toRawValue())&&void 0!==e?e:"null"}},emits:["change"],watch:{"_property.trigger.value"(){this.refreshValue()}},mounted(){this.refreshValue()},components:{FocusBox:D["a"],ScrollBox:H["a"]}});i("2c04");const F=f()(I,[["render",A],["__scopeId","data-v-2178b796"]]);var L=F;const V=["disabled"],R={key:0,class:"increment-arrows"};function z(e,t,i,o,r,n){return Object(s["r"])(),Object(s["f"])("div",{class:Object(s["p"])(["number-field-control",{disabled:!e.isEditable}]),tabindex:"0",onFocus:t[6]||(t[6]=t=>e.onFocus())},[Object(s["F"])(Object(s["g"])("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.value=t),type:"text",ref:"field",placeholder:"Null",onInput:t[1]||(t[1]=(...t)=>e.onInput&&e.onInput(...t)),onKeydown:t[2]||(t[2]=(...t)=>e.onKeyDown&&e.onKeyDown(...t)),onBlur:t[3]||(t[3]=(...t)=>e.onBlur&&e.onBlur(...t)),disabled:!e.isEditable},null,40,V),[[s["B"],e.value]]),e.isEditable?(Object(s["r"])(),Object(s["f"])("div",R,[Object(s["g"])("div",{class:"up-arrow",onClick:t[4]||(t[4]=t=>e.updateProperty(1))},"▲"),Object(s["g"])("div",{class:"down-arrow",onClick:t[5]||(t[5]=t=>e.updateProperty(-1))},"▼")])):Object(s["e"])("",!0)],34)}var N=Object(s["k"])({name:"NumberField",setup(){return{field:Object(s["v"])(null)}},props:{property:{type:Object,required:!0}},data(){return{value:"",activeProperty:Object(s["o"])(this.property)}},computed:{_property(){this.activeProperty.trigger.value;return this.activeProperty},isEditable(){var e;return null===(e=this._property.descriptor.is_editable)||void 0===e||e}},methods:{onFocus(){this.$nextTick(()=>{this.field.focus()})},onInput(){""===this.value&&this.updateProperty(0)},onBlur(){this.updateProperty(0)},onKeyDown(e){switch(e.key){case"ArrowUp":e.preventDefault(),this.updateProperty(1);break;case"ArrowDown":e.preventDefault(),this.updateProperty(-1);break}},updateProperty(e=0){let t;if(""===this.value&&0===e)t=null;else{t=parseFloat(this.value),Number.isNaN(t)?t=0:t+=e;let{min:i,max:s}=this._property;t=Object(a["A"])(t,i,s),this._property.type===a["u"].Int&&(t=Math.round(t))}this._property.toRawValue()!==t?this.$emit("change",this._property,t):this.refreshValue()},refreshValue(){var e;this.value=""+(null!==(e=this._property.toRawValue())&&void 0!==e?e:"")}},emits:["change"],watch:{property(){this.updateProperty(),this.activeProperty=Object(s["o"])(this.property),this.refreshValue()},"_property.trigger.value"(){this.refreshValue()}},mounted(){this.refreshValue()},unmounted(){this.updateProperty()}});i("89ee");const $=f()(N,[["render",z],["__scopeId","data-v-9dabcc18"]]);var U=$;const W=e=>(Object(s["t"])("data-v-f049ed0a"),e=e(),Object(s["s"])(),e),G={class:"grid-container"},q={class:"value"},Y={key:0,class:"null-value"},K={key:1,class:"date-value"},X={class:"editor"},J=W(()=>Object(s["g"])("span",null,"/",-1)),Z=W(()=>Object(s["g"])("span",null,"/",-1)),Q=W(()=>Object(s["g"])("span",{class:"space"},null,-1)),ee=W(()=>Object(s["g"])("span",null,":",-1)),te=W(()=>Object(s["g"])("span",null,":",-1)),ie=W(()=>Object(s["g"])("span",{class:"timezone"},"Z",-1));function se(e,t,i,o,r,n){return Object(s["r"])(),Object(s["f"])("div",{class:Object(s["p"])(["datetime-field-control",{disabled:!e.isEditable}]),tabindex:"0",onFocus:t[18]||(t[18]=t=>e.enterEditMode())},[Object(s["g"])("div",G,[Object(s["F"])(Object(s["g"])("div",q,[null===e.value?(Object(s["r"])(),Object(s["f"])("p",Y," Null ")):(Object(s["r"])(),Object(s["f"])("p",K,Object(s["A"])(e.prop_M)+" "+Object(s["A"])(e.prop_D)+", "+Object(s["A"])(e.prop_Y)+" - "+Object(s["A"])(e.prop_H)+":"+Object(s["A"])(e.prop_m)+":"+Object(s["A"])(e.prop_s),1))],512),[[s["C"],!e.showEditor]]),Object(s["F"])(Object(s["g"])("div",X,[Object(s["F"])(Object(s["g"])("input",{type:"text",maxlength:"2",segment:"M",ref:"M",class:"M",placeholder:"MM",onBlur:t[0]||(t[0]=(...t)=>e.onBlur&&e.onBlur(...t)),onKeydown:t[1]||(t[1]=(...t)=>e.onKeyDown&&e.onKeyDown(...t)),"onUpdate:modelValue":t[2]||(t[2]=t=>e.value_M=t)},null,544),[[s["B"],e.value_M]]),J,Object(s["F"])(Object(s["g"])("input",{type:"text",maxlength:"2",segment:"D",ref:"D",class:"D",placeholder:"DD",onBlur:t[3]||(t[3]=(...t)=>e.onBlur&&e.onBlur(...t)),onKeydown:t[4]||(t[4]=(...t)=>e.onKeyDown&&e.onKeyDown(...t)),"onUpdate:modelValue":t[5]||(t[5]=t=>e.value_D=t)},null,544),[[s["B"],e.value_D]]),Z,Object(s["F"])(Object(s["g"])("input",{type:"text",maxlength:"4",segment:"Y",ref:"Y",class:"Y",placeholder:"YYYY",onBlur:t[6]||(t[6]=(...t)=>e.onBlur&&e.onBlur(...t)),onKeydown:t[7]||(t[7]=(...t)=>e.onKeyDown&&e.onKeyDown(...t)),"onUpdate:modelValue":t[8]||(t[8]=t=>e.value_Y=t)},null,544),[[s["B"],e.value_Y]]),Q,Object(s["F"])(Object(s["g"])("input",{type:"text",maxlength:"2",segment:"H",ref:"H",class:"H",placeholder:"HH",onBlur:t[9]||(t[9]=(...t)=>e.onBlur&&e.onBlur(...t)),onKeydown:t[10]||(t[10]=(...t)=>e.onKeyDown&&e.onKeyDown(...t)),"onUpdate:modelValue":t[11]||(t[11]=t=>e.value_H=t)},null,544),[[s["B"],e.value_H]]),ee,Object(s["F"])(Object(s["g"])("input",{type:"text",maxlength:"2",segment:"m",ref:"m",class:"m",placeholder:"mm",onBlur:t[12]||(t[12]=(...t)=>e.onBlur&&e.onBlur(...t)),onKeydown:t[13]||(t[13]=(...t)=>e.onKeyDown&&e.onKeyDown(...t)),"onUpdate:modelValue":t[14]||(t[14]=t=>e.value_m=t)},null,544),[[s["B"],e.value_m]]),te,Object(s["F"])(Object(s["g"])("input",{type:"text",maxlength:"2",segment:"s",ref:"s",class:"s",placeholder:"ss",onBlur:t[15]||(t[15]=(...t)=>e.onBlur&&e.onBlur(...t)),onKeydown:t[16]||(t[16]=(...t)=>e.onKeyDown&&e.onKeyDown(...t)),"onUpdate:modelValue":t[17]||(t[17]=t=>e.value_s=t)},null,544),[[s["B"],e.value_s]]),ie],512),[[s["C"],e.showEditor]])])],34)}const oe=["M","D","Y","H","m","s"],re=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var ne=Object(s["k"])({name:"DateTimeField",setup(){return{M:Object(s["v"])(null),D:Object(s["v"])(null),Y:Object(s["v"])(null),H:Object(s["v"])(null),m:Object(s["v"])(null),s:Object(s["v"])(null)}},props:{property:{type:Object,required:!0}},data(){return{value_M:"",value_D:"",value_Y:"",value_H:"",value_m:"",value_s:"",showEditor:!1,activeProperty:Object(s["o"])(this.property)}},computed:{_property(){this.activeProperty.trigger.value;return this.activeProperty},isEditable(){var e;return null===(e=this._property.descriptor.is_editable)||void 0===e||e},value(){let e=this._property.toRawValue();return null!==e?new Date(e):e},prop_M(){let e=this.value;return e?re[e.getUTCMonth()]:"Null"},prop_D(){var e;let t=this.value;return""+(null!==(e=null===t||void 0===t?void 0:t.getUTCDate())&&void 0!==e?e:"Null")},prop_Y(){var e;let t=this.value;return""+(null!==(e=null===t||void 0===t?void 0:t.getUTCFullYear())&&void 0!==e?e:"Null")},prop_H(){let e=this.value;return e?(""+e.getUTCHours()).padStart(2,"0"):"Null"},prop_m(){let e=this.value;return e?(""+e.getUTCMinutes()).padStart(2,"0"):"Null"},prop_s(){let e=this.value;return e?(""+e.getUTCSeconds()).padStart(2,"0"):"Null"}},methods:{onBlur(e){this.$el.contains(e.relatedTarget)||this.exitEditMode()},onKeyDown(e){let t=e.target;if(t.selectionStart===t.selectionEnd)switch(e.key){case"Backspace":0===t.selectionEnd&&this.shiftFocus(-1,!1);break;case"ArrowLeft":0===t.selectionEnd&&(this.shiftFocus(-1,!1),e.preventDefault());break;case"ArrowRight":t.selectionEnd===t.maxLength&&(this.shiftFocus(1,!0),e.preventDefault());break;default:t.selectionEnd===t.maxLength&&this.shiftFocus(1,!0)}},enterEditMode(){this.isEditable&&(this.showEditor=!0,this.$nextTick(()=>{let e;for(let t of oe)if(e=this[t],!e.value)break;e.focus(),e.selectionEnd=e.value.length}))},exitEditMode(){this.updateProperty(),this.showEditor=!1},shiftFocus(e,t=!0){let i=document.activeElement,s=oe.indexOf(i.getAttribute("segment"))+e;0<=s&&s<oe.length&&this.$nextTick(()=>{let e=this[oe[s]];e.focus(),e.selectionEnd=t?0:e.value.length})},updateProperty(){var e;let t,i=`${this.value_Y.padStart(4,"0")}-${this.value_M.padStart(2,"0")}-${this.value_D.padStart(2,"0")}T${this.value_H.padStart(2,"0")}:${this.value_m.padStart(2,"0")}:${this.value_s.padStart(2,"0")}.000Z`,s=new Date(i);t="0000-00-00T00:00:00.000Z"===i||Number.isNaN(s.getTime())?null:s,(null===(e=this.value)||void 0===e?void 0:e.getTime())!==(null===t||void 0===t?void 0:t.getTime())?this.$emit("change",this._property,t):this.refreshValue()},refreshValue(){var e,t;let i=null!==(t=null===(e=this.value)||void 0===e?void 0:e.toISOString())&&void 0!==t?t:"--T::",[s,o,r,n,a,l]=i.split(/[-T:\.]/);this.value_Y=s,this.value_M=o,this.value_D=r,this.value_H=n,this.value_m=a,this.value_s=l}},emits:["change"],watch:{property(){this.updateProperty(),this.activeProperty=Object(s["o"])(this.property),this.refreshValue()},"_property.trigger.value"(){this.refreshValue()}},mounted(){this.refreshValue()},unmounted(){this.updateProperty()}});i("c12e");const ae=f()(ne,[["render",se],["__scopeId","data-v-f049ed0a"]]);var le=ae;const ce=Object(s["j"])(()=>i.e("chunk-69bedc3b").then(i.bind(null,"f090")));var de=Object(s["k"])({name:"ListField",props:{property:{type:Object,required:!0}},computed:{_property(){this.property.trigger.value;return this.property},isEditable(){var e;return null===(e=this._property.descriptor.is_editable)||void 0===e||e}},methods:{getField(e){switch(e){case a["u"].Int:case a["u"].Float:return"NumberField";case a["u"].String:return"TextField";case a["u"].Date:return"DateTimeField";case a["u"].Enum:return"EnumField";case a["u"].List:return"ListField";case a["u"].Dictionary:return"DictionaryField"}},onCreate(){this.$emit("create",this._property)},onDelete(e){this.$emit("delete",this._property,e)}},emits:["change","create","delete"],components:{Plus:S,TextField:b,EnumField:L,NumberField:U,DateTimeField:le,DictionaryField:ce}});i("a808");const he=f()(de,[["render",v],["__scopeId","data-v-1f8ec412"]]);var ue=he;const pe=Object(s["j"])(()=>i.e("chunk-69bedc3b").then(i.bind(null,"f090")));var fe=Object(s["k"])({name:"DictionaryFieldContents",props:{property:{type:Object,required:!0}},computed:{fields(){return[...this.property.value.entries()].filter(e=>{var t;return null===(t=e[1].descriptor.is_visible)||void 0===t||t})}},methods:{getField(e){switch(e){case a["u"].String:return"TextField";case a["u"].Int:case a["u"].Float:return"NumberField";case a["u"].Date:return"DateTimeField";case a["u"].Enum:return"EnumField";case a["u"].List:return"ListField";case a["u"].Dictionary:return"DictionaryField"}},titleCase:a["C"]},emits:["change","create","delete"],components:{TextField:b,ListField:ue,EnumField:L,NumberField:U,DateTimeField:le,DictionaryField:pe}});i("9e53");const ge=f()(fe,[["render",n],["__scopeId","data-v-5181abbf"]]);t["a"]=ge},"6f01":function(e,t,i){"use strict";var s=i("7a23");const o={class:"scrollbox-container"};function r(e,t,i,r,n,a){return Object(s["r"])(),Object(s["f"])("div",o,[Object(s["g"])("div",{ref:"content",class:"scroll-content",onWheelPassive:t[0]||(t[0]=t=>e.moveScrollPosition(e.scrollTop+t.deltaY,t))},[Object(s["x"])(e.$slots,"default",{},void 0,!0)],544),Object(s["F"])(Object(s["g"])("div",{class:"scroll-bar",style:Object(s["q"])(e.scroll.sty),onWheelPassive:t[3]||(t[3]=t=>e.moveScrollPosition(e.scrollTop+t.deltaY,t))},[Object(s["F"])(Object(s["g"])("div",{class:"scroll-handle",style:Object(s["q"])(e.handle.sty),onPointerdown:t[1]||(t[1]=(...t)=>e.startDrag&&e.startDrag(...t)),onPointerup:t[2]||(t[2]=(...t)=>e.stopDrag&&e.stopDrag(...t))},null,36),[[s["C"],e.showScrollbar]])],36),[[s["C"],e.alwaysShowScrollBar||e.showScrollbar]])])}var n=i("24a6"),a=i("a2be"),l=Object(s["k"])({name:"ScrollBox",setup(){return{content:Object(s["v"])(null)}},props:{resetScrollOnChange:{type:Boolean,default:!1},alwaysShowScrollBar:{type:Boolean,default:!1},propagateScroll:{type:Boolean,default:!0},handleColor:{type:String,default:"#333333"},scrollColor:{type:String,default:"none"},borderColor:{type:String,default:"#404040"},width:{type:Number,default:17}},data(){return{scrollTop:0,windowMax:0,scroll:{sty:{width:this.width+"px",background:this.scrollColor}},handle:{trk:Object(s["o"])(new a["a"]),hei:0,max:0,pos:0,sty:{height:"0px",transform:"translateY(0px)",background:this.handleColor,borderColor:this.borderColor}},showScrollbar:!1,onResizeObserver:null,onMutateObserver:null}},methods:{startDrag(e){this.handle.trk.capture(e,this.onDrag),document.addEventListener("pointerup",this.stopDrag,{once:!0})},onDrag(e,t){this.moveScrollPosition(this.handleTopToTop(this.handle.pos+t.movementY))},stopDrag(e){this.handle.trk.release(e)},recalculateScrollState(e=!0){let t=this.showScrollbar,i=this.content;if(0===i.clientHeight)return void(this.showScrollbar=!1);let s=i.clientHeight/i.scrollHeight;this.handle.hei=Math.max(15,Math.round((i.clientHeight-4)*s)),this.handle.max=i.clientHeight-this.handle.hei-4,this.windowMax=i.scrollHeight-i.clientHeight,this.showScrollbar=1!==s,this.handle.sty.height=this.handle.hei+"px",this.moveScrollPosition(e?0:i.scrollTop),!t&&this.showScrollbar&&setTimeout(()=>this.recalculateScrollState(e),0)},moveScrollPosition(e,t=null){let i=this.scrollTop;this.scrollTop=Object(n["A"])(e,0,this.windowMax),this.handle.pos=this.topToHandleTop(this.scrollTop),this.handle.sty.transform=`translateY(${this.handle.pos}px)`,this.content.scrollTop=this.scrollTop;let s=i-this.scrollTop!==0,o=0<this.scrollTop&&this.scrollTop<this.windowMax;(!this.propagateScroll||s||o)&&(null===t||void 0===t||t.stopPropagation())},topToHandleTop(e){return e/this.windowMax*this.handle.max},handleTopToTop(e){return e/this.handle.max*this.windowMax}},mounted(){let e={childList:!0,characterData:!0,subtree:!0};this.onMutateObserver=new MutationObserver(()=>this.recalculateScrollState(this.resetScrollOnChange)),this.onResizeObserver=new ResizeObserver(()=>this.recalculateScrollState(!1)),this.onResizeObserver.observe(this.$el),this.onMutateObserver.observe(this.content,e)},unmounted(){this.onResizeObserver.disconnect(),this.onMutateObserver.disconnect()}}),c=(i("4ba3"),i("6b0d")),d=i.n(c);const h=d()(l,[["render",r],["__scopeId","data-v-cf54a08c"]]);t["a"]=h},7343:function(e,t,i){"use strict";i("1764")},"754c":function(e,t,i){"use strict";i("4aad")},"75a4":function(e,t,i){"use strict";i("aadc")},"76f2":function(e,t,i){"use strict";i("d3bf")},"7d96":function(e,t,i){},"7f3b":function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));class s{constructor(){this._scale=1,this._cache=new Map}createRaster(e,t,i,s=0){let r=new o(t,i,s,this._scale);return this._cache.set(e,r),r}drawRaster(e,t,i,s){let o=this._cache.get(t);return!!o&&(e.drawImage(o.canvas,i-o.cx,s-o.cy,o.w,o.h),!0)}setScale(e){this._scale=e,this._cache.clear()}getScale(){return this._scale}}class o{constructor(e,t,i,s){let o=i<<1;this.canvas=document.createElement("canvas"),this.canvas.width=Math.round((e+o)*s),this.canvas.height=Math.round((t+o)*s),this.context=this.canvas.getContext("2d"),this.context.setTransform(s,0,0,s,0,0),this.h=t+o,this.w=e+o,this.cx=Math.round(this.w/2),this.cy=Math.round(this.h/2),this.p=i}set fillStyle(e){this.context.fillStyle=e}set font(e){this.context.font=e}set lineWidth(e){this.context.lineWidth=e}set strokeStyle(e){this.context.strokeStyle=e}set textBaseline(e){this.context.textBaseline=e}beginPath(){this.context.beginPath()}closePath(){this.context.closePath()}moveTo(e,t){this.context.moveTo(this.p+e,this.p+t)}lineTo(e,t){this.context.lineTo(this.p+e,this.p+t)}stroke(){this.context.stroke()}fill(){this.context.fill()}fillText(e,t,i){this.context.fillText(e,t,i)}drawRect(e,t,i,s,o,r=1){e+=this.p+r/2,t+=this.p+r/2,i-=r,s-=r,o="number"===typeof o?{tl:o,tr:o,br:o,bl:o}:Object.assign({tl:0,tr:0,br:0,bl:0},o);let n=this.context;n.beginPath(),n.moveTo(e+o.tl,t),n.lineTo(e+i-o.tr,t),n.quadraticCurveTo(e+i,t,e+i,t+o.tr),n.lineTo(e+i,t+s-o.br),n.quadraticCurveTo(e+i,t+s,e+i-o.br,t+s),n.lineTo(e+o.bl,t+s),n.quadraticCurveTo(e,t+s,e,t+s-o.bl),n.lineTo(e,t+o.tl),n.quadraticCurveTo(e,t,e+o.tl,t),n.closePath()}}},"856c":function(e,t,i){"use strict";i("f9d8")},"872d":function(e,t,i){"use strict";i("335e")},"89ee":function(e,t,i){"use strict";i("7d96")},"8ee3":function(e,t,i){"use strict";i("0323")},9224:function(e){e.exports=JSON.parse('{"name":"attack-flow-builder","version":"0.1.0","private":true,"scripts":{"serve":"vue-cli-service serve","build":"vue-cli-service build"},"author":"mcarenzo","dependencies":{"vue":"^3.0.0","vuex":"^4.0.0-0"},"devDependencies":{"@types/d3":"^7.4.0","@types/resize-observer-browser":"^0.1.7","@vue/cli-plugin-typescript":"~4.5.15","@vue/cli-plugin-vuex":"~4.5.15","@vue/cli-service":"~4.5.15","@vue/compiler-sfc":"^3.0.0","d3":"^7.4.4","standard-version":"^9.3.2","typescript":"^4.1.5"},"browserslist":["> 1%","last 2 versions","not dead"]}')},"92f3":function(e,t,i){},"9a52":function(e,t,i){"use strict";i("92f3")},"9de6":function(e,t,i){},"9e53":function(e,t,i){"use strict";i("e16f")},"9e60":function(e,t,i){},a2be:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));class s{constructor(){this.deltaX=0,this.deltaY=0,this.movementX=0,this.movementY=0,this.target=null,this._originX=0,this._originY=0,this._lastX=0,this._lastY=0}capture(e,t){this._originX=e.clientX,this._originY=e.clientY,this._lastX=this._originX,this._lastY=this._originY,this.target=e.target,this.target.setPointerCapture(e.pointerId),this.target.onpointermove=e=>{this.update(e),t(e,this)}}update(e){this.deltaX=e.clientX-this._originX,this.deltaY=e.clientY-this._originY,this.movementX=e.clientX-this._lastX,this.movementY=e.clientY-this._lastY,this._lastX=e.clientX,this._lastY=e.clientY}release(e){null!==this.target&&(this.target.releasePointerCapture(e.pointerId),this.target.onpointermove=null,this.target=null)}}},a508:function(e,t,i){},a808:function(e,t,i){"use strict";i("c544")},a80d:function(e,t,i){"use strict";i.d(t,"g",(function(){return o})),i.d(t,"c",(function(){return r})),i.d(t,"d",(function(){return n})),i.d(t,"e",(function(){return a})),i.d(t,"f",(function(){return c})),i.d(t,"h",(function(){return d})),i.d(t,"j",(function(){return h})),i.d(t,"k",(function(){return u})),i.d(t,"l",(function(){return f})),i.d(t,"m",(function(){return g})),i.d(t,"a",(function(){return b})),i.d(t,"i",(function(){return y})),i.d(t,"b",(function(){return m})),i.d(t,"o",(function(){return _})),i.d(t,"n",(function(){return v}));var s=i("1dd9");class o{constructor(e,t){this.el=e,this.x=e.boundingBox.xMid,this.y=e.boundingBox.yMid,this.parent=void 0,this.children=[],this._rasterCache=t}*getSubtree(e){let t=new Set([this.el.id]),i=[this];while(0!=i.length){let s=i.shift();if(e&&!e(s)||(yield s),!(s instanceof r))for(let e of s.children)t.has(e.el.id)||(t.add(e.el.id),i.push(e))}}moveTo(e,t,i){this.moveBy(e-this.x,t-this.y)}moveBy(e,t,i){this.x+=e,this.y+=t;for(let s of this.children)s instanceof n&&s.el.isAttached()||s.moveBy(e,t)}renderTo(e,t,i=0,s=0,o){if(this.isVisible(t))for(let r of this.children)r.renderTo(e,t,i,s)}renderDebugTo(e,t){if(!this.isVisible(t))return;for(let s of this.children)s.renderDebugTo(e,t);let i=this.el.boundingBox;e.beginPath(),e.moveTo(i.xMin+.5,i.yMin+.5),e.lineTo(i.xMax-.5,i.yMin+.5),e.lineTo(i.xMax-.5,i.yMax-.5),e.lineTo(i.xMin+.5,i.yMax-.5),e.lineTo(i.xMin+.5,i.yMin+.5),e.lineTo(i.xMax-.5,i.yMax-.5),e.stroke()}isVisible(e){let{xMin:t,yMin:i,xMax:s,yMax:o}=this.el.boundingBox;return e.xMin<=s&&e.xMax>=t&&e.yMin<=o&&e.yMax>=i}updateView(){let e=new Array(this.el.children.length);for(let t=0;t<e.length;t++){let i=this.el.children[t].id,s=this.children.find(e=>e.el.id===i);e[t]=null!==s&&void 0!==s?s:this.el.children[t].createView(this._rasterCache),e[t].parent=this,e[t].updateView()}return this.children=e,this.x=this.el.boundingBox.xMid,this.y=this.el.boundingBox.yMid,this}fakeAlignment(e){return this.el.attrs&~s["b"]|e}fakeCursor(e){return this.el.attrs&~s["e"]|e}fakeHover(e){return this.el.attrs&~s["g"]|e}fakeInheritAlignment(e){return this.el.attrs&~s["i"]|e}fakePositionSetByUser(e){return this.el.attrs&~s["k"]|e}fakePriority(e){return this.el.attrs&~s["m"]|e}fakeSelect(e){return this.el.attrs&~s["o"]|e}}class r extends o{constructor(e,t){super(e,t),this.children=[],this.el=e}moveBy(e,t,i){this.x+=e,this.y+=t;for(let s of this.children)s.el.isAttached(this.el)?s.moveTo(this.x,this.y):console.warn(`'${s.el.id}' incorrectly attached to anchor.`)}updateView(){return this.x=this.el.boundingBox.xMid,this.y=this.el.boundingBox.yMid,this}}class n extends o{constructor(e,t){super(e,t),this.el=e}}class a extends n{constructor(e,t){super(e,t),this.el=e}moveBy(e,t,i,s=!1){var o;s?super.moveBy(e,t,i):null===(o=this.parent)||void 0===o||o.moveChild(this.el.id,e,t,i)}}class l extends o{constructor(e,t){super(e,t),this.el=e}moveBy(e,t,i,s=!1){var o;s?super.moveBy(e,t,i):null===(o=this.parent)||void 0===o||o.moveChild(this.el.id,e,t,i)}}class c extends o{constructor(e,t){super(e,t),this.el=e,this.children=[]}get srcEnding(){return this.children.at(0)}get trgEnding(){return this.children.at(-1)}}class d extends o{constructor(e,t){super(e,t),this.el=e,this._objectCache=new Map}renderDebugTo(e,t){e.save(),e.lineWidth=1,e.fillStyle="#00ff00",e.strokeStyle="#ffffff",e.setLineDash([2,2]),super.renderDebugTo(e,t),e.restore()}updateView(){super.updateView(),this._objectCache.clear();for(let e of this.getSubtree())this._objectCache.set(e.el.id,e);for(let e of this.el.anchorCache){let t=this.lookup(e.id);t.children=new Array(e.children.length);for(let i=0;i<t.children.length;i++){let s=e.children[i];t.children[i]=this.lookup(s.id),t.children[i].anchor=t}}return this}lookup(e){return this._objectCache.get(e)}}class h extends a{constructor(e,t){super(e,t),this.el=e}renderTo(e,t,i=0,s=0,o){let{radius:r,fill_color:n,stroke_color:a,stroke_width:l}=this.el.style;e.fillStyle=n,e.lineWidth=l,e.strokeStyle=a,e.beginPath(),e.arc(this.x,this.y,r,0,2*Math.PI),e.closePath(),e.fill(),e.stroke()}}class u extends l{constructor(e,t){super(e,t),this.el=e}renderTo(e,t,i=0,s=0,o){let{radius:r,fill_color:n,stroke_color:a,stroke_width:l}=this.el.style;e.fillStyle=n,e.lineWidth=l,e.strokeStyle=a;let c=l%2?.5:0;e.beginPath(),e.arc(this.x,this.y,r+c,0,2*Math.PI),e.closePath(),e.fill(),e.stroke()}}var p=i("13c3");class f extends c{constructor(e,t){super(e,t),this.el=e}moveChild(e,t,i,s){let o=this.children.find(t=>t.el.id===e);if(!o)return;o instanceof a&&o.moveBy(t,i,void 0,!0);let[r,n,l]=this.children,c=(r.x+l.x)/2-n.x,d=(r.y+l.y)/2-n.y;n.el.hasUserSetPosition(o===n?s:void 0)?o===n&&n.moveBy(t,0,void 0,!0):n.moveBy(c,0,void 0,!0),n.moveBy(0,d,void 0,!0)}renderTo(e,t,i=0,o=0,r){if(!this.isVisible(t))return;let n,{children:a}=this,{cap_size:l,width:c,color:d,select_color:h}=this.el.style;switch(e.lineWidth=c,this.el.attrs&s["o"]){case s["n"].True:n=h;break;case s["n"].False:default:n=d;break}e.fillStyle=n,e.strokeStyle=n;let u=c%2?.5:0,f=Math.sign(a[2].x-a[1].x)*(l>>1);e.beginPath(),e.moveTo(a[0].x,a[0].y+u),e.lineTo(a[1].x+u,a[0].y+u),e.lineTo(a[1].x+u,a[2].y+u),e.lineTo(a[2].x-f,a[2].y+u),e.stroke(),Object(p["h"])(e,a[1].x,a[2].y+u,a[2].x,a[2].y+u,l),e.fill(),this.el.isSelected(r)&&super.renderTo(e,t,i,o)}renderDebugTo(e,t){if(!this.isVisible(t))return;let i=2,s=2*Math.PI;e.beginPath();for(let o of this.el.hitboxes)for(let t=0;t<o.length;t+=2)e.moveTo(o[t]+i,o[t+1]),e.arc(o[t],o[t+1],i,0,s);e.fill(),super.renderDebugTo(e,t)}}class g extends c{constructor(e,t){super(e,t),this.el=e}moveChild(e,t,i,s){let o=this.children.find(t=>t.el.id===e);if(!o)return;o instanceof a&&o.moveBy(t,i,void 0,!0);let[r,n,l]=this.children,c=(r.x+l.x)/2-n.x,d=(r.y+l.y)/2-n.y;n.el.hasUserSetPosition(o===n?s:void 0)?o===n&&n.moveBy(0,i,void 0,!0):n.moveBy(0,d,void 0,!0),n.moveBy(c,0,void 0,!0)}renderTo(e,t,i=0,o=0,r){if(!this.isVisible(t))return;let n,{children:a}=this,{cap_size:l,width:c,color:d,select_color:h}=this.el.style;switch(e.lineWidth=c,this.el.attrs&s["o"]){case s["n"].True:n=h;break;case s["n"].False:default:n=d;break}e.fillStyle=n,e.strokeStyle=n;let u=c%2?.5:0,f=Math.sign(a[1].y-a[2].y)*(l>>1);e.beginPath(),e.moveTo(a[0].x+u,a[0].y),e.lineTo(a[0].x+u,a[1].y+u),e.lineTo(a[2].x+u,a[1].y+u),e.lineTo(a[2].x+u,a[2].y+f),e.stroke(),Object(p["h"])(e,a[2].x+u,a[1].y,a[2].x+u,a[2].y,l),e.fill(),this.el.isSelected(r)&&super.renderTo(e,t,i,o)}renderDebugTo(e,t){if(!this.isVisible(t))return;let i=2,s=2*Math.PI;e.beginPath();for(let o of this.el.hitboxes)for(let t=0;t<o.length;t+=2)e.moveTo(o[t]+i,o[t+1]),e.arc(o[t],o[t+1],i,0,s);e.fill(),super.renderDebugTo(e,t)}}class b extends r{constructor(e,t){super(e,t),this.el=e}renderTo(e,t,i=0,s=0,o){this.el.isHovered(o)&&(e.fillStyle=this.el.style.color,e.beginPath(),e.arc(this.x,this.y,this.el.radius,0,2*Math.PI),e.closePath(),e.fill())}}class y extends o{constructor(e,t){super(e,t),this.el=e,this.tlx=0,this.tly=0}moveBy(e,t,i){super.moveBy(e,t),this.tlx+=e,this.tly+=t}renderTo(e,t,i=0,s=0,o){if(!this.isVisible(t))return;let r,n,{tlx:a,tly:l}=this,{body:c,head:d,select_outline:h,border_radius:u}=this.el.style,{width:f,height:g,headerHeight:b,text:y}=this.el.layout,m=b!==g;m?(r=c.fill_color,n=c.stroke_color):(r=d.fill_color,n=d.stroke_color),e.lineWidth=1.1,Object(p["i"])(e,a,l,f,g,u),i|s?(e.shadowOffsetX=i+.5*t.scale,e.shadowOffsetY=s+.5*t.scale,e.fillStyle=r,e.strokeStyle=n,e.fill(),e.shadowOffsetX=0,e.shadowOffsetY=0,e.stroke()):(e.fillStyle=r,e.strokeStyle=n,e.fill(),e.stroke()),m&&(Object(p["i"])(e,a,l,f,b,{tr:u,tl:u}),e.fillStyle=d.fill_color,e.strokeStyle=d.stroke_color,e.fill(),e.stroke());for(let p of y){e.font=p.font.css,e.fillStyle=p.color;for(let t of p.text)e.fillText(t.t,a+t.x,l+t.y)}if(this.el.isSelected(o)){let{color:t,padding:i,border_radius:s}=h;i+=1,Object(p["i"])(e,a-i,l-i,f+2*i,g+2*i,s,1),e.strokeStyle=t,e.stroke()}else if(this.el.isHovered(o)){let{color:o,size:r}=this.el.style.anchor_markers;super.renderTo(e,t,i,s),e.strokeStyle=o,e.beginPath();for(let t of this.children)e.moveTo(t.x-r,t.y-r),e.lineTo(t.x+r,t.y+r),e.moveTo(t.x+r,t.y-r),e.lineTo(t.x-r,t.y+r);e.stroke()}}updateView(){return super.updateView(),this.tlx=this.el.boundingBox.xMin+this.el.layout.dx,this.tly=this.el.boundingBox.yMin+this.el.layout.dy,this}}class m extends o{constructor(e,t){super(e,t),this.el=e,this.tlx=0,this.tly=0}moveBy(e,t,i){super.moveBy(e,t),this.tlx+=e,this.tly+=t}renderTo(e,t,i=0,s=0,o){if(!this.isVisible(t))return;let r,n,{tlx:a,tly:l}=this,{body:c,head:d,select_outline:h,border_radius:u}=this.el.style,{width:f,height:g,headerHeight:b,text:y,lines:m}=this.el.layout,_=b!==g;_?(r=c.fill_color,n=c.stroke_color):(r=d.fill_color,n=d.stroke_color),e.lineWidth=1.1,Object(p["i"])(e,a,l,f,g,u),i|s?(e.shadowOffsetX=i+.5*t.scale,e.shadowOffsetY=s+.5*t.scale,e.fillStyle=r,e.strokeStyle=n,e.fill(),e.shadowOffsetX=0,e.shadowOffsetY=0,e.stroke()):(e.fillStyle=r,e.strokeStyle=n,e.fill(),e.stroke());for(let p of m)e.moveTo(a+p.x0,l+p.y0),e.lineTo(a+p.x1,l+p.y1);e.stroke(),_&&(Object(p["i"])(e,a,l,f,b,{tr:u,tl:u}),e.fillStyle=d.fill_color,e.strokeStyle=d.stroke_color,e.fill(),e.stroke());for(let p of y){e.font=p.font.css,e.fillStyle=p.color;for(let t of p.text)e.fillText(t.t,a+t.x,l+t.y)}if(this.el.isSelected(o)){let{color:t,padding:i,border_radius:s}=h;i+=1,Object(p["i"])(e,a-i,l-i,f+2*i,g+2*i,s,1),e.strokeStyle=t,e.stroke()}else if(this.el.isHovered(o)){let{color:o,size:r}=this.el.style.anchor_markers;super.renderTo(e,t,i,s),e.strokeStyle=o,e.beginPath();for(let t of this.children)e.moveTo(t.x-r,t.y-r),e.lineTo(t.x+r,t.y+r),e.moveTo(t.x+r,t.y-r),e.lineTo(t.x-r,t.y+r);e.stroke()}}updateView(){return super.updateView(),this.tlx=this.el.boundingBox.xMin+this.el.layout.dx,this.tly=this.el.boundingBox.yMin+this.el.layout.dy,this}}class _ extends o{constructor(e,t){super(e,t),this.el=e,this.tlx=0,this.tly=0}moveBy(e,t,i){super.moveBy(e,t),this.tlx+=e,this.tly+=t}renderTo(e,t,i=0,s=0,o){if(!this.isVisible(t))return;let{tlx:r,tly:n}=this,{text:a,fill_color:l,stroke_color:c,select_outline:d,border_radius:h}=this.el.style,{width:u,height:f,text:g}=this.el.layout;e.lineWidth=1.1,i|s?(Object(p["i"])(e,r,n,u,f,h),e.shadowOffsetX=i+.5*t.scale,e.shadowOffsetY=s+.5*t.scale,e.fillStyle=l,e.strokeStyle=c,e.fill(),e.shadowOffsetX=0,e.shadowOffsetY=0,e.stroke()):(Object(p["i"])(e,r,n,u,f,h),e.fillStyle=l,e.strokeStyle=c,e.fill(),e.stroke()),e.font=a.font.css,e.fillStyle=a.color;for(let p of g)e.fillText(p.t,r+p.x,n+p.y);if(this.el.isSelected(o)){let{color:t,padding:i,border_radius:s}=d;i+=1,Object(p["i"])(e,r-i,n-i,u+2*i,f+2*i,s,1),e.strokeStyle=t,e.stroke()}else if(this.el.isHovered(o)){let{color:o,size:r}=this.el.style.anchor_markers;super.renderTo(e,t,i,s),e.strokeStyle=o,e.beginPath();for(let t of this.children)e.moveTo(t.x-r,t.y-r),e.lineTo(t.x+r,t.y+r),e.moveTo(t.x+r,t.y-r),e.lineTo(t.x-r,t.y+r);e.stroke()}}updateView(){return super.updateView(),this.tlx=this.el.boundingBox.xMin+this.el.layout.dx,this.tly=this.el.boundingBox.yMin+this.el.layout.dy,this}}class v extends d{constructor(e,t){super(e,t),this.el=e;let{grid_color:i,background_color:s}=this.el.style;this._gridPattern=this.createGridPattern(...this.el.grid,s,i)}get selects(){return[...this.getSubtree(e=>e.el.isSelected())]}renderPageSurfaceTo(e,t,i){e.fillStyle=i?this._gridPattern:this.el.style.background_color,e.fillRect(t.xMin,t.yMin,t.xMax-t.xMin,t.yMax-t.yMin)}renderTo(e,t,i=this.el.style.drop_shadow.offset[0],s=this.el.style.drop_shadow.offset[1],o){e.shadowColor=this.el.style.drop_shadow.color,super.renderTo(e,t,i*t.scale,s*t.scale)}createGridPattern(e,t,i,s){let o=document.createElement("canvas"),r=o.getContext("2d",{alpha:!1});o.width=e,o.height=t,r.fillStyle=i,r.lineWidth=2,r.strokeStyle=s,r.fillRect(0,0,e,t),r.moveTo(0,0),r.lineTo(0,t),r.lineTo(e,t),r.stroke();let n=r.createPattern(o,"repeat");return n.setTransform((new DOMMatrix).translate(0,1)),n}}},aadc:function(e,t,i){},af01:function(e,t,i){},c12e:function(e,t,i){"use strict";i("f847")},c40c:function(e,t,i){"use strict";i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return r}));const s={Blue:{fill_color:"#637bc9",stroke_color:"#708ce6"},Orange:{fill_color:"#c26130",stroke_color:"#e57339"},Green:{fill_color:"#2a9642",stroke_color:"#32b34e"},Red:{fill_color:"#c94040",stroke_color:"#dd5050"},Gray:{fill_color:"#848484",stroke_color:"#6b6b6b"}};class o{constructor(e){this._theme=e}AnchorPoint(e={}){return this.merge(e,structuredClone(this._theme.anchor))}BranchBlock(e={}){return this.merge(e,structuredClone(this._theme.branch))}DictionaryBlock(e={}){return this.merge(e,structuredClone(this._theme.dictionary))}Line(e={}){return this.merge(e,structuredClone(this._theme.line))}LineEnding(e={}){return this.merge(e,structuredClone(this._theme.lineEnding))}LineHandle(e={}){return this.merge(e,structuredClone(this._theme.lineHandle))}TextBlock(e={}){return this.merge(e,structuredClone(this._theme.text))}Page(e={}){return this.merge(e,structuredClone(this._theme.page))}merge(e,t){for(let i in e){if(!(i in t))throw new Error("Objects do not overlap.");if(typeof e[i]!==typeof t[i])throw new Error(`'${i}' has mismatching types.`);"object"===typeof e[i]?this.merge(e[i],t[i]):t[i]=e[i]}return t}}const r=new o({anchor:{color:"rgba(255, 255, 255, 0.25)"},branch:{max_width:320,head:{fill_color:"#000",stroke_color:"#000",one_title:{title:{font:{family:"Inter",size:"10.5pt",weight:800},color:"#d8d8d8"}},two_title:{title:{font:{family:"Inter",size:"8pt",weight:600},color:"#d8d8d8",padding:8},subtitle:{font:{family:"Inter",size:"13pt",weight:800},color:"#d8d8d8",line_height:23}},vertical_padding:14},body:{fill_color:"#1f1f1f",stroke_color:"#383838",field_name:{font:{family:"Inter",size:"8pt",weight:600},color:"#b3b3b3",padding:12},field_value:{font:{family:"Inter",size:"10.5pt"},color:"#bfbfbf",line_height:20,padding:22},vertical_padding:18},branch:{font:{family:"Inter",size:"10.5pt"},color:"#bfbfbf",vertical_padding:12,horizontal_padding:30},select_outline:{color:"#e6d845",padding:4,border_radius:9},anchor_markers:{color:"#ffffff",size:3},border_radius:5,horizontal_padding:20},dictionary:{max_width:320,head:{fill_color:"#000",stroke_color:"#000",one_title:{title:{font:{family:"Inter",size:"10.5pt",weight:800},color:"#d8d8d8"}},two_title:{title:{font:{family:"Inter",size:"8pt",weight:600},color:"#d8d8d8",padding:8},subtitle:{font:{family:"Inter",size:"13pt",weight:800},color:"#d8d8d8",line_height:23}},vertical_padding:14},body:{fill_color:"#1f1f1f",stroke_color:"#383838",field_name:{font:{family:"Inter",size:"8pt",weight:600},color:"#b3b3b3",padding:12},field_value:{font:{family:"Inter",size:"10.5pt"},color:"#bfbfbf",line_height:20,padding:22},vertical_padding:18},select_outline:{color:"#e6d845",padding:4,border_radius:9},anchor_markers:{color:"#ffffff",size:3},border_radius:5,horizontal_padding:20},line:{width:5,cap_size:16,color:"#646464",select_color:"#646464"},lineEnding:{radius:6,fill_color:"#fedb22",stroke_color:"#141414",stroke_width:1.5},lineHandle:{radius:6,fill_color:"#fedb22",stroke_color:"#141414",stroke_width:1.5},text:{max_width:320,fill_color:"#000",stroke_color:"#000",text:{font:{family:"Inter",size:"14pt",weight:800},color:"#d8d8d8",line_height:24},border_radius:13,select_outline:{color:"#e6d845",padding:4,border_radius:19},anchor_markers:{color:"#ffffff",size:3},vertical_padding:18,horizontal_padding:20},page:{grid_color:"#1d1d1d",background_color:"#141414",drop_shadow:{color:"rgba(0,0,0,.4)",offset:[3,3]}}})},c544:function(e,t,i){},c609:function(e,t,i){"use strict";i("f0dd")},cb32:function(e,t,i){"use strict";i("9e60")},cbc0:function(e,t,i){"use strict";i.d(t,"f",(function(){return n})),i.d(t,"g",(function(){return a})),i.d(t,"i",(function(){return c})),i.d(t,"c",(function(){return d})),i.d(t,"d",(function(){return h})),i.d(t,"e",(function(){return f})),i.d(t,"j",(function(){return y})),i.d(t,"k",(function(){return m})),i.d(t,"l",(function(){return v})),i.d(t,"m",(function(){return x})),i.d(t,"a",(function(){return w})),i.d(t,"h",(function(){return j})),i.d(t,"b",(function(){return O})),i.d(t,"o",(function(){return M})),i.d(t,"n",(function(){return k}));var s=i("5368"),o=i("317b"),r=i("1dd9");class n{constructor(e,t,i){var n,a,c,d,h;if(this.id=null!==(n=null===i||void 0===i?void 0:i.id)&&void 0!==n?n:crypto.randomUUID(),this.attrs=null!==(a=null===i||void 0===i?void 0:i.attrs)&&void 0!==a?a:r["j"].False,this.setAlignment(r["a"].Free),this.setCursor(r["c"].Default),this.setInheritAlignment(r["h"].True),this.setSemanticRole(o["f"].None),this.children=[],this.factory=e,this.template=t,this.boundingBox=new l,this.boundingBox.xMid=null!==(c=null===i||void 0===i?void 0:i.x)&&void 0!==c?c:0,this.boundingBox.yMid=null!==(d=null===i||void 0===i?void 0:i.y)&&void 0!==d?d:0,this.props=new s["i"](this,null!==(h=null===t||void 0===t?void 0:t.properties)&&void 0!==h?h:{},null===i||void 0===i?void 0:i.properties),null===i||void 0===i?void 0:i.children)for(let s=0;s<i.children.length;s++)this.addChild(i.children[s],s,!1)}get root(){let e=this;while(e.parent)e=e.parent;return e}*getSubtree(e){let t=new Set([this.id]),i=[this];while(0!=i.length){let s=i.shift();if(e&&!e(s)||(yield s),!(s instanceof d))for(let e of s.children)t.has(e.id)||(t.add(e.id),i.push(e))}}addChild(e,t=this.children.length,i=!0){if(-1!==this.children.indexOf(e))throw new a(`Object already has a child with the id '${e.id}'.`,this);e.parent=this,this.children.splice(t,0,e),i&&this.updateLayout(c.ChildAdded)}removeChild(e,t=!0,i=!0){let s=this.children.indexOf(e);if(-1===s)throw new a(`'${e.id}' is not a child of '${this.id}'.`,e);if(i&&e.hasExternalAttachments())throw new a(`'${e.id}' still maintains external attachments.`,e);e.parent=void 0,this.children.splice(s,1),t&&this.updateLayout(c.ChildDeleted)}reorderChild(e,t){let i=this.children.findIndex(t=>t.id===e),s=this.children[i];if(!s)throw new a(`Object has no child with the id '${e}'.`);this.children.splice(i,1),this.children.splice(t,0,s)}hasExternalAttachments(){let e=new Map;for(let t of this.getSubtree())(t instanceof d||t instanceof h)&&e.set(t.id,t);for(let t of e.values())if(t instanceof h){if(t.isAttached()&&!e.has(t.anchor.id))return!0}else if(t instanceof d)for(let i of t.children)if(!e.has(i.id))return!0;return!1}getIndexInParent(){var e,t;return null!==(t=null===(e=this.parent)||void 0===e?void 0:e.children.indexOf(this))&&void 0!==t?t:-1}getObjectAt(e,t){let i=void 0,s=void 0;for(let o=this.children.length-1;0<=o;o--){let n=this.children[o];if(!(n instanceof h&&n.isAttached())&&(s=n.getObjectAt(e,t),s&&(!i||s.hasHigherPriorityThan(i))&&(i=s,i.getPriority()===r["l"].High)))break}return i}moveTo(e,t,i=!0){this.moveBy(e-this.boundingBox.xMid,t-this.boundingBox.yMid,i)}moveBy(e,t,i=!0){this.boundingBox.xMin+=e,this.boundingBox.xMid+=e,this.boundingBox.xMax+=e,this.boundingBox.yMin+=t,this.boundingBox.yMid+=t,this.boundingBox.yMax+=t;let s=!0;for(let o of this.children)o instanceof h&&o.isAttached()||(s=!1,o.moveBy(e,t));s&&this.updateLayout(c.Movement,i)}recalculateLayout(){let e=!0;for(let t of this.children)e=!1,t.recalculateLayout();e&&this.updateLayout(c.Initialization)}updateLayout(e,t=!0){var i;let s=this.boundingBox;s.xMin=1/0,s.yMin=1/0,s.xMax=-1/0,s.yMax=-1/0;let o=r["a"].Free;for(let r of this.children)s.xMin=Math.min(s.xMin,r.boundingBox.xMin),s.yMin=Math.min(s.yMin,r.boundingBox.yMin),s.xMax=Math.max(s.xMax,r.boundingBox.xMax),s.yMax=Math.max(s.yMax,r.boundingBox.yMax),o=Math.max(o,r.getAlignment());s.xMid=Math.floor((s.xMin+s.xMax)/2),s.yMid=Math.floor((s.yMin+s.yMax)/2),this.isAlignmentInherited()&&this.setAlignment(o),t&&(null===(i=this.parent)||void 0===i||i.updateLayout(e))}getAlignment(e=this.attrs){return e&r["b"]}getCursor(e=this.attrs){return e&r["e"]}isHovered(e=this.attrs){return(e&r["g"])!==r["f"].Off}isHoveredOrSelected(e=this.attrs){return 0<(e&(r["o"]|r["g"]))}isAlignmentInherited(e=this.attrs){return(e&r["i"])===r["h"].True}hasUserSetPosition(e=this.attrs){return(e&r["k"])===r["j"].True}getPositionSetByUser(e=this.attrs){return e&r["k"]}getPriority(e=this.attrs){return e&r["m"]}hasHigherPriorityThan(e){return this.getPriority()>e.getPriority()}isSelected(e=this.attrs){return(e&r["o"])===r["n"].True}getSemanticRole(e=this.attrs){return e&r["p"]}hasRole(e,t=this.attrs){return(t&r["p"])===e}setAlignment(e){this.attrs=this.attrs&~r["b"]|e}setCursor(e){this.attrs=this.attrs&~r["e"]|e}setHover(e){this.attrs=this.attrs&~r["g"]|e}setInheritAlignment(e){this.attrs=this.attrs&~r["i"]|e}setPositionSetByUser(e){this.attrs=this.attrs&~r["k"]|e}setPriority(e){this.attrs=this.attrs&~r["m"]|e}setSelect(e){this.attrs=this.attrs&~r["o"]|e}setSemanticRole(e){this.attrs=this.attrs&~r["p"]|e}toExport(){return{id:this.id,x:this.boundingBox.xMid,y:this.boundingBox.yMid,attrs:this.getPositionSetByUser(),template:this.template.id,children:this.children.map(e=>e.id),properties:this.props.toRawValue()}}}class a extends Error{constructor(e,t){super(e),this.subject=t}}class l{constructor(){this.xMin=0,this.yMin=0,this.xMid=0,this.yMid=0,this.xMax=0,this.yMax=0}}const c={Initialization:1,Movement:2,ChildAdded:4,ChildDeleted:8,PropUpdate:16};class d extends n{constructor(e,t,i){var s;super(e,t,i),this.radius=t.radius,this.template=t,this.lineTemplates=t.line_templates,this.angle=null!==(s=null===i||void 0===i?void 0:i.angle)&&void 0!==s?s:o["a"].DEG_0}addChild(e,t=this.children.length){if(e.isAttached())throw new a(`'${e.id}' is already anchored.`,e);e.anchor=this,this.children.splice(t,0,e)}removeChild(e){let t=this.children.indexOf(e);if(-1===t)throw new a(`'${e.id}' is not attached to the '${this.id}'.`,e);e.anchor=void 0,this.children.splice(t,1)}hasAttachments(){return 0<this.children.length}getObjectAt(e,t){let i=void 0,s=void 0;for(let l=this.children.length-1;0<=l;l--)if(s=this.children[l].getObjectAt(e,t),s&&(!i||s.hasHigherPriorityThan(i))&&(i=s,i.getPriority()===r["l"].High))break;let o=this.radius,n=e-this.boundingBox.xMid,a=t-this.boundingBox.yMid;return i&&i.getPriority()>r["l"].Normal?i:n*n+a*a<o*o?this:void 0}moveBy(e,t,i=!0){this.boundingBox.xMin+=e,this.boundingBox.xMid+=e,this.boundingBox.xMax+=e,this.boundingBox.yMin+=t,this.boundingBox.yMid+=t,this.boundingBox.yMax+=t;for(let s of this.children)s.isAttached(this)?s.moveTo(this.boundingBox.xMid,this.boundingBox.yMid):console.warn(`'${s.id}' incorrectly attached to anchor.`);this.updateLayout(c.Movement,i)}updateLayout(e,t=!0){var i;let s=this.boundingBox;s.xMin=s.xMid-this.radius,s.yMin=s.yMid-this.radius,s.xMax=s.xMid+this.radius,s.yMax=s.yMid+this.radius,t&&(null===(i=this.parent)||void 0===i||i.updateLayout(e))}toExport(){return Object.assign(Object.assign({},super.toExport()),{angle:this.angle})}makeLine(){let e=this.lineTemplates[this.angle],t=this.factory.createObject(e);if(t instanceof f)return t;throw new a(`Template '${e}' is not a line.`,t)}}class h extends n{constructor(e,t,i){super(e,t,i),this.anchor=void 0}isAttached(e){return e?this.anchor===e:void 0!==this.anchor}getIndexInAnchor(){var e,t;return null!==(t=null===(e=this.anchor)||void 0===e?void 0:e.children.indexOf(this))&&void 0!==t?t:-1}}class u extends h{constructor(e,t,i){super(e,t,i)}moveBy(e,t,i=!0,s=!1){var o;s?super.moveBy(e,t,i):null===(o=this.parent)||void 0===o||o.moveChild(this.id,e,t,i)}}class p extends n{constructor(e,t,i){super(e,t,i)}moveBy(e,t,i=!0,s=!1){var o;s?super.moveBy(e,t,i):null===(o=this.parent)||void 0===o||o.moveChild(this.id,e,t,i)}}class f extends n{constructor(e,t,i){super(e,t,i),this.style=t.style,this.template=t,this.hitboxWidth=t.hitbox_width}get srcEnding(){return this.children.at(0)}get trgEnding(){return this.children.at(-1)}addChild(e,t=this.children.length,i=!0){if(!(e instanceof u||e instanceof p)){let t=u.name,i=p.name;throw new a(`Child must be of type '${t}' or '${i}.'`,e)}super.addChild(e,t,i)}reorderChild(e,t,i=!0){throw new a("Line objects cannot be reordered.",this)}isAnchored(){for(let e of this.children)if(e instanceof u&&e.isAttached())return!0;return!1}setSelect(e){super.setSelect(e);let t=this.isSelected()?r["l"].High:r["l"].Normal;for(let i of this.children)i.setPriority(t)}}class g extends n{constructor(e,t,i){super(e,t,i),this.anchorCache=[],this._objectCache=new Map([[this.id,this]])}lookup(e){return this._objectCache.get(e)}updateLayout(e){let{ChildAdded:t,ChildDeleted:i,Initialization:s}=c;if(super.updateLayout(e),e&(s|t|i)){this._objectCache.clear(),this.anchorCache.splice(0,this.anchorCache.length);for(let e of this.getSubtree())e instanceof d&&this.anchorCache.push(e),this._objectCache.set(e.id,e)}}}var b=i("a80d");class y extends u{constructor(e,t,i){super(e,t,i),this.setCursor(r["c"].Pointer),this.setSemanticRole(t.role),this.template=t,this.style=t.style,this.updateLayout(c.Initialization)}getObjectAt(e,t){let i=e-this.boundingBox.xMid,s=t-this.boundingBox.yMid,o=this.style.radius;return i*i+s*s<o*o?this:void 0}updateLayout(e,t=!0){var i;let s=this.boundingBox;s.xMin=s.xMid-this.style.radius,s.yMin=s.yMid-this.style.radius,s.xMax=s.xMid+this.style.radius,s.yMax=s.yMid+this.style.radius,t&&(null===(i=this.parent)||void 0===i||i.updateLayout(e))}createView(e){return new b["j"](this,e)}}class m extends p{constructor(e,t,i){super(e,t,i),this.setCursor(r["c"].Move),this.setSemanticRole(t.role),this.template=t,this.style=t.style,this.updateLayout(c.Initialization)}getObjectAt(e,t){let i=e-this.boundingBox.xMid,s=t-this.boundingBox.yMid,o=this.style.radius;return i*i+s*s<o*o?this:void 0}updateLayout(e,t=!0){var i;let s=this.boundingBox;s.xMin=s.xMid-this.style.radius,s.yMin=s.yMid-this.style.radius,s.xMax=s.xMid+this.style.radius,s.yMax=s.yMid+this.style.radius,t&&(null===(i=this.parent)||void 0===i||i.updateLayout(e))}createView(e){return new b["k"](this,e)}}var _=i("13c3");class v extends f{constructor(e,t,i){if(super(e,t,i),this.hitboxes=[[],[],[]],this.setCursor(r["c"].Move),this.setSemanticRole(t.role),this.template=t,!this.children.length){let i=this.boundingBox.xMid,s=this.boundingBox.yMid,o=t.line_ending_template.source,r=t.line_handle_template,n=t.line_ending_template.target;this.addChild(e.createObject(o),0,!1),this.addChild(e.createObject(r),1,!1),this.addChild(e.createObject(n),2,!1);for(let e of this.children)e.moveTo(i,s);this.children[0].moveBy(-100,50),this.children[2].moveBy(100,-50)}this.updateLayout(c.Initialization)}getObjectAt(e,t){if(this.isAnchored()){let i=super.getObjectAt(e,t);if(i)return i;for(let s=0;s<this.hitboxes.length;s++)if(Object(_["l"])(e,t,this.hitboxes[s]))return 1===s?this.children[s]:this}else{if(this.isSelected()){let i=super.getObjectAt(e,t);if(i)return i}for(let i of this.hitboxes)if(Object(_["l"])(e,t,i))return this}}moveChild(e,t,i,s=!0){let o=this.children.find(t=>t.id===e);if(!o)return;o instanceof y&&o.moveBy(t,i,s,!0);let[r,n,a]=this.children,l=r.boundingBox.xMid,c=r.boundingBox.yMid,d=a.boundingBox.xMid,h=a.boundingBox.yMid,u=n.boundingBox.xMid,p=n.boundingBox.yMid,f=(l+d)/2-u,g=(c+h)/2-p;n.hasUserSetPosition()?o===n&&n.moveBy(t,0,s,!0):n.moveBy(f,0,s,!0),n.moveBy(0,g,s,!0)}updateLayout(e,t=!0){let[i,s,o]=this.children.map(e=>e.boundingBox),n=this.hitboxWidth;this.hitboxes[0]=Object(_["k"])(i.xMid,i.yMid,s.xMid,i.yMid,n),this.hitboxes[1]=Object(_["k"])(s.xMid,i.yMid,s.xMid,o.yMid,n),this.hitboxes[2]=Object(_["k"])(s.xMid,o.yMid,o.xMid,o.yMid,n),this.children[1].setCursor(r["c"].Col_Resize),super.updateLayout(e,t)}createView(e){return new b["l"](this,e)}}class x extends f{constructor(e,t,i){if(super(e,t,i),this.hitboxes=[[],[],[]],this.setCursor(r["c"].Move),this.setSemanticRole(t.role),this.template=t,!this.children.length){let i=this.boundingBox.xMid,s=this.boundingBox.yMid,o=t.line_ending_template.source,r=t.line_handle_template,n=t.line_ending_template.target;this.addChild(e.createObject(o),0,!1),this.addChild(e.createObject(r),1,!1),this.addChild(e.createObject(n),2,!1);for(let e of this.children)e.moveTo(i,s);this.children[0].moveBy(-50,100),this.children[2].moveBy(50,-100)}this.updateLayout(c.Initialization)}getObjectAt(e,t){if(this.isAnchored()){let i=super.getObjectAt(e,t);if(i)return i;for(let s=0;s<this.hitboxes.length;s++)if(Object(_["l"])(e,t,this.hitboxes[s]))return 1===s?this.children[s]:this}else{if(this.isSelected()){let i=super.getObjectAt(e,t);if(i)return i}for(let i of this.hitboxes)if(Object(_["l"])(e,t,i))return this}}moveChild(e,t,i,s=!0){let o=this.children.find(t=>t.id===e);if(!o)return;o instanceof y&&o.moveBy(t,i,s,!0);let[r,n,a]=this.children,l=r.boundingBox.xMid,c=r.boundingBox.yMid,d=a.boundingBox.xMid,h=a.boundingBox.yMid,u=n.boundingBox.xMid,p=n.boundingBox.yMid,f=(l+d)/2-u,g=(c+h)/2-p;n.hasUserSetPosition()?o===n&&n.moveBy(0,i,s,!0):n.moveBy(0,g,s,!0),n.moveBy(f,0,s,!0)}updateLayout(e,t=!0){let[i,s,o]=this.children.map(e=>e.boundingBox),n=this.hitboxWidth;this.hitboxes[0]=Object(_["k"])(i.xMid,i.yMid,i.xMid,s.yMid,n),this.hitboxes[1]=Object(_["k"])(i.xMid,s.yMid,o.xMid,s.yMid,n),this.hitboxes[2]=Object(_["k"])(o.xMid,s.yMid,o.xMid,o.yMid,n),this.children[1].setCursor(r["c"].Row_Resize),super.updateLayout(e,t)}createView(e){return new b["m"](this,e)}}class w extends d{constructor(e,t,i){super(e,t,i),this.setSemanticRole(t.role),this.template=t,this.style=t.style,this.updateLayout(c.Initialization)}updateLayout(e,t=!0){var i;let s=this.boundingBox;s.xMin=s.xMid-this.radius,s.yMin=s.yMid-this.radius,s.xMax=s.xMid+this.radius,s.yMax=s.yMid+this.radius,t&&(null===(i=this.parent)||void 0===i||i.updateLayout(e))}createView(e){return new b["a"](this,e)}}class j extends n{constructor(e,t,i){if(super(e,t,i),this.setInheritAlignment(r["h"].False),this.setAlignment(r["a"].Grid),this.setCursor(r["c"].Move),this.layout={},this.setSemanticRole(t.role),this.template=t,this.style=t.style,!this.children.length){let i=t.anchor_template,s=[o["a"].DEG_90,o["a"].DEG_0];for(let t,o=0;o<12;o++)t=e.createObject(i),t.angle=s[Math.floor(o/3)%2],this.addChild(t,o,!1)}this.props.onUpdate(()=>{this.updateLayout(c.PropUpdate)}),this.updateLayout(c.Initialization)}getObjectAt(e,t){let i=super.getObjectAt(e,t);if(i)return i;let s=this.boundingBox;return s.xMin<=e&&e<=s.xMax&&s.yMin<=t&&t<=s.yMax?this:void 0}updateLayout(e,t=!0){var i,s,o;let r=this.props.toHashValue(),n=this.layout.contentHash!==r,a=e&c.Initialization;if(a||n){let{max_width:t,head:o,body:n,horizontal_padding:a}=this.style,l=n.field_name,c=n.field_value,d=[],h=1,u=Object(_["n"])(this.template.id).toLocaleUpperCase(),p=this.props.isDefined()?this.props.toString():"",f=""!==p,g=this.hasFields(),b=(f?o.two_title:o.one_title).title,y=t;y=Math.max(y,b.font.measureWidth(u));for(let e of this.props.value.keys())y=Math.max(y,n.field_name.font.measureWidth(e));let m,v=null,x=0,w=h+a,j=h+o.vertical_padding,O={font:b.font,color:b.color,text:[]};if(d.push(O),v=b.font.measure(u),x=Math.max(x,v.width),j+=v.ascent,O.text.push({x:w,y:j,t:u}),j+=v.descent+(null!==(i=b.padding)&&void 0!==i?i:0),f){let e=o.two_title.subtitle,t={font:e.font,color:e.color,text:[]};d.push(t);let i=e.font.wordWrap(p,y);v=e.font.measure(i[0]),x=Math.max(x,v.width),j+=v.ascent,t.text.push({x:w,y:j,t:i[0]});for(let s=1;s<i.length;s++)v=e.font.measure(i[s]),x=Math.max(x,v.width),j+=e.line_height,t.text.push({x:w,y:j,t:i[s]})}if(j+=o.vertical_padding,g){let e={font:l.font,color:l.color,text:[]},t={font:c.font,color:c.color,text:[]};d.push(e),d.push(t),j+=h,m=Math.round(j),j+=n.vertical_padding;for(let[i,o]of this.props.value){if(!o.isDefined())continue;if(null!==(s=o.descriptor.is_visible)&&void 0!==s&&!s)continue;if(i===this.props.primaryKey)continue;i=i.toLocaleUpperCase(),v=l.font.measure(i),x=Math.max(x,v.width),j+=v.ascent,e.text.push({x:w,y:j,t:i}),j+=v.descent+n.field_name.padding;let r=c.font.wordWrap(o.toString(),y);v=c.font.measure(r[0]),x=Math.max(x,v.width),j+=v.ascent,t.text.push({x:w,y:j,t:r[0]});for(let e=1;e<r.length;e++)v=c.font.measure(r[e]),x=Math.max(x,v.width),j+=c.line_height,t.text.push({x:w,y:j,t:r[e]});j+=n.field_value.padding}j-=n.field_value.padding,j+=n.vertical_padding}else m=Math.round(j+h);let M=Math.round(x+2*(a+h)),k=Math.round(j+h),S=this.boundingBox,C=Math.round(S.xMid-M/2),B=Math.round(S.yMid-k/2),P=Math.round(S.xMid+M/2),T=Math.round(S.yMid+k/2),E=(S.xMid-C)/2,A=(S.yMid-B)/2,D=[S.xMid-E,B,S.xMid,B,S.xMid+E,B,P,S.yMid-A,P,S.yMid,P,S.yMid+A,S.xMid+E,T,S.xMid,T,S.xMid-E,T,C,S.yMid+A,C,S.yMid,C,S.yMid-A];for(let e=0;e<D.length;e+=2)this.children[e/2].moveTo(D[e],D[e+1],!1);super.updateLayout(e,!1),this.layout={contentHash:r,dx:C-S.xMin,dy:B-S.yMin,width:M,height:k,headerHeight:m,text:d}}t&&(null===(o=this.parent)||void 0===o||o.updateLayout(e))}hasFields(){var e;for(let[t,i]of this.props.value)if(t!==this.props.primaryKey&&(null===(e=i.descriptor.is_visible)||void 0===e||e)&&i.isDefined())return!0;return!1}createView(e){return new b["i"](this,e)}}class O extends n{constructor(e,t,i){if(super(e,t,i),this.setInheritAlignment(r["h"].False),this.setAlignment(r["a"].Grid),this.setCursor(r["c"].Move),this.layout={},this.setSemanticRole(t.role),this.template=t,this.style=t.style,!this.children.length){let i,s=t.anchor_template,r=[o["a"].DEG_90,o["a"].DEG_0];for(let t=0;t<9;t++)i=e.createObject(s),i.angle=r[Math.floor(t/3)%2],this.addChild(i,t,!1);for(let t of this.template.branches)i=e.createObject(t.anchor_template),i.angle=o["a"].DEG_90,this.addChild(i,this.children.length,!1)}this.props.onUpdate(()=>{this.updateLayout(c.PropUpdate)}),this.updateLayout(c.Initialization)}getObjectAt(e,t){let i=super.getObjectAt(e,t);if(i)return i;let s=this.boundingBox;return s.xMin<=e&&e<=s.xMax&&s.yMin<=t&&t<=s.yMax?this:void 0}updateLayout(e,t=!0){var i,s;let o=this.props.toHashValue(),r=this.layout.contentHash!==o,n=e&c.Initialization;if(n||r){let{max_width:t,head:s,body:r,branch:n,horizontal_padding:a}=this.style,l=r.field_name,c=r.field_value,d=[],h=[],u=1,p=Object(_["n"])(this.template.id).toLocaleUpperCase(),f=this.props.isDefined()?this.props.toString():"",g=""!==f,b=this.hasFields(),y=(g?s.two_title:s.one_title).title,m=0;for(let e of this.template.branches)m+=n.horizontal_padding,m+=n.font.measureWidth(e.text),m+=n.horizontal_padding+u;m-=u;let v=t;v=Math.max(v,y.font.measureWidth(p));for(let e of this.props.value.keys())v=Math.max(v,r.field_name.font.measureWidth(e));v=Math.max(v,m);let x,w=null,j=0,O=u+a,M=u+s.vertical_padding,k={font:y.font,color:y.color,text:[]};if(d.push(k),w=y.font.measure(p),j=Math.max(j,w.width),M+=w.ascent,k.text.push({x:O,y:M,t:p}),M+=w.descent+(null!==(i=y.padding)&&void 0!==i?i:0),g){let e=s.two_title.subtitle,t={font:e.font,color:e.color,text:[]};d.push(t);let i=e.font.wordWrap(f,v);w=e.font.measure(i[0]),j=Math.max(j,w.width),M+=w.ascent,t.text.push({x:O,y:M,t:i[0]});for(let s=1;s<i.length;s++)w=e.font.measure(i[s]),j=Math.max(j,w.width),M+=e.line_height,t.text.push({x:O,y:M,t:i[s]})}if(M+=s.vertical_padding,b){let e={font:l.font,color:l.color,text:[]},t={font:c.font,color:c.color,text:[]};d.push(e),d.push(t),M+=u,x=Math.round(M),M+=r.vertical_padding;for(let[i,s]of this.props.value){if(!s.isDefined())continue;if(i===this.props.primaryKey)continue;i=i.toLocaleUpperCase(),w=l.font.measure(i),j=Math.max(j,w.width),M+=w.ascent,e.text.push({x:O,y:M,t:i}),M+=w.descent+r.field_name.padding;let o=c.font.wordWrap(s.toString(),v);w=c.font.measure(o[0]),j=Math.max(j,w.width),M+=w.ascent,t.text.push({x:O,y:M,t:o[0]});for(let e=1;e<o.length;e++)w=c.font.measure(o[e]),j=Math.max(j,w.width),M+=c.line_height,t.text.push({x:O,y:M,t:o[e]});M+=r.field_value.padding}M-=r.field_value.padding,M+=r.vertical_padding}else x=Math.round(M+u);let S={font:n.font,color:n.color,text:[]};d.push(S),M+=u,j=Math.max(j+2*a,m);let C=0,B=0,P=0,T=u;this.template.branches.length;for(let e of this.template.branches)w=n.font.measure(e.text),P=n.vertical_padding+w.ascent,T+=n.horizontal_padding,S.text.push({x:T,y:M+P,t:e.text}),P+=w.descent+n.vertical_padding,T+=w.width,T+=n.horizontal_padding,C=Math.round(T)+.5,B=Math.max(B,P),h.push({x0:C,y0:0,x1:C,y1:1e5}),T+=u;h.pop();for(let e of h)e.y0=M,e.y1=M+B;M+=B;let E=Math.round(j+2*u),A=Math.round(M+u),D=this.boundingBox,H=Math.round(D.xMid-E/2),I=Math.round(D.yMid-A/2),F=Math.round(D.xMid+E/2),L=Math.round(D.yMid+A/2),V=(D.xMid-H)/2,R=(D.yMid-I)/2,z=[D.xMid-V,I,D.xMid,I,D.xMid+V,I,F,D.yMid-R,F,D.yMid,F,D.yMid+R,H,D.yMid+R,H,D.yMid,H,D.yMid-R,D.xMid-V,L,D.xMid+V,L];for(let e=0;e<z.length;e+=2)this.children[e/2].moveTo(z[e],z[e+1],!1);super.updateLayout(e,!1),this.layout={contentHash:o,dx:H-D.xMin,dy:I-D.yMin,width:E,height:A,headerHeight:x,text:d,lines:h}}t&&(null===(s=this.parent)||void 0===s||s.updateLayout(e))}hasFields(){for(let[e,t]of this.props.value)if(e!==this.props.primaryKey&&t.isDefined())return!0;return!1}createView(e){return new b["b"](this,e)}}class M extends n{constructor(e,t,i){if(super(e,t,i),this.setInheritAlignment(r["h"].False),this.setAlignment(r["a"].Grid),this.setCursor(r["c"].Move),this.layout={},this.setSemanticRole(t.role),this.template=t,this.style=t.style,!this.children.length){let i=t.anchor_template,s=[o["a"].DEG_90,o["a"].DEG_0];for(let t,o=0;o<12;o++)t=e.createObject(i),t.angle=s[Math.floor(o/3)%2],this.addChild(t,o,!1)}this.props.onUpdate(()=>{this.updateLayout(c.PropUpdate)}),this.updateLayout(c.Initialization)}getObjectAt(e,t){let i=super.getObjectAt(e,t);if(i)return i;let s=this.boundingBox;return s.xMin<=e&&e<=s.xMax&&s.yMin<=t&&t<=s.yMax?this:void 0}updateLayout(e,t=!0){var i;let s=Object(_["g"])(this.props.toString()),o=this.layout.contentHash!==s,r=e&c.Initialization;if(r||o){let{max_width:t,text:i,vertical_padding:o,horizontal_padding:r}=this.style,n=1,a=[],l=i.font.wordWrap(this.props.toString(),t),c=i.font.measure(l[0]),d=c.width,h=n+r,u=n+o+c.ascent;a.push({x:h,y:u,t:l[0]});for(let e=1;e<l.length;e++)c=i.font.measure(l[e]),d=Math.max(d,c.width),u+=i.line_height,a.push({x:h,y:u,t:l[e]});u+=o+n,h+=d+h;let p=Math.round(h),f=Math.round(u),g=this.boundingBox,b=Math.round(g.xMid-p/2),y=Math.round(g.yMid-f/2),m=Math.round(g.xMid+p/2),_=Math.round(g.yMid+f/2),v=(g.xMid-b)/2,x=(g.yMid-y)/2,w=[g.xMid-v,y,g.xMid,y,g.xMid+v,y,m,g.yMid-x,m,g.yMid,m,g.yMid+x,g.xMid+v,_,g.xMid,_,g.xMid-v,_,b,g.yMid+x,b,g.yMid,b,g.yMid-x];for(let e=0;e<w.length;e+=2)this.children[e/2].moveTo(w[e],w[e+1],!1);super.updateLayout(e,!1),this.layout={contentHash:s,dx:b-g.xMin,dy:y-g.yMin,width:p,height:f,text:a}}t&&(null===(i=this.parent)||void 0===i||i.updateLayout(e))}createView(e){return new b["o"](this,e)}}class k extends g{constructor(e,t,i){super(e,t,i),this.setSemanticRole(t.role),this.template=t,this.grid=t.grid,this.style=t.style,this.updateLayout(c.Initialization)}static createDummy(){return new this(o["d"].createDummy(),{id:"",type:o["g"].Page,role:o["f"].None,grid:[10,10],style:{grid_color:"#1d1d1d",background_color:"#141414",drop_shadow:{color:"rgba(0,0,0,.4)",offset:[3,3]}}})}createView(e){return new b["n"](this,e)}}},cd49:function(e,t,i){"use strict";i.r(t);var s=i("7a23");const o={class:"frame center"},r={class:"frame right"},n={class:"frame bottom"};function a(e,t,i,a,l,c){const d=Object(s["y"])("AppTitleBar"),h=Object(s["y"])("BlockDiagram"),u=Object(s["y"])("EditorSidebar"),p=Object(s["y"])("AppFooterBar"),f=Object(s["y"])("AppHotkeyBox");return Object(s["r"])(),Object(s["d"])(f,{id:"main"},{default:Object(s["E"])(()=>[Object(s["i"])(d,{id:"app-title-bar"}),Object(s["g"])("div",{id:"app-body",ref:"body",style:Object(s["q"])(e.gridLayout)},[Object(s["g"])("div",o,[Object(s["i"])(h,{id:"block-diagram"})]),Object(s["g"])("div",r,[Object(s["g"])("div",{class:"resize-handle",onPointerdown:t[0]||(t[0]=t=>e.startResize(t,e.Handle.Right))},null,32),Object(s["i"])(u,{id:"app-sidebar"})]),Object(s["g"])("div",n,[Object(s["i"])(p,{id:"app-footer-bar"})])],4)]),_:1})}var l=i("9ab4");class c{constructor(){this._errors=[],this._warnings=[]}run(e){this.reset(),this.validate(e)}validate(e){}getWarnings(){return this._warnings}getErrors(){return this._errors}addWarning(e,t){this._warnings.push({object:e.id,reason:t})}addError(e,t){this._errors.push({object:e.id,reason:t})}inValidState(){return 0===this._errors.length}reset(){this._errors=[],this._warnings=[]}}var d=i("24a6");class h extends c{validate(e){let t=d["w"].toGraph(e),i=new Map;for(let s of t.nodes)this.checkNode(s),i.set(s.id,s);for(let s of t.edges)this.checkEdge(s)}checkEdge(e){0!==e.prev.length&&0!==e.next.length||this.addWarning(e,"Edges should be connected on both ends.")}checkNode(e){for(const[t,i]of e.data.value)e.template.properties&&this.checkProperty(e,t,i)}checkProperty(e,t,i){switch(i.type){case d["u"].Int:case d["u"].Float:case d["u"].String:case d["u"].Date:case d["u"].Enum:i.descriptor.is_required&&!i.isDefined()&&this.addError(e,`Missing required field: '${t}'`);break;case d["u"].Dictionary:if(i instanceof d["k"])for(let[t,s]of i.value)this.checkProperty(e,t,s);break;case d["u"].List:if(i instanceof d["o"])for(let[s,o]of i.value)o.descriptor.is_required&&!o.isDefined()&&this.addError(e,`Empty item in list: '${t}'.`);break}}}var u=h;class p{publish(e){return""}}const f="fb9c968a-745b-4ade-9b25-c324172197f4",g="https://center-for-threat-informed-defense.github.io/attack-flow/stix/attack-flow-schema-2.0.0.json",b="2.0.0",y="2022-08-02T19:34:35.143Z",m=y,_={source_name:"Documentation",description:"Documentation for Attack Flow",url:"https://center-for-threat-informed-defense.github.io/attack-flow"},v={source_name:"GitHub",description:"Source code repository for Attack Flow",url:"https://github.com/center-for-threat-informed-defense/attack-flow"},x="MITRE Engenuity Center for Threat-Informed Defense",w=new Set(["attack-flow","attack-action","attack-asset","attack-condition","attack-operator"]),j=new Map([["action","attack-action"],["asset","attack-asset"],["condition","attack-condition"],["or","attack-operator"],["and","attack-operator"]]);class O extends p{publish(e){var t;const i=d["w"].toGraph(e),s=this.createStixBundle(),o=new Map,r=new Map,n=new Map;for(const c of i.nodes){const e=this.exportNodeObject(c);s.objects.push(e),o.set(e.id,e),r.set(e.id,new Array),n.set(c.id,e.id)}for(const c of i.edges){const e=n.get(c.prev[0]),i=n.get(c.next[0]);if(!e||!i)throw new Error("The endpoints for this edge do not exist: "+c);null===(t=r.get(e))||void 0===t||t.push(i)}for(const c of o.values()){const e=new Array,t=r.get(c.id);if(!t)throw new Error("Cannot look up children of STIX node: id="+c.id);for(const s of t)e.push(o.get(s));const i=this.handleChildren(c,e);s.objects.push(...i)}const a=this.createStixObj("identity");a.name="John Doe",a.identity_class="individual",a.contact_information="johndoe@mitre.org",s.objects.splice(2,0,a);const l=this.createStixObj("attack-flow");return l.name="Placeholder name",l.scope="other",l.description="Placeholder description.",l.created_by_ref=a.id,l.start_refs=this.findFlowRoots(o,r),s.objects.splice(2,0,l),JSON.stringify(s,null,2)}exportNodeObject(e){const t=e.template.id,i=this.createStixObj(t,e.id);return"or"===e.template.id?i.operator="OR":"and"===e.template.id&&(i.operator="AND"),this.mergeDictionaryProperty(i,e.data),i}mergeDictionaryProperty(e,t){for(let[i,s]of t.value)switch(s.type){case d["u"].Dictionary:s instanceof d["k"]&&(e[i]={},this.mergeDictionaryProperty(e[i],s));break;case d["u"].List:s instanceof d["o"]&&s.isDefined()&&(e[i]=[],this.mergeListProperty(e[i],s));break;default:s.isDefined()&&(e[i]=s.toRawValue());break}}mergeListProperty(e,t){for(let i of t.value.values())switch(i.type){case d["u"].Dictionary:i instanceof d["k"]&&(e.push({}),this.mergeDictionaryProperty(e.at(-1),i));break;case d["u"].List:i instanceof d["o"]&&i.isDefined()&&(e.push([]),this.mergeListProperty(e.at(-1),i));break;default:i.isDefined()&&e.push(i.toRawValue())}}handleChildren(e,t){const i=[];for(const s of t){let t=null;switch(e.type){case"attack-action":t=this.handleActionChild(e,s);break;case"attack-asset":t=this.handleAssetChild(e,s);break;case"attack-condition":t=this.handleConditionChild(e,s);break;case"attack-operator":t=this.handleOperatorChild(e,s);break;default:t=this.handleDefaultChild(e,s)}t&&i.push(t)}return i}handleActionChild(e,t){let i=null;switch(t.type){case"process":e.command_ref?i=this.createSro(e,t):e.command_ref=t.id;break;case"attack-asset":e.asset_refs||(e.asset_refs=[]),e.asset_refs.push(t.id);break;case"attack-action":case"attack-operator":case"attack-condition":e.effect_refs||(e.effect_refs=[]),e.effect_refs.push(t.id);break;default:i=this.createSro(e,t)}return i}handleAssetChild(e,t){let i=null;return e.object_ref?i=this.createSro(e,t):e.object_ref=t.id,i}handleConditionChild(e,t){let i=null;switch(t.type){case"attack-action":case"attack-operator":case"attack-condition":e.on_true_refs||(e.on_true_refs=[]),e.on_true_refs.push(t.id);break;default:i=this.createSro(e,t)}return i}handleOperatorChild(e,t){let i=null;switch(t.type){case"attack-action":case"attack-operator":case"attack-condition":e.effect_refs||(e.effect_refs=[]),e.effect_refs.push(t.id);break;default:i=this.createSro(e,t)}return i}handleDefaultChild(e,t){let i=this.createSro(e,t);return i}createStixBundle(){const e=this.createStixObj("bundle"),t=this.createExtensionAuthorSdo(),i=this.createExtensionSdo(t.id);return e.objects=[i,t],e}createExtensionSdo(e){const t=this.createStixObj("extension-definition",f);return t.name="Attack Flow",t.description="Extends STIX 2.1 with features to create Attack Flows.",t.created=y,t.modified=m,t.created_by_ref=e,t.schema=g,t.version=b,t.extension_types=["new-sdo"],t.external_references=[_,v],t}createExtensionAuthorSdo(){const e=this.createStixObj("identity",f);return e.create_by_ref=e.id,e.name=x,e.identity_class="organization",e.created=y,e.modified=m,e}createStixObj(e,t=null){var i;let s=null!==(i=j.get(e))&&void 0!==i?i:e,o=null!==t&&void 0!==t?t:crypto.randomUUID(),r=(new Date).toISOString(),n={type:s,id:`${s}--${o}`,spec_version:"2.1",created:r,modified:r};if(w.has(s)){let e={};e["extension-definition--"+f]={extension_type:"new-sdo"},n.extensions=e}return n}createSro(e,t,i="related-to"){const s=crypto.randomUUID(),o=(new Date).toISOString();return{type:"relationship",id:"relationship--"+s,spec_version:"2.1",created:o,modified:o,relationship_type:i,source_ref:e.id,target_ref:t.id}}findFlowRoots(e,t){const i=new Set;for(const s of e.values())"attack-action"!=s.type&&"attack-condition"!=s.type||i.add(s.id);for(const s of t.values())for(const e of s)i.delete(e);return new Array(...i)}}var M=O,k=i("c40c");const S={is_web_hosted:!1,file_type_name:"Attack Flow",file_type_extension:"afb",schema:{page_template:"attack_flow_page",templates:[{id:"attack_flow_page",type:d["z"].Page,role:d["x"].None,grid:[10,10],properties:{name:{type:d["u"].String,value:"Untitled Document",is_primary:!0},description:{type:d["u"].String},scope:{type:d["u"].Enum,options:{type:d["u"].List,form:{type:d["u"].String},value:[["incident","Incident"],["campaign","Campaign"],["threat-actor","Threat Actor"],["malware","Malware"],["other","Other"]]},value:"incident"},author:{type:d["u"].Dictionary,form:{name:{type:d["u"].String,is_primary:!0},identity_class:{type:d["u"].Enum,options:{type:d["u"].List,form:{type:d["u"].String},value:[["individual","Individual"],["group","Group"],["system","System"],["organization","Organization"],["class","Class"],["unknown","Unknown"]]}},contact_information:{type:d["u"].String}}}},style:k["b"].Page()},{id:"true_anchor",type:d["z"].AnchorPoint,role:d["x"].None,radius:10,line_templates:{[d["b"].DEG_0]:"@__builtin__line_horizontal_elbow",[d["b"].DEG_90]:"@__builtin__line_vertical_elbow"},style:k["b"].AnchorPoint()},{id:"false_anchor",type:d["z"].AnchorPoint,role:d["x"].None,radius:10,line_templates:{[d["b"].DEG_0]:"@__builtin__line_horizontal_elbow",[d["b"].DEG_90]:"@__builtin__line_vertical_elbow"},style:k["b"].AnchorPoint()},{id:"action",namespace:"attack_flow.action",type:d["z"].DictionaryBlock,role:d["x"].Node,properties:{name:{type:d["u"].String,is_primary:!0,is_required:!0},tactic_id:{type:d["u"].String},tactic_ref:{type:d["u"].String},technique_id:{type:d["u"].String},technique_ref:{type:d["u"].String},execution_start:{type:d["u"].Date},execution_end:{type:d["u"].Date},description:{type:d["u"].String},confidence:{type:d["u"].Enum,options:{type:d["u"].List,form:{type:d["u"].Dictionary,form:{text:{type:d["u"].String,is_primary:!0},value:{type:d["u"].Int}}},value:[["speculative",{text:"Speculative",value:0}],["very-doubtful",{text:"Very Doubtful",value:10}],["doubtful",{text:"Doubtful",value:30}],["even-odds",{text:"Even Odds",value:50}],["probable",{text:"Probable",value:70}],["very-probable",{text:"Very Probable",value:90}],["certain",{text:"Certain",value:100}]]},value:"probable"}},anchor_template:"@__builtin__anchor",style:k["b"].DictionaryBlock({head:Object.assign({},k["a"].Blue)})},{id:"asset",namespace:"attack_flow.asset",type:d["z"].DictionaryBlock,role:d["x"].Node,properties:{name:{type:d["u"].String,is_primary:!0,is_required:!0},description:{type:d["u"].String}},anchor_template:"@__builtin__anchor",style:k["b"].DictionaryBlock({head:Object.assign({},k["a"].Orange)})},{id:"condition",namespace:"attack_flow.condition",type:d["z"].BranchBlock,role:d["x"].Node,properties:{description:{type:d["u"].String,is_primary:!0,is_required:!0},pattern:{type:d["u"].String},pattern_type:{type:d["u"].String},pattern_version:{type:d["u"].String}},branches:[{text:"True",anchor_template:"true_anchor"},{text:"False",anchor_template:"false_anchor"}],anchor_template:"@__builtin__anchor",style:k["b"].BranchBlock({head:Object.assign({},k["a"].Green)})},{id:"or",namespace:"attack_flow.or",type:d["z"].TextBlock,role:d["x"].Node,properties:{text:{type:d["u"].String,value:"OR",is_primary:!0,is_visible:!1,is_editable:!1}},anchor_template:"@__builtin__anchor",style:k["b"].TextBlock(Object.assign(Object.assign({},k["a"].Red),{horizontal_padding:35}))},{id:"and",namespace:"attack_flow.and",type:d["z"].TextBlock,role:d["x"].Node,properties:{text:{type:d["u"].String,value:"AND",is_primary:!0,is_visible:!1,is_editable:!1}},anchor_template:"@__builtin__anchor",style:k["b"].TextBlock(Object.assign(Object.assign({},k["a"].Red),{horizontal_padding:35}))}]},menus:{help_menu:{help_links:[{text:"Attack Flow Website",url:"https://center-for-threat-informed-defense.github.io/attack-flow/"},{text:"Attack Flow Builder Help",url:"https://center-for-threat-informed-defense.github.io/attack-flow/builder/"},{text:"GitHub Repository",url:"https://github.com/center-for-threat-informed-defense/attack-flow"},{text:"MITRE ATT&CK Framework",url:"https://attack.mitre.org/"}]}},validator:u,publisher:M};var C=S,B=i("a2be"),P=i("5502");class T{constructor(e){this._context=e}}class E extends T{constructor(e,t){super(e);let i=t.children.filter(e=>e.isSelected()),s=e.settings.edit.clone_offset,o=t.factory.cloneObjects(...i);for(let r of o)r.moveBy(s[0],s[1]);this._objects=o}execute(){this._context.clipboard=this._objects}}class A{static downloadTextFile(e,t,i="txt"){let s=new Blob([t],{type:"octet/stream"}),o=window.URL.createObjectURL(s);this._aLink.href=o,this._aLink.download=`${e}.${i}`,this._aLink.click(),window.URL.revokeObjectURL(o)}static downloadImageFile(e,t){t.toBlob(t=>{if(!t)return;let i=window.URL.createObjectURL(t);this._aLink.href=i,this._aLink.download=e+".png",this._aLink.click(),window.URL.revokeObjectURL(i)},"image/octet-stream")}static openTextFileDialog(){let e=document.createElement("input");e.type="file";let t=new Promise(t=>{e.addEventListener("change",e=>{let i=e.target.files[0],s=new FileReader;s.onload=e=>{var s;t({filename:i.name,contents:null===(s=e.target)||void 0===s?void 0:s.result})},s.readAsText(i)})});return e.click(),t}static fullscreen(e=document.body){let t=e;t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()}}A._aLink=document.createElement("a");var D=i("9224");class H{constructor(e,t){this.id=e.id,this.page=e,this.trigger=Object(s["v"])(0),this.view={x:0,y:0,k:1,w:0,h:0},this.location=Object(s["v"])(null!==t&&void 0!==t?t:{x:0,y:0,k:1}),this._undoStack=[],this._redoStack=[],C.validator&&(this._validator=new C.validator,this._validator.run(e))}static createDummy(){return Object(s["o"])(new this(d["r"].createDummy()))}execute(e){var t;if(e.page!==this.page.id)throw new Error("Command is not configured to operate on this page.");e.execute()&&(this._redoStack=[],this._undoStack.push(e)),null===(t=this._validator)||void 0===t||t.run(this.page),this.trigger.value++}undo(){this._undoStack.length&&(this._undoStack.at(-1).undo(),this._redoStack.push(this._undoStack.pop()))}canUndo(){return 0<this._undoStack.length}redo(){this._redoStack.length&&(this._redoStack.at(-1).execute(),this._undoStack.push(this._redoStack.pop()))}canRedo(){return 0<this._redoStack.length}isValid(){var e,t;return null===(t=null===(e=this._validator)||void 0===e?void 0:e.inValidState())||void 0===t||t}getValidationErrors(){var e,t;return null!==(t=null===(e=this._validator)||void 0===e?void 0:e.getErrors())&&void 0!==t?t:[]}getValidationWarnings(){var e,t;return null!==(t=null===(e=this._validator)||void 0===e?void 0:e.getWarnings())&&void 0!==t?t:[]}static createNew(e){return Object(l["a"])(this,void 0,void 0,(function*(){let t=yield d["i"].create(e),i=t.createObject(e.page_template);return Object(s["o"])(new H(i))}))}static fromFile(e){return Object(l["a"])(this,void 0,void 0,(function*(){let t=JSON.parse(e),i=yield d["i"].create(t.schema),o=new Map;for(let e of t.objects)o.set(e.id,e);let r=o.get(t.id),n=function e(t,i,s,r){if(!s.has(t.id)){let n=[];for(let l of t.children)n.push(e(o.get(l),i,s,r));let a=r.createObject(Object.assign(Object.assign({},t),{children:n}));s.set(a.id,a)}return s.get(t.id)}(r,o,new Map,i);return n.recalculateLayout(),Object(s["o"])(new H(n,t.location))}))}toFile(){let e=this.view,t={x:(e.w/2-e.x)/e.k,y:(e.h/2-e.y)/e.k,k:e.k},i={version:D.version,id:this.page.id,schema:this.page.factory.getSchema(),objects:[...this.page.getSubtree()].map(e=>e.toExport()),location:t};return JSON.stringify(i)}}class I extends T{constructor(e,t){super(e),this._editor=t}static fromNew(e){return Object(l["a"])(this,void 0,void 0,(function*(){let t=structuredClone(C.schema),i=yield H.createNew(t);return new I(e,i)}))}static fromFile(e,t){return Object(l["a"])(this,void 0,void 0,(function*(){let i=yield H.fromFile(t);return new I(e,i)}))}static fromFileSystem(e){return Object(l["a"])(this,void 0,void 0,(function*(){let t=(yield A.openTextFileDialog()).contents,i=yield H.fromFile(t);return new I(e,i)}))}execute(){this._context.pages.clear(),this._context.pages.set(this._editor.id,this._editor),this._context.activePage=this._editor}}class F extends T{constructor(e,t){super(e),this._settings=t}execute(){this._context.settings=this._settings}}class L extends T{constructor(e,t){super(e),this._url=t}execute(){window.open(this._url,"_blank")}}class V extends T{constructor(e,t){super(e);let i=e.pages.get(t);if(!i)throw new Error(`Page '${t}' not found.`);if(!i.isValid())throw new Error(`Page '${t}' is not valid.`);if(!this._context.publisher)throw new Error("App is not configured with a publisher.");this._editor=i}execute(){A.downloadTextFile(this._editor.page.props.toString(),this._context.publisher.publish(this._editor.page),"json")}}var R=i("28e0");class z extends T{constructor(e,t){super(e);let i=e.pages.get(t);if(!i)throw new Error(`Page '${t}' not found.`);this._editor=i}execute(){let e=this._context.settings.view.diagram,t=this._context.settings.file.image_export,i=new R["a"](this._editor.page,t.padding,e.display_grid,e.display_shadows,e.display_debug_mode);A.downloadImageFile(this._editor.page.props.toString(),i.capture())}}class N extends T{constructor(e,t){super(e);let i=e.pages.get(t);if(!i)throw new Error(`Page '${t}' not found.`);this._editor=i}execute(){A.downloadTextFile(this._editor.page.props.toString(),this._editor.toFile(),C.file_type_extension)}}class $ extends T{constructor(e,t){super(e);let i=e.pages.get(t);if(!i)throw new Error(`Page '${t}' not found.`);this._editor=i,this._objects=[...i.page.getSubtree(e=>e.isSelected())]}execute(){let e=this._context.settings.view.diagram,t=this._context.settings.file.image_export,i=new R["a"](this._editor.page,t.padding,e.display_grid,e.display_shadows,e.display_debug_mode);A.downloadImageFile(this._editor.page.props.toString(),i.capture(this._objects))}}class U extends T{constructor(e,t,i){super(e);let s=e.pages.get(t);if(!s)throw new Error(`Page '${t}' not found.`);this._editor=s,this._params=i}execute(){this._editor.view=this._params}}class W extends T{constructor(e,t){super(e),this._highQuality=t}execute(){let{diagram:e}=this._context.settings.view;e.render_high_quality=this._highQuality}}class G extends T{constructor(e){super(e)}execute(){let e=document.body;e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}}class q extends T{constructor(e){super(e)}execute(){let{diagram:e}=this._context.settings.view;e.display_debug_mode=!e.display_debug_mode}}class Y extends T{constructor(e){super(e)}execute(){let{diagram:e}=this._context.settings.view;e.display_grid=!e.display_grid}}class K extends T{constructor(e){super(e)}execute(){let{diagram:e}=this._context.settings.view;e.display_shadows=!e.display_shadows}}const X=e=>(Object(s["t"])("data-v-dc3b1a94"),e=e(),Object(s["s"])(),e),J=X(()=>Object(s["g"])("span",{class:"logo"},"AFB",-1));function Z(e,t,i,o,r,n){const a=Object(s["y"])("TitleBar");return Object(s["r"])(),Object(s["d"])(a,{class:"app-title-bar-element",menus:e.menus,onSelect:e.onItemSelect},{icon:Object(s["E"])(()=>[J]),_:1},8,["menus","onSelect"])}const Q={class:"icon"},ee=["onMouseenter","onClick"];function te(e,t,i,o,r,n){const a=Object(s["y"])("ContextMenuListing"),l=Object(s["y"])("FocusBox");return Object(s["r"])(),Object(s["d"])(l,{class:"title-bar-control",onUnfocus:e.menuClose},{default:Object(s["E"])(()=>[Object(s["g"])("li",Q,[Object(s["x"])(e.$slots,"icon",{},void 0,!0)]),(Object(s["r"])(!0),Object(s["f"])(s["a"],null,Object(s["w"])(e.menus,i=>(Object(s["r"])(),Object(s["f"])("li",{key:i.text,class:Object(s["p"])({focused:i.text===e.focusedMenu}),onMouseenter:t=>e.menuEnter(i.text),onClick:t=>e.menuOpen(i.text)},[Object(s["g"])("p",null,Object(s["A"])(i.text),1),i.text===e.focusedMenu?(Object(s["r"])(),Object(s["d"])(a,{key:0,class:"menu-listing",sections:i.sections,onSelect:e.menuSelect,onClick:t[0]||(t[0]=Object(s["G"])(()=>{},["stop"]))},null,8,["sections","onSelect"])):Object(s["e"])("",!0)],42,ee))),128))]),_:3},8,["onUnfocus"])}var ie=i("e0ac");const se=e=>(Object(s["t"])("data-v-03d00514"),e=e(),Object(s["s"])(),e),oe=["onMouseenter"],re={class:"item"},ne={class:"text"},ae=se(()=>Object(s["g"])("span",{class:"more-arrow"},null,-1)),le={key:0,class:"submenu"},ce=["onClick"],de=["href"],he={class:"check"},ue={class:"text"},pe={key:0,class:"shortcut"},fe={key:0,class:"section-divider"};function ge(e,t,i,o,r,n){const a=Object(s["y"])("ContextMenuListing",!0);return Object(s["r"])(),Object(s["f"])("div",{class:"context-menu-listing-control",style:Object(s["q"])(e.offset),onContextmenu:t[1]||(t[1]=Object(s["G"])(()=>{},["prevent"]))},[(Object(s["r"])(!0),Object(s["f"])(s["a"],null,Object(s["w"])(e.sections,(i,o)=>(Object(s["r"])(),Object(s["f"])("div",{class:"section",key:i.id},[(Object(s["r"])(!0),Object(s["f"])(s["a"],null,Object(s["w"])(i.items,i=>(Object(s["r"])(),Object(s["f"])(s["a"],{key:i.text},[i.type===e.MenuType.Submenu?(Object(s["r"])(),Object(s["f"])("li",{key:0,class:Object(s["p"])({disabled:i.disabled}),onMouseenter:t=>e.submenuEnter(i),onMouseleave:t[0]||(t[0]=(...t)=>e.submenuLeave&&e.submenuLeave(...t))},[Object(s["g"])("a",re,[Object(s["g"])("span",ne,Object(s["A"])(i.text),1),ae]),i.text===e.focusedSubMenu?(Object(s["r"])(),Object(s["f"])("div",le,[Object(s["i"])(a,{sections:i.sections,onSelect:e.onChildItemSelect},null,8,["sections","onSelect"])])):Object(s["e"])("",!0)],42,oe)):(Object(s["r"])(),Object(s["f"])("li",{key:1,class:Object(s["p"])({disabled:i.disabled}),onClick:t=>e.onItemClick(i)},[Object(s["g"])("a",{class:"item",href:i.disabled?null:i.link,target:"_blank"},[Object(s["F"])(Object(s["g"])("span",he,"✓",512),[[s["C"],i.value]]),Object(s["g"])("span",ue,Object(s["A"])(i.text),1),i.shortcut?(Object(s["r"])(),Object(s["f"])("span",pe,Object(s["A"])(e.formatShortcut(i.shortcut)),1)):Object(s["e"])("",!0)],8,de)],10,ce))],64))),128)),o<e.sections.length-1?(Object(s["r"])(),Object(s["f"])("a",fe)):Object(s["e"])("",!0)]))),128))],36)}var be;(function(e){e[e["Item"]=0]="Item",e[e["Toggle"]=1]="Toggle",e[e["Submenu"]=2]="Submenu"})(be||(be={}));const ye={Control:"Ctrl",Escape:"Esc",ArrowLeft:"←",ArrowUp:"↑",ArrowRight:"→",ArrowDown:"↓",Delete:"Del"};var me=Object(s["k"])({name:"ContextMenuListing",props:{sections:{type:Array,required:!0},forceInsideWindow:{type:Boolean,default:!0}},data(){return{xOffset:0,yOffset:0,leaveTimeout:500,leaveTimeoutId:0,focusedSubMenu:null,MenuType:be}},computed:{offset(){return{marginTop:this.yOffset+"px",marginLeft:this.xOffset+"px"}}},methods:{submenuEnter(e){clearTimeout(this.leaveTimeoutId),e.disabled||(this.focusedSubMenu=e.text)},submenuLeave(){this.leaveTimeoutId=setTimeout(()=>{this.focusedSubMenu=null},this.leaveTimeout)},onItemClick(e){e.disabled||this.$emit("select",e.data,!e.keepMenuOpenOnSelect)},onChildItemSelect(e,t){this.$emit("select",e,t),t&&(this.focusedSubMenu=null)},formatShortcut(e){return e?e.split("+").map(e=>e in ye?ye[e]:e).join("+"):e}},emits:["select"],mounted(){if(!this.forceInsideWindow)return;let e=window.innerWidth,t=window.innerHeight,{top:i,left:s,bottom:o,right:r}=this.$el.getBoundingClientRect();this.xOffset=r>e?-Math.min(s,r-e):0,this.yOffset=o>t?-Math.min(i,o-t):0}}),_e=(i("44e9"),i("6b0d")),ve=i.n(_e);const xe=ve()(me,[["render",ge],["__scopeId","data-v-03d00514"]]);var we=xe,je=Object(s["k"])({name:"TitleBar",props:{menus:{type:Array,default:[]}},data(){return{focusedMenu:null}},emits:["select"],methods:{menuOpen(e){this.focusedMenu=e},menuEnter(e){null!==this.focusedMenu&&(this.focusedMenu=e)},menuClose(){this.focusedMenu=null},menuSelect(e,t){this.$emit("select",e),t&&(this.focusedMenu=null)}},components:{FocusBox:ie["a"],ContextMenuListing:we}});i("2c3e");const Oe=ve()(je,[["render",te],["__scopeId","data-v-63eba18e"]]);var Me=Oe,ke=Object(s["k"])({name:"AppTitleBar",computed:Object.assign(Object.assign({},Object(P["b"])("ContextMenuStore",["fileMenu","editMenu","layoutMenu","viewMenu","helpMenu"])),{menus(){return[this.fileMenu,this.editMenu,this.layoutMenu,this.viewMenu,this.helpMenu]}}),methods:Object.assign(Object.assign({},Object(P["c"])("ApplicationStore",["execute"])),{onItemSelect(e){return Object(l["a"])(this,void 0,void 0,(function*(){try{let t=e();t instanceof Promise?this.execute(yield t):this.execute(t)}catch(t){console.error(t)}}))}}),components:{TitleBar:Me}});i("7343");const Se=ve()(ke,[["render",Z],["__scopeId","data-v-dc3b1a94"]]);var Ce=Se;function Be(e,t,i,o,r,n){const a=Object(s["y"])("HotkeyBox");return Object(s["r"])(),Object(s["d"])(a,{class:"app-hotkey-box-element",hotkeys:e.hotkeys,global:!0,onFire:e.onHotkeyFired},{default:Object(s["E"])(()=>[Object(s["x"])(e.$slots,"default")]),_:3},8,["hotkeys","onFire"])}const Pe={class:"hotkey-box-container",tabindex:"0"};function Te(e,t,i,o,r,n){return Object(s["r"])(),Object(s["f"])("div",Pe,[Object(s["x"])(e.$slots,"default",{},void 0,!0)])}class Ee{constructor(e,t){this._boundAdvanceKeyState=this.advanceKeyState.bind(this),this._boundReverseKeyState=this.reverseKeyState.bind(this),this._callback=e,this._callLoop=void 0,this._container=null,this._hotkeyIdMap=new Map,this._keyState=".",this._recognitionDelay=t}observe(e){this._container=e,this._container.addEventListener("keydown",this._boundAdvanceKeyState),this._container.addEventListener("keyup",this._boundReverseKeyState)}disconnect(){var e,t;null===(e=this._container)||void 0===e||e.removeEventListener("keydown",this._boundAdvanceKeyState),null===(t=this._container)||void 0===t||t.removeEventListener("keyup",this._boundReverseKeyState)}setHotkeys(e){this._hotkeyIdMap=new Map;for(let t of e){if(""===t.shortcut)continue;let e=this.keySequenceToHotKeyId(t.shortcut);for(let t of this._hotkeyIdMap.keys())if(t.startsWith(e)||e.startsWith(t))throw new Ae(`Overlapping key sequences ('${t}' and '${e}') are not allowed.`);this._hotkeyIdMap.set(e,t)}}isHotkeyActive(e,t=!0){let i=this.keySequenceToHotKeyId(e);return t?this._keyState===i:this._keyState.includes(i)}advanceKeyState(e){let t=e.key.toLocaleLowerCase();if(!this._keyState.endsWith(`.${t}.`)&&(clearTimeout(this._callLoop),this._keyState+=t+".","INPUT"!==e.target.tagName))if(this._hotkeyIdMap.has(this._keyState)){let t=this._hotkeyIdMap.get(this._keyState);t.allowBrowserBehavior||e.preventDefault(),this.triggerHotkey(t)}else e.preventDefault()}reverseKeyState(e){clearTimeout(this._callLoop);let t=e.key.toLocaleLowerCase();this._keyState=this._keyState.replace(`.${t}.`,".")}triggerHotkey(e){e.data&&!e.disabled&&(this._callLoop=setTimeout(()=>{if(this._callback(e.data),!e.repeat)return;let t=function(){this._callback(e.data),this._callLoop=setTimeout(t,e.repeat.interval)}.bind(this);this._callLoop=setTimeout(t,e.repeat.delay)},this._recognitionDelay))}keySequenceToHotKeyId(e){let t=e.toLocaleLowerCase().replace(/\s+/g,"").split("+").join(".");return`.${t}.`}}class Ae extends Error{constructor(e){super(e)}}var De=Object(s["k"])({name:"HotkeyBox",provide(){return{isHotkeyActive:(e,t=!0)=>this.observer.isHotkeyActive(e,t)}},props:{hotkeys:{type:Array,default:[]},global:{type:Boolean,default:!1}},data(){return{observer:Object(s["o"])(new Ee((e,t)=>this.$emit("fire",e,t),0))}},emits:["fire"],watch:{hotkeys(){this.observer.setHotkeys(this.hotkeys)}},mounted(){this.observer.observe(this.global?document.body:this.$el),this.observer.setHotkeys(this.hotkeys)},unmounted(){this.observer.disconnect()}});i("cb32");const He=ve()(De,[["render",Te],["__scopeId","data-v-5e99f3da"]]);var Ie=He,Fe=Object(s["k"])({name:"AppHotkeyBox",computed:Object.assign(Object.assign({},Object(P["b"])("HotkeyStore",["nativeHotkeys","fileHotkeys","editHotKeys","layoutHotkeys","viewHotkeys"])),{hotkeys(){return[...this.nativeHotkeys,...this.fileHotkeys,...this.editHotKeys,...this.layoutHotkeys,...this.viewHotkeys]}}),methods:Object.assign(Object.assign({},Object(P["c"])("ApplicationStore",["execute"])),{onHotkeyFired(e){return Object(l["a"])(this,void 0,void 0,(function*(){try{let t=e();if(t instanceof Promise){let e=yield t;this.execute(e)}else this.execute(t)}catch(t){console.error(t)}}))}}),components:{HotkeyBox:Ie}});const Le=ve()(Fe,[["render",Be]]);var Ve,Re=Le;function ze(e,t,i,o,r,n){const a=Object(s["y"])("ContextMenu");return Object(s["r"])(),Object(s["f"])("div",{class:"block-diagram-element",style:Object(s["q"])(e.cursorStyle)},[e.menu.show?(Object(s["r"])(),Object(s["d"])(a,{key:0,class:"block-diagram-menu",style:Object(s["q"])(e.menuStyle),sections:e.menuOptions,onSelect:e.onItemSelect,onUnfocus:e.closeContextMenu},null,8,["style","sections","onSelect","onUnfocus"])):Object(s["e"])("",!0)],4)}class Ne{constructor(e){this.page=e}}Ne.NullPage="$__null_page";class $e extends Ne{constructor(e,t,i,s){super(t.root.id),this._object=e,this._parent=t,this._source=i,this._target=s}execute(){this._parent.addChild(this._object);let{xMid:e,yMid:t}=this._source.boundingBox;if(this._object.srcEnding.moveTo(e,t),this._source.addChild(this._object.srcEnding),this._target){let{xMid:e,yMid:t}=this._target.boundingBox;this._object.trgEnding.moveTo(e,t),this._target.addChild(this._object.trgEnding)}return!0}undo(){this._object.setHover(d["m"].Off),this._object.setSelect(d["v"].False),this._source.removeChild(this._object.srcEnding),this._target&&this._target.removeChild(this._object.trgEnding),this._parent.removeChild(this._object)}}class Ue extends Ne{constructor(e,t){super(t.root.id),this._object=e,this._parent=t}execute(){return this._parent.addChild(this._object),!0}undo(){this._object.setHover(d["m"].Off),this._object.setSelect(d["v"].False),this._parent.removeChild(this._object,!0,!1)}}class We extends Ne{constructor(e,t){if(e.root.id!==t.root.id)throw new d["j"]("Objects must originate from the same root.");super(e.root.id),this._object=t,this._anchor=e}execute(){return this._anchor.addChild(this._object),!0}undo(){this._anchor.removeChild(this._object)}}class Ge extends Ne{constructor(e){let t=e.root;if(!t)throw new Error("Property does not have a root.");super(t.object.root.id),this._id=null,this._property=e,this._subproperty=d["t"].create(e,e.descriptor.form)}execute(){return this._id=this._property.addProperty(this._subproperty),!0}undo(){this._id&&this._property.removeProperty(this._id)}}class qe extends Ne{constructor(){super(Ne.NullPage),this._commands=[]}add(e){if(this.page!==Ne.NullPage&&this.page!==e.page)throw new d["j"]("Commands must operate on the same page.");this.page=e.page,this._commands.push(e)}execute(){let e=0,t=this._commands.length,i=!1;try{for(;e<t;e++){let t=this._commands[e].execute();i||(i=t)}}catch(s){for(e--;0<=e;e--)this._commands[e].undo();throw s}return i}undo(){let e=this._commands.length-1;for(let t=e;0<=t;t--)this._commands[t].undo()}}class Ye extends Ne{constructor(e){let t=e[0].root.id;for(let s=1;s<e.length;s++)if(t!==e[s].root.id)throw new d["j"]("Objects must originate from the same root.");super(t),this._links=[],this._items=[];for(let s of e){if(!s.parent)throw new d["j"]("Object must have a parent.",s);this._items.push({index:s.getIndexInParent(),parent:s.parent,object:s})}let i=new Map;for(let s of this._items)for(let e of s.object.getSubtree())(e instanceof d["g"]||e instanceof d["h"])&&i.set(e.id,e);for(let s of i.values())if(s instanceof d["h"])s.isAttached()&&!i.has(s.anchor.id)&&this._links.push({index:s.getIndexInAnchor(),anchor:s.anchor,object:s});else if(s instanceof d["g"])for(let e of s.children)i.has(e.id)||this._links.push({index:e.getIndexInAnchor(),anchor:s,object:e})}execute(){for(let e of this._links)e.anchor.removeChild(e.object);for(let e of this._items)e.parent.removeChild(e.object,!0,!1);return!0}undo(){for(let e of this._items)e.parent.addChild(e.object,e.index);for(let e of this._links)e.anchor.addChild(e.object,e.index)}}class Ke extends Ne{constructor(e){super(e.root.id),this._object=e}execute(){let e=this._object;while(e)e.setHover(d["m"].Off),e=e.parent;return!1}undo(){}}class Xe extends Ne{constructor(e){super(e.root.id),this._object=e}execute(){return this._object.setSelect(d["v"].False),!1}undo(){}}class Je extends qe{constructor(e){super();let t=e.children.filter(e=>e.isSelected());for(let i of t)i.isHovered()&&this.add(new Ke(i)),this.add(new Xe(i));this.add(new Ye(t))}}class Ze extends qe{constructor(e,t){super(),this._context=e;let i=t.children.filter(e=>e.isSelected());this._objects=t.factory.cloneObjects(...i),this.add(new Je(t))}execute(){return this._context.clipboard=this._objects,super.execute()}}class Qe extends Ne{constructor(e,t){let i=e.root;if(!i)throw new Error("Property does not have a root.");let s=e.value.get(t);if(!s)throw new Error(`Subproperty '${t}' does not exist.`);super(i.object.root.id),this._id=t,this._index=e.indexOf(t),this._property=e,this._subproperty=s}execute(){return this._property.removeProperty(this._id),!0}undo(){this._property.addProperty(this._subproperty,this._id,this._index)}}class et extends Ne{constructor(e){if(!e.isAttached())throw new d["j"]("Object must be attached to an anchor.",e);super(e.root.id),this._object=e,this._anchor=e.anchor,this._index=e.getIndexInAnchor()}execute(){return this._anchor.removeChild(this._object),!0}undo(){this._anchor.addChild(this._object,this._index)}}class tt extends qe{constructor(e,t){super();let i=t.children.filter(e=>e.isSelected());for(let r of i)this.add(new Xe(r));let s=e.settings.edit.clone_offset,o=t.factory.cloneObjects(...i);for(let r of o)r.moveBy(s[0],s[1]),r.setSelect(d["v"].True),this.add(new Ue(r,t))}}class it extends Ne{constructor(e){super(e.root.id),this._object=e}execute(){this._object.setHover(d["m"].Direct);let e=this._object.parent;while(e)e.setHover(d["m"].Indirect),e=e.parent;return!1}undo(){}}class st extends Ne{constructor(e){super(e.root.id),this._object=e}execute(){return this._object.setSelect(d["v"].True),!1}undo(){}}class ot extends qe{constructor(e){super();for(let t of e.getSubtree(e=>e.isSelected()))this.add(new Xe(t))}}class rt extends Ne{constructor(e,t){let i=t[0].root;for(let y=1;y<t.length;y++)if(i.id!==t[y].root.id)throw new d["j"]("Objects must originate from the same root.");let s=e.pages.get(i.id);if(!s)throw new Error("Objects must be managed by an editor.");super(i.id),this._editor=s;let o=1/0,r=1/0,n=-1/0,a=-1/0;for(let d of t)o=Math.min(o,d.boundingBox.xMin),r=Math.min(r,d.boundingBox.yMin),n=Math.max(n,d.boundingBox.xMax),a=Math.max(a,d.boundingBox.yMax);let l=n-o,c=a-r,h=Math.round((o+n)/2),u=Math.round((r+a)/2),p=l/s.view.w,f=c/s.view.h,g=Math.max(p,f),b=Math.min(.9/g,1.5);this._location={x:h,y:u,k:b}}execute(){return this._editor.location.value=this._location,!1}undo(){}}class nt extends qe{constructor(e,t){super();let i=t.children.filter(e=>e.isSelected());if(!i.length)return;let s=[];for(let o of i){let e=d["w"].getNextGraphLinks(o);if(o.hasRole(d["x"].Node))for(let t of e){let e=d["w"].getNextGraphLinks(t);e.length?s=s.concat(e):s.push(t)}else s=s.concat(e)}this.add(new ot(t));for(let o of s)this.add(new st(o));s.length&&this.add(new rt(e,s))}}class at extends qe{constructor(e,t){super();let i=t.children.filter(e=>e.isSelected());if(!i.length)return;let s=[];for(let o of i){let e=d["w"].getPrevGraphLinks(o);if(o.hasRole(d["x"].Node))for(let t of e){let e=d["w"].getPrevGraphLinks(t);e.length?s=s.concat(e):s.push(t)}else s=s.concat(e)}this.add(new ot(t));for(let o of s)this.add(new st(o));s.length&&this.add(new rt(e,s))}}class lt extends qe{constructor(e,t){super();let i=t.children.filter(e=>e.isSelected());i.length&&this.add(new rt(e,i))}}class ct extends Ne{constructor(e,t,i){super(e.root.id),this._object=e,this._dx=t,this._dy=i}execute(){return this._object.moveBy(this._dx,this._dy),!0}undo(){this._object.moveBy(-this._dx,-this._dy)}}class dt extends Ne{constructor(e,t,i){super(e.root.id),this._object=e,this._lx=e.boundingBox.xMid,this._ly=e.boundingBox.yMid,this._nx=t,this._ny=i}execute(){return this._object.moveTo(this._nx,this._ny),!0}undo(){this._object.moveTo(this._lx,this._ly)}}class ht extends qe{constructor(e,t){super(),this._context=e,this.add(new ot(t));let i=t.factory.cloneObjects(...e.clipboard);for(let s of i)s.setSelect(d["v"].True),this.add(new Ue(s,t))}execute(){let e=this._context.settings.edit.clone_offset;for(let t of this._context.clipboard)t.moveBy(e[0],e[1]);return super.execute()}}class ut extends Ne{constructor(e,t){super(t);let i=e.pages.get(t);if(!i)throw new Error(`'${t}' is not a page.`);this._editor=i}execute(){return this._editor.redo(),!1}undo(){}}class pt extends Ne{constructor(e,t){if(!e.parent)throw new d["j"]("Object must have a parent.",e);switch(super(e.root.id),this._object=e,this._parent=e.parent,this._prevIndex=e.getIndexInParent(),t){case Ve.Top:this._nextIndex=e.children.length;break;case Ve.OneAbove:this._nextIndex=this._prevIndex+1;break;case Ve.OneBelow:this._nextIndex=this._prevIndex-1;break;case Ve.Bottom:this._nextIndex=0;break}}execute(){return this._parent.reorderChild(this._object.id,this._nextIndex),!0}undo(){this._parent.reorderChild(this._object.id,this._prevIndex)}}(function(e){e[e["Top"]=0]="Top",e[e["OneAbove"]=2]="OneAbove",e[e["OneBelow"]=3]="OneBelow",e[e["Bottom"]=4]="Bottom"})(Ve||(Ve={}));class ft extends qe{constructor(e,t){super();let i=e.children.filter(e=>e.isSelected());switch(t){case Ve.Top:case Ve.OneAbove:for(let e=i.length-1;0<=e;e--)this.add(new pt(i[e],t));break;case Ve.Bottom:case Ve.OneBelow:for(let e=0;e<i.length;e++)this.add(new pt(i[e],t));break}}}class gt extends Ne{constructor(e,t){super(t.id);let i=e.pages.get(t.id);if(!i)throw new Error(`Page '${t.id}' does not have an editor.`);this._editor=i}execute(){return this._editor.location.value={x:0,y:0,k:1},!1}undo(){}}class bt extends qe{constructor(e){super();for(let t of e.children)this.add(new st(t))}}class yt extends Ne{constructor(e,t){let i=e.toRawValue(),s=e.root;if(!s)throw new Error("Property does not have a root.");super(s.object.root.id),this._property=e,this._lastValue=null!==i?new Date(i):i,this._nextValue=t}execute(){return this._property.setValue(this._nextValue),!0}undo(){this._property.setValue(this._lastValue)}}class mt extends Ne{constructor(e,t){let i=e.root;if(!i)throw new Error("Property does not have a root.");super(i.object.root.id),this._property=e,this._lastValue=e.toRawValue(),this._nextValue=t}execute(){return this._property.setValue(this._nextValue),!0}undo(){this._property.setValue(this._lastValue)}}class _t extends Ne{constructor(e,t){let i=e.root;if(!i)throw new Error("Property does not have a root.");super(i.object.root.id),this._property=e,this._lastValue=e.toRawValue(),this._nextValue=t}execute(){return this._property.setValue(this._nextValue),!0}undo(){this._property.setValue(this._lastValue)}}class vt extends Ne{constructor(e,t){let i=e.root;if(!i)throw new Error("Property does not have a root.");super(i.object.root.id),this._property=e,this._lastValue=e.toRawValue(),this._nextValue=t}execute(){return this._property.setValue(this._nextValue),!0}undo(){this._property.setValue(this._lastValue)}}class xt extends qe{constructor(e,t,i,s,o){super();let r=e.pages.get(t.root.id);if(!r)throw new Error(`'${t.id}' must belong to an existing editor.`);let n=t.factory.createObject(i),a=r.view;if(void 0===s)s=Math.round((a.w/2-a.x)/a.k);else{let{xMid:e,xMin:t}=n.boundingBox;s=(s-a.x)/a.k+e-t}if(void 0===o)o=Math.round((a.h/2-a.y)/a.k);else{let{yMid:e,yMin:t}=n.boundingBox;o=(o-a.y)/a.k+e-t}n.getAlignment()===d["a"].Grid&&(s=Object(d["B"])(s,r.page.grid[0]),o=Object(d["B"])(o,r.page.grid[1])),n.moveTo(s,o),this.add(new Ue(n,t))}}class wt extends Ne{constructor(e,t){super(t);let i=e.pages.get(t);if(!i)throw new Error(`'${t}' is not a page.`);this._editor=i}execute(){return this._editor.undo(),!1}undo(){}}class jt extends qe{constructor(e){super();for(let t of e.getSubtree(this.isDirectlyHovered))this.add(new Ke(t))}isDirectlyHovered(e){return(e.attrs&d["n"])===d["m"].Direct}}class Ot extends Ne{constructor(e){super(e.root.id),this._object=e}execute(){return this._object.setPositionSetByUser(d["s"].True),!0}undo(){this._object.setPositionSetByUser(d["s"].False)}}class Mt extends Ne{constructor(e,t,i){super(t.id);let s=e.pages.get(t.id);if(!s)throw new Error(`Page '${t.id}' does not have an editor.`);this._editor=s;let o=s.view.k,r=(s.view.w/2-s.view.x)/o,n=(s.view.h/2-s.view.y)/o;this._location={x:r,y:n,k:o+i}}execute(){return this._editor.location.value=this._location,!1}undo(){}}function kt(e,t,i,o,r,n){const a=Object(s["y"])("ContextMenuListing"),l=Object(s["y"])("FocusBox");return Object(s["r"])(),Object(s["d"])(l,{style:Object(s["q"])(e.offset),class:"context-menu-control",onUnfocus:t[1]||(t[1]=t=>e.$emit("unfocus")),onContextmenu:t[2]||(t[2]=Object(s["G"])(()=>{},["prevent"]))},{default:Object(s["E"])(()=>[Object(s["i"])(a,{sections:e.sections,onSelect:t[0]||(t[0]=t=>e.$emit("select",t)),forceInsideWindow:!1},null,8,["sections"])]),_:1},8,["style"])}var St=Object(s["k"])({name:"ContextMenu",props:{sections:{type:Array,required:!0}},data(){return{xOffset:0,yOffset:0}},computed:{offset(){return{marginTop:this.yOffset+"px",marginLeft:this.xOffset+"px"}}},emits:["select","unfocus"],mounted(){let e=window.innerWidth,t=window.innerHeight,{bottom:i,right:s}=this.$el.getBoundingClientRect();this.xOffset=s>e?-(this.$el.clientWidth-1):0,this.yOffset=i>t?-(this.$el.clientHeight-1):0},components:{FocusBox:ie["a"],ContextMenuListing:we}});i("856c");const Ct=ve()(St,[["render",kt],["__scopeId","data-v-6a0233c2"]]);var Bt=Ct,Pt=Object(s["k"])({name:"BlockDiagram",setup(){return{isHotkeyActive:Object(s["n"])("isHotkeyActive")}},data(){return{cursor:d["d"].Default,diagram:Object(s["o"])(new d["c"]),menu:{x:0,y:0,show:!1},view:{x:0,y:0,k:1,w:0,h:0}}},computed:Object.assign(Object.assign(Object.assign(Object.assign({},Object(P["d"])("ApplicationStore",{ctx(e){return e},editor(e){return e.activePage},camera(e){return e.activePage.location.value},pageUpdate(e){return e.activePage.trigger.value},displayGrid(e){return e.settings.view.diagram.display_grid},displayShadows(e){return e.settings.view.diagram.display_shadows},displayDebugMode(e){return e.settings.view.diagram.display_debug_mode},renderHighQuality(e){return e.settings.view.diagram.render_high_quality},disableShadowsAt(e){return e.settings.view.diagram.disable_shadows_at},multiselectHotkey(e){return e.settings.hotkeys.select.many}})),Object(P["b"])("ApplicationStore",["hasSelection"])),Object(P["b"])("ContextMenuStore",["deleteMenu","clipboardMenu","duplicateMenu","layeringMenu","jumpMenu","undoRedoMenu","selectAllMenu","zoomMenu","diagramViewMenu"])),{cursorStyle(){return{cursor:d["e"][this.cursor]}},menuStyle(){return{top:this.menu.y+"px",left:this.menu.x+"px"}},menuOptions(){return this.hasSelection?[this.deleteMenu,this.clipboardMenu,this.duplicateMenu,this.layeringMenu,this.jumpMenu]:[this.undoRedoMenu,this.createMenu,this.selectAllMenu,this.zoomMenu,this.diagramViewMenu]},createMenu(){let e=this.editor.page.factory,t=e.getNamespace().get("@"),i=this.formatCreateMenu("@",t);return{id:"create_options",items:[{text:"Create",type:be.Submenu,sections:i.sections}]}}}),methods:Object.assign(Object.assign({},Object(P["c"])("ApplicationStore",["execute"])),{formatCreateMenu(e,t){let i={text:Object(d["C"])(e),type:be.Submenu,sections:[{id:"submenus",items:[]},{id:"options",items:[]}]};for(let[s,o]of t)"string"!==typeof o?i.sections[0].items.push(this.formatCreateMenu(s,o)):i.sections[1].items.push({text:Object(d["C"])(s),type:be.Item,data:()=>new xt(this.ctx,this.editor.page,o,this.menu.x,this.menu.y)});return i.sections=i.sections.filter(e=>0<e.items.length),i},onItemSelect(e){return Object(l["a"])(this,void 0,void 0,(function*(){try{let t=e();t instanceof Promise?this.execute(yield t):this.execute(t)}catch(t){console.error(t)}this.closeContextMenu()}))},openContextMenu(e,t){requestAnimationFrame(()=>{this.menu.show=!0,this.menu.x=e,this.menu.y=t})},closeContextMenu(){this.menu.show=!1},onObjectHover(e,t){this.cursor=t,this.execute(new jt(this.editor.page)),e&&this.execute(new it(e))},onObjectClick(e,t,i,s){let o=this.isHotkeyActive(this.multiselectHotkey);o||t.isSelected()||this.execute(new ot(this.editor.page)),this.execute(new st(t)),e.button===d["p"].Right&&this.openContextMenu(i,s)},onCanvasClick(e,t,i){this.execute(new ot(this.editor.page)),e.button===d["p"].Right&&this.openContextMenu(t,i)},onObjectMove(e,t,i){let s=new qe;for(let o of e)o.hasUserSetPosition()||s.add(new Ot(o)),s.add(new ct(o,t,i));this.execute(s)},onObjectAttach(e,t){let{xMid:i,yMid:s}=t.boundingBox,o=new qe;e.isAttached()&&o.add(new et(e)),o.add(new dt(e,i,s)),o.add(new We(t,e)),this.execute(o)},onObjectDetach(e,t,i){let s=new qe;s.add(new et(e)),s.add(new ct(e,t,i)),this.execute(s)},onLineCreate(e,t,i,s){this.execute(new $e(e,t,i,s)),this.execute(new ot(this.editor.page)),this.execute(new st(e))},onViewTransform(e,t,i,s,o){this.view={x:e,y:t,k:i,w:s,h:o},this.execute(new U(this.ctx,this.editor.id,Object.assign({},this.view)))}}),watch:{editor(){this.diagram.setPage(Object(s["o"])(this.editor.page)),this.diagram.updateView(),this.diagram.setCameraLocation(this.camera,0),this.execute(new U(this.ctx,this.editor.id,Object.assign({},this.view)))},camera(){this.diagram.setCameraLocation(this.camera)},pageUpdate(){this.diagram.updateView(),this.diagram.render()},displayGrid(){this.diagram.setGridDisplay(this.displayGrid),this.diagram.render()},displayShadows(){this.diagram.setShadowsDisplay(this.displayShadows),this.diagram.render()},displayDebugMode(){this.diagram.setDebugDisplay(this.displayDebugMode),this.diagram.render()},renderHighQuality(){this.diagram.setSsaaScale(this.renderHighQuality?2:1),this.diagram.render()},disableShadowsAt(){this.diagram.setShadowsDisableAt(this.disableShadowsAt),this.diagram.render()}},mounted(){this.diagram.on("object-hover",this.onObjectHover),this.diagram.on("object-click",this.onObjectClick),this.diagram.on("canvas-click",this.onCanvasClick),this.diagram.on("object-move",this.onObjectMove),this.diagram.on("object-attach",this.onObjectAttach),this.diagram.on("object-detach",this.onObjectDetach),this.diagram.on("view-transform",this.onViewTransform),this.diagram.on("line-create",this.onLineCreate),this.diagram.setGridDisplay(this.displayGrid),this.diagram.setShadowsDisplay(this.displayShadows),this.diagram.setDebugDisplay(this.displayDebugMode),this.diagram.setSsaaScale(this.renderHighQuality?2:1),this.diagram.setShadowsDisableAt(this.disableShadowsAt),this.diagram.setPage(Object(s["o"])(this.editor.page)),this.diagram.inject(this.$el),this.diagram.updateView(),this.diagram.setCameraLocation(this.camera,0)},unmounted(){this.diagram.destroy()},components:{ContextMenu:Bt}});i("76f2");const Tt=ve()(Pt,[["render",ze],["__scopeId","data-v-345908d4"]]);var Et=Tt;const At=e=>(Object(s["t"])("data-v-783f2534"),e=e(),Object(s["s"])(),e),Dt={class:"app-footer-bar-element"},Ht={class:"info left"},It={class:"selected"},Ft=At(()=>Object(s["g"])("span",null,"Selected:",-1)),Lt={class:"info right"},Vt={key:0,class:"page-check valid"},Rt=At(()=>Object(s["g"])("span",null,"✓",-1)),zt={key:1,class:"page-check invalid"},Nt=At(()=>Object(s["g"])("span",null,"⚠",-1));function $t(e,t,i,o,r,n){return Object(s["r"])(),Object(s["f"])("div",Dt,[Object(s["g"])("div",Ht,[Object(s["g"])("p",It,[Ft,Object(s["h"])(" "+Object(s["A"])(e.hasSelection),1)])]),Object(s["g"])("div",Lt,[e.isValid?(Object(s["r"])(),Object(s["f"])("div",Vt,[Rt,Object(s["h"])(" Valid "+Object(s["A"])(e.fileName),1)])):(Object(s["r"])(),Object(s["f"])("div",zt,[Nt,Object(s["h"])(" Invalid "+Object(s["A"])(e.fileName),1)]))])])}var Ut=Object(s["k"])({name:"AppFooterBar",data(){return{fileName:C.file_type_name}},computed:Object.assign({},Object(P["b"])("ApplicationStore",["hasSelection","isValid"]))});i("75a4");const Wt=ve()(Ut,[["render",$t],["__scopeId","data-v-783f2534"]]);var Gt=Wt;function qt(e,t,i,o,r,n){const a=Object(s["y"])("PropertyEditor"),l=Object(s["y"])("AccordionPane"),c=Object(s["y"])("ValidatorProblems"),d=Object(s["y"])("AccordionBox");return Object(s["r"])(),Object(s["d"])(d,{class:"editor-tabs-element"},{default:Object(s["E"])(()=>[Object(s["i"])(l,{name:"Properties",units:3},{default:Object(s["E"])(()=>[Object(s["i"])(a,{class:"properties-pane",property:e.selected},{"no-props":Object(s["E"])(()=>[Object(s["h"])(" The selected object has no properties. ")]),"no-prop":Object(s["E"])(()=>[Object(s["h"])(" Select a single object to edit its properties. ")]),_:1},8,["property"])]),_:1}),Object(s["i"])(l,{name:"Problems",units:1},{default:Object(s["E"])(()=>[Object(s["i"])(c,{class:"validator-problems-pane"})]),_:1})]),_:1})}var Yt=i("1b79"),Kt=Object(s["k"])({name:"AccordionBox",data(){return{track:Object(s["o"])(new B["a"]),panes:[],activePane:0,onResizeObserver:null}},props:{collapseHeight:{type:Number,default:30}},computed:{boxStyle(){let e=this.panes.map(e=>e.activeHeight+this.collapseHeight+"px").join(" ");return{gridTemplateRows:e}}},methods:{onCollapse(e,t){this.panes[t].collapsed?this.uncollapsePane(t):this.collapsePane(t)},collapsePane(e){let t=this.panes;this.cacheHeights();let i=t.reduce((e,t)=>e+t.cachedHeight,0),s=this.getAvailableHeight(),o=i-t[e].cachedHeight;if(t[e].collapsed=!0,t[e].activeHeight=0,t[e].uncollapsedHeight=t[e].cachedHeight,o<s){let i=s-o,r=Math.min(i,t[e].cachedHeight);for(let e=t.length-1;0<=e;e--)if(!t[e].collapsed){t[e].activeHeight+=r;break}}this.cacheHeights()},uncollapsePane(e){let t=this.panes,i=t[e].uncollapsedHeight;this.cacheHeights();let s=t.reduce((e,t)=>e+t.cachedHeight,0),o=this.getAvailableHeight();0===s&&(t[e].activeHeight+=o,i-=Math.min(i,o));for(let r=t.length-1;0<=r;r--){if(t[r].collapsed)continue;let s=t[r].cachedHeight-t[r].minHeight,o=Math.min(s,i);t[r].activeHeight-=o,t[e].activeHeight+=o,i-=o}t[e].activeHeight=Math.max(t[e].activeHeight,t[e].minHeight),t[e].collapsed=!1,this.cacheHeights()},startDrag(e,t){this.cacheHeights(),this.activePane=t,this.track.capture(e,this.onDrag),document.addEventListener("pointerup",this.stopDrag,{once:!0})},onDrag(e,t){let i=this.panes;if(0!==t.movementY)if(i.forEach(e=>e.activeHeight=e.cachedHeight),t.deltaY<0){let e=-1;for(let t=this.activePane;t<i.length;t++)if(!i[t].collapsed){e=t;break}if(-1===e)return;let s=Math.abs(t.deltaY);for(let t=this.activePane-1;0<=t;t--){if(i[t].collapsed)continue;let e=i[t].cachedHeight-i[t].minHeight,o=Math.min(e,s);i[t].activeHeight=i[t].cachedHeight-o,s-=o}let o=Math.abs(t.deltaY)-s;i[e].activeHeight=i[e].cachedHeight+o}else{let e=-1;for(let t=this.activePane-1;0<=t;t--)if(!i[t].collapsed){e=t;break}if(-1===e)return;let s=t.deltaY;for(let t=this.activePane;t<i.length;t++){if(i[t].collapsed)continue;let e=i[t].cachedHeight-i[t].minHeight,o=Math.min(e,s);i[t].activeHeight=i[t].cachedHeight-o,s-=o}let o=t.deltaY-s;i[e].activeHeight=i[e].cachedHeight+o}},stopDrag(e){this.track.release(e),this.cacheHeights()},refit(){let e=this.panes,t=e.reduce((e,t)=>e+t.cachedHeight,0),i=this.getAvailableHeight();if(0!==t)if(t<=i){let s=e.map(e=>e.cachedHeight/t);for(let t=0;t<e.length;t++)e[t].activeHeight=i*s[t]}else{let s=e.reduce((e,t)=>e+(t.collapsed?0:t.minHeight),0),o=t-Math.max(s,i),r=t-s,n=0!==r?o/r:1;for(let t=0;t<e.length;t++){if(e[t].collapsed)continue;let i=(e[t].cachedHeight-e[t].minHeight)*n;e[t].activeHeight=e[t].cachedHeight-i}}},reset(){var e,t,i,s,o,r;if(!this.$slots.default)return;let n=[],a=[];for(let d of this.$slots.default())a.push(null!==(t=null===(e=d.props)||void 0===e?void 0:e.units)&&void 0!==t?t:1),n.push({minHeight:null!==(s=null===(i=d.props)||void 0===i?void 0:i.minHeight)&&void 0!==s?s:100,activeHeight:0,cachedHeight:0,uncollapsedHeight:0,collapsed:null!==(r=null===(o=d.props)||void 0===o?void 0:o.collapsed)&&void 0!==r&&r});let l=this.getAvailableHeight(),c=a.reduce((e,t)=>e+t);for(let d=0;d<n.length;d++){let e=n[d],t=l*(a[d]/c);e.cachedHeight=Math.max(e.minHeight,t)}this.panes=n,this.refit();for(let d=0;d<this.panes.length;d++)this.panes[d].collapsed&&this.collapsePane(d)},getAvailableHeight(){let e=this.$el.clientHeight;if(this.$slots.default){let t=this.$slots.default().length;return e-t*this.collapseHeight}return e},cacheHeights(){for(let e of this.panes)e.cachedHeight=e.activeHeight}},mounted(){this.onResizeObserver=new ResizeObserver(()=>this.refit()),this.onResizeObserver.observe(this.$el),this.reset()},unmounted(){this.onResizeObserver.disconnect()},render(){var e,t,i;let o=[];if(this.$slots.default){let r=this.$slots.default();for(let n=0;n<r.length;n++){let a=r[n],l=Object(s["m"])("div",{class:"accordion-box-handle",onPointerup:e=>this.stopDrag(e),onPointerdown:e=>this.startDrag(e,n)}),c=Object(s["m"])("div",{class:"accordion-box-head",style:{height:this.$props.collapseHeight+"px"},onClick:e=>this.onCollapse(e,n)},[Object(s["m"])(Yt["a"],{class:"collapse-arrow",collapsed:null===(e=this.panes[n])||void 0===e?void 0:e.collapsed}),Object(s["m"])("p",null===(t=a.props)||void 0===t?void 0:t.name.toLocaleUpperCase())]),d=Object(s["m"])("div",{class:"accordion-box-body"},a),h=Object(s["m"])("div",{class:["accordion-box",{collapsed:null===(i=this.panes[n])||void 0===i?void 0:i.collapsed}]},[l,c,d]);o.push(h)}}return Object(s["m"])("div",{class:"accordion-box-container",style:this.boxStyle},o)}});i("9a52");const Xt=ve()(Kt,[["__scopeId","data-v-39ee0bdf"]]);var Jt=Xt;const Zt={class:"accordion-pane-container"};function Qt(e,t,i,o,r,n){return Object(s["r"])(),Object(s["f"])("div",Zt,[Object(s["x"])(e.$slots,"default",{},void 0,!0)])}var ei=Object(s["k"])({name:"AccordionPane",props:{name:{type:String,required:!0},units:{type:Number,default:1},minHeight:{type:Number,default:100},collapsed:{type:Boolean,default:!1}}});i("c609");const ti=ve()(ei,[["render",Qt],["__scopeId","data-v-22255fa2"]]);var ii=ti;const si={class:"object-editor-element"},oi={key:1,class:"no-prop"},ri={key:1,class:"no-prop"};function ni(e,t,i,o,r,n){const a=Object(s["y"])("DictionaryFieldContents"),l=Object(s["y"])("ScrollBox");return Object(s["r"])(),Object(s["f"])("div",si,[e.property?(Object(s["r"])(),Object(s["f"])(s["a"],{key:0},[e.hasEditableProperties?(Object(s["r"])(),Object(s["d"])(l,{key:0,alwaysShowScrollBar:!0,scrollColor:"#1f1f1f"},{default:Object(s["E"])(()=>[Object(s["i"])(a,{class:"contents",property:e.property,onChange:e.onChange,onCreate:e.onCreate,onDelete:e.onDelete},null,8,["property","onChange","onCreate","onDelete"])]),_:1})):(Object(s["r"])(),Object(s["f"])("p",oi,[Object(s["x"])(e.$slots,"no-props",{},void 0,!0)]))],64)):(Object(s["r"])(),Object(s["f"])("p",ri,[Object(s["x"])(e.$slots,"no-prop",{},void 0,!0)]))])}var ai=i("6f01"),li=i("69ee"),ci=Object(s["k"])({name:"PropertyEditor",props:{property:{type:Object,default:void 0}},computed:{hasEditableProperties(){var e;if(!this.property)return!1;for(let t of this.property.value.values())if(null===(e=t.descriptor.is_visible)||void 0===e||e)return!0;return!1}},methods:Object.assign(Object.assign({},Object(P["c"])("ApplicationStore",["execute"])),{onChange(e,t){switch(e.type){case d["u"].Int:case d["u"].Float:e instanceof d["q"]&&this.execute(new _t(e,t));break;case d["u"].String:e instanceof d["y"]&&this.execute(new vt(e,t));break;case d["u"].Date:e instanceof d["f"]&&this.execute(new yt(e,t));break;case d["u"].Enum:e instanceof d["l"]&&this.execute(new mt(e,t));break}},onCreate(e){switch(e.type){case d["u"].List:e instanceof d["o"]&&this.execute(new Ge(e));break}},onDelete(e,t){switch(e.type){case d["u"].List:e instanceof d["o"]&&this.execute(new Qe(e,t));break}}}),components:{ScrollBox:ai["a"],DictionaryFieldContents:li["a"]}});i("41de");const di=ve()(ci,[["render",ni],["__scopeId","data-v-5d47093b"]]);var hi=di;const ui=e=>(Object(s["t"])("data-v-36571590"),e=e(),Object(s["s"])(),e),pi={class:"validator-problems-element"},fi={class:"content"},gi=["onClick"],bi=ui(()=>Object(s["g"])("span",{class:"icon"},"",-1)),yi={class:"message"},mi=["onClick"],_i=ui(()=>Object(s["g"])("span",{class:"icon"},"",-1)),vi={class:"message"};function xi(e,t,i,o,r,n){const a=Object(s["y"])("ScrollBox");return Object(s["r"])(),Object(s["f"])("div",pi,[0<e.getValidationErrors.length||0<e.getValidationWarnings.length?(Object(s["r"])(),Object(s["d"])(a,{key:0,class:"scrollbox",alwaysShowScrollBar:!0,scrollColor:"#1f1f1f"},{default:Object(s["E"])(()=>[Object(s["g"])("div",fi,[(Object(s["r"])(!0),Object(s["f"])(s["a"],null,Object(s["w"])(e.getValidationErrors,t=>(Object(s["r"])(),Object(s["f"])("div",{class:"validation-result error",key:t,onClick:i=>e.focus(t.object)},[bi,Object(s["g"])("p",yi,Object(s["A"])(t.reason),1)],8,gi))),128)),(Object(s["r"])(!0),Object(s["f"])(s["a"],null,Object(s["w"])(e.getValidationWarnings,t=>(Object(s["r"])(),Object(s["f"])("div",{class:"validation-result warning",key:t,onClick:i=>e.focus(t.object)},[_i,Object(s["g"])("p",vi,Object(s["A"])(t.reason),1)],8,mi))),128))])]),_:1})):Object(s["e"])("",!0)])}var wi=Object(s["k"])({name:"ValidatorProblems",computed:Object.assign(Object.assign({},Object(P["d"])("ApplicationStore",{ctx(e){return e},editor(e){return e.activePage}})),Object(P["b"])("ApplicationStore",["getValidationErrors","getValidationWarnings"])),methods:Object.assign(Object.assign({},Object(P["c"])("ApplicationStore",["execute"])),{focus(e){let t=this.editor.page.lookup(e);t&&(this.execute(new ot(this.editor.page)),this.execute(new st(t)),this.execute(new lt(this.ctx,this.editor.page)))}}),components:{ScrollBox:ai["a"]}});i("cf07");const ji=ve()(wi,[["render",xi],["__scopeId","data-v-36571590"]]);var Oi=ji,Mi=Object(s["k"])({name:"EditorSidebar",computed:Object.assign(Object.assign(Object.assign({},Object(P["d"])("ApplicationStore",{page(e){return e.activePage.page}})),Object(P["b"])("ApplicationStore",["hasSelection","getSelection"])),{selected(){return 0===this.hasSelection?this.page.props:1===this.hasSelection?this.getSelection[0].props:void 0}}),components:{AccordionBox:Jt,AccordionPane:ii,PropertyEditor:hi,ValidatorProblems:Oi}});i("872d");const ki=ve()(Mi,[["render",qt],["__scopeId","data-v-09fcd1e8"]]);var Si=ki;const Ci={None:0,Right:1};var Bi=Object(s["k"])({name:"App",setup(){return{body:Object(s["v"])(null)}},data(){return{Handle:Ci,bodyWidth:-1,bodyHeight:-1,frameSize:{[Ci.Right]:325},minFrameSize:{[Ci.Right]:310},drag:{handle:Ci.None,track:Object(s["o"])(new B["a"])},onResizeObserver:null}},computed:Object.assign(Object.assign({},Object(P["d"])("ApplicationStore",{context(e){return e}})),{gridLayout(){let e=this.frameSize[Ci.Right];return{gridTemplateColumns:`minmax(0, 1fr) ${e}px`}}}),methods:Object.assign(Object.assign({},Object(P["c"])("ApplicationStore",["execute"])),{startResize(e,t){let i=this.frameSize[t];this.drag.handle=t,this.drag.track.capture(e,(e,t)=>{this.onResize(i,t)}),document.addEventListener("pointerup",this.stopResize,{once:!0})},onResize(e,t){switch(this.drag.handle){default:case Ci.None:break;case Ci.Right:this.setRightFrameSize(e-t.deltaX);break}},stopResize(e){this.drag.handle=Ci.None,this.drag.track.release(e)},setRightFrameSize(e){let t=this.bodyWidth,i=this.minFrameSize[Ci.Right];this.frameSize[Ci.Right]=Object(d["A"])(e,i,t)}}),created(){return Object(l["a"])(this,void 0,void 0,(function*(){let e;e=C.is_web_hosted?yield(yield fetch("./settings.json")).json():i("14d9"),this.execute(new F(this.context,e)),this.execute(yield I.fromNew(this.context))}))},mounted(){this.bodyWidth=this.body.clientWidth,this.bodyHeight=this.body.clientHeight,this.onResizeObserver=new ResizeObserver(()=>{this.bodyWidth=this.body.clientWidth,this.bodyHeight=this.body.clientHeight,this.setRightFrameSize(this.frameSize[Ci.Right])}),this.onResizeObserver.observe(this.body)},unmounted(){var e;null===(e=this.onResizeObserver)||void 0===e||e.disconnect()},components:{AppHotkeyBox:Re,AppTitleBar:Ce,BlockDiagram:Et,AppFooterBar:Gt,EditorSidebar:Si}});i("ddce");const Pi=ve()(Bi,[["render",a]]);var Ti=Pi;const Ei={file:{image_export:{padding:0}},edit:{clone_offset:[0,0]},view:{diagram:{display_grid:!0,display_shadows:!0,display_debug_mode:!1,render_high_quality:!0,disable_shadows_at:0}},hotkeys:{file:{new_file:"",open_file:"",save_file:"",save_image:"",save_select_image:"",publish_file:"",open_library:"",save_library:""},edit:{undo:"",redo:"",cut:"",copy:"",paste:"",delete:"",duplicate:"",select_all:""},layout:{selection_to_front:"",selection_to_back:"",bring_selection_forward:"",send_selection_backward:"",align_left:"",align_center:"",align_right:"",align_top:"",align_middle:"",align_bottom:"",group:"",ungroup:"",open_group:"",close_group:""},view:{toggle_grid:"",toggle_shadows:"",reset_view:"",zoom_in:"",zoom_out:"",fullscreen:"",jump_to_selection:"",jump_to_parents:"",jump_to_children:"",toggle_debug_view:""},select:{many:""}}},Ai=C.publisher?new C.publisher:void 0,Di=H.createDummy();var Hi={namespaced:!0,state:{settings:Ei,clipboard:[],publisher:Ai,pages:new Map([[Di.id,Di]]),activePage:Di},getters:{hasClipboardContents(e){return 0<e.clipboard.length},hasSelection(e){let t=[...e.activePage.page.getSubtree(e=>e.isSelected())];return(e.activePage.trigger.value,t).length},getSelection(e){let t=[...e.activePage.page.getSubtree(e=>e.isSelected())];return e.activePage.trigger.value,t},isValid(e){let t=e.activePage;return(e.activePage.trigger.value,t).isValid()},getValidationErrors(e){let t=e.activePage;return(e.activePage.trigger.value,t).getValidationErrors()},getValidationWarnings(e){let t=e.activePage;return(e.activePage.trigger.value,t).getValidationWarnings()}},mutations:{execute(e,t){if(t instanceof Ne){if(t.page===Ne.NullPage)return;let i=e.pages.get(t.page);if(!i)throw new Error(`'${t.page}' is not a page.`);i.execute(t)}else t.execute()}}},Ii={namespaced:!0,getters:{fileMenu(e,t,i){let s=i.ApplicationStore,o=[t.openFileMenu,t.saveFileMenu,s.publisher?t.publishFileMenu:null].filter(Boolean);return{text:"File",type:be.Submenu,sections:o}},openFileMenu(e,t,i){let s=i.ApplicationStore,o=s.settings.hotkeys.file;return{id:"open_file_options",items:[{text:"New File",type:be.Item,data:()=>I.fromNew(s),shortcut:o.new_file},{text:"Open File...",type:be.Item,data:()=>I.fromFileSystem(s),shortcut:o.open_file}]}},saveFileMenu(e,t,i,s){let o=i.ApplicationStore,r=o.settings.hotkeys.file,n=o.activePage.page;return{id:"save_file_options",items:[{text:"Save",type:be.Item,data:()=>new N(o,n.id),shortcut:r.save_file},{text:"Save as Image",type:be.Item,data:()=>new z(o,n.id),shortcut:r.save_image},{text:"Save Selection as Image",type:be.Item,data:()=>new $(o,n.id),shortcut:r.save_select_image,disabled:!s["ApplicationStore/hasSelection"]}]}},publishFileMenu(e,t,i,s){let o=i.ApplicationStore,r=o.settings.hotkeys.file,n=o.activePage.page;return{id:"publish_options",items:[{text:"Publish "+C.file_type_name,type:be.Item,data:()=>new V(o,n.id),shortcut:r.publish_file,disabled:!s["ApplicationStore/isValid"]}]}},editMenu(e,t){return{text:"Edit",type:be.Submenu,sections:[t.undoRedoMenu,t.clipboardMenu,t.deleteMenu,t.duplicateMenu,t.createMenu,t.selectAllMenu]}},undoRedoMenu(e,t,i){let s=i.ApplicationStore,o=s.activePage.page,r=s.settings.hotkeys.edit;return{id:"undo_redo_options",items:[{text:"Undo",type:be.Item,data:()=>new wt(s,o.id),shortcut:r.undo,disabled:!s.activePage.canUndo()},{text:"Redo",type:be.Item,data:()=>new ut(s,o.id),shortcut:r.redo,disabled:!s.activePage.canRedo()}]}},clipboardMenu(e,t,i,s){let o=i.ApplicationStore,r=o.activePage.page,n=o.settings.hotkeys.edit,a=o.clipboard.length,l=s["ApplicationStore/hasSelection"];return{id:"clipboard_options",items:[{text:"Cut",type:be.Item,data:()=>new Ze(o,r),shortcut:n.cut,disabled:!l},{text:"Copy",type:be.Item,data:()=>new E(o,r),shortcut:n.copy,disabled:!l},{text:"Paste",type:be.Item,data:()=>new ht(o,r),shortcut:n.paste,disabled:!a}]}},deleteMenu(e,t,i,s){let o=i.ApplicationStore,r=o.activePage.page,n=o.settings.hotkeys.edit,a=s["ApplicationStore/hasSelection"];return{id:"delete_options",items:[{text:"Delete",type:be.Item,data:()=>new Je(r),shortcut:n.delete,disabled:!a}]}},duplicateMenu(e,t,i,s){let o=i.ApplicationStore,r=o.activePage.page,n=o.settings.hotkeys.edit,a=s["ApplicationStore/hasSelection"];return{id:"duplicate_options",items:[{text:"Duplicate",type:be.Item,data:()=>new tt(o,r),shortcut:n.duplicate,disabled:!a}]}},selectAllMenu(e,t,i){let s=i.ApplicationStore,o=s.activePage.page,r=s.settings.hotkeys.edit;return{id:"select_options",items:[{text:"Select All",type:be.Item,data:()=>new bt(o),shortcut:r.select_all}]}},createMenu(e,t,i){let s=i.ApplicationStore,o=s.activePage.page,r=o.factory.getNamespace().get("@"),n=function e(t,i){let r={text:Object(d["C"])(t),type:be.Submenu,sections:[{id:"submenus",items:[]},{id:"options",items:[]}]};for(let[n,a]of i)"string"!==typeof a?r.sections[0].items.push(e(n,a)):r.sections[1].items.push({text:Object(d["C"])(n),type:be.Item,data:()=>new xt(s,o,a)});return r.sections=r.sections.filter(e=>0<e.items.length),r}("@",r);return{id:"create_options",items:[{text:"Create",type:be.Submenu,sections:n.sections}]}},layoutMenu(e,t){return{text:"Layout",type:be.Submenu,sections:[t.layeringMenu]}},layeringMenu(e,t,i){let s=i.ApplicationStore,o=s.activePage.page,r=s.settings.hotkeys.layout;return{id:"layering_options",items:[{text:"To Front",type:be.Item,data:()=>new ft(o,Ve.Top),shortcut:r.selection_to_front},{text:"To Back",type:be.Item,data:()=>new ft(o,Ve.Bottom),shortcut:r.selection_to_back},{text:"Bring Forward",type:be.Item,data:()=>new ft(o,Ve.OneAbove),shortcut:r.bring_selection_forward},{text:"Send Backward",type:be.Item,data:()=>new ft(o,Ve.OneBelow),shortcut:r.send_selection_backward}]}},viewMenu(e,t){return{text:"View",type:be.Submenu,sections:[t.diagramViewMenu,t.diagramRenderMenu,t.zoomMenu,t.jumpMenu,t.fullscreenMenu,t.developerViewMenu]}},diagramViewMenu(e,t,i){let s=i.ApplicationStore,o=s.settings.hotkeys.view,{display_grid:r,display_shadows:n}=s.settings.view.diagram;return{id:"diagram_view_options",items:[{text:"Grid",type:be.Toggle,data:()=>new Y(s),shortcut:o.toggle_grid,value:r,keepMenuOpenOnSelect:!0},{text:"Shadows",type:be.Toggle,data:()=>new K(s),shortcut:o.toggle_shadows,value:n,keepMenuOpenOnSelect:!0}]}},diagramRenderMenu(e,t,i){let s=i.ApplicationStore,o=s.settings.view.diagram.render_high_quality;return{id:"diagram_render_quality",items:[{text:"Rendering – High Quality",type:be.Toggle,data:()=>new W(s,!0),value:o,keepMenuOpenOnSelect:!0},{text:"Rendering – Fast",type:be.Toggle,data:()=>new W(s,!1),value:!o,keepMenuOpenOnSelect:!0}]}},zoomMenu(e,t,i){let s=i.ApplicationStore,o=s.activePage.page,r=s.settings.hotkeys.view;return{id:"zoom_options",items:[{text:"Reset View",type:be.Item,data:()=>new gt(s,o),shortcut:r.reset_view},{text:"Zoom In",type:be.Item,data:()=>new Mt(s,o,.25),shortcut:r.zoom_in},{text:"Zoom Out",type:be.Item,data:()=>new Mt(s,o,-.25),shortcut:r.zoom_out}]}},jumpMenu(e,t,i,s){let o=i.ApplicationStore,r=o.activePage.page,n=o.settings.hotkeys.view,a=s["ApplicationStore/hasSelection"];return{id:"jump_options",items:[{text:"Zoom to Selection",type:be.Item,data:()=>new lt(o,r),shortcut:n.jump_to_selection,disabled:!a},{text:"Jump to Parents",type:be.Item,data:()=>new at(o,r),shortcut:n.jump_to_parents,disabled:!a},{text:"Jump to Children",type:be.Item,data:()=>new nt(o,r),shortcut:n.jump_to_children,disabled:!a}]}},fullscreenMenu(e,t,i){let s=i.ApplicationStore,o=s.settings.hotkeys.view;return{id:"fullscreen_options",items:[{text:"Fullscreen",type:be.Item,data:()=>new G(s),shortcut:o.fullscreen}]}},developerViewMenu(e,t,i){let s=i.ApplicationStore,o=s.settings.hotkeys.view,{display_debug_mode:r}=s.settings.view.diagram;return{id:"developer_view_options",items:[{text:"Debug Mode",type:be.Toggle,data:()=>new q(s),shortcut:o.toggle_debug_view,value:r,keepMenuOpenOnSelect:!0}]}},helpMenu(e,t,i){let s=i.ApplicationStore,o=C.menus.help_menu.help_links,r=o.map(e=>({text:e.text,type:be.Item,data:()=>new L(s,e.url)}));return{text:"Help",type:be.Submenu,sections:[{id:"help_links",items:r}]}}}},Fi={namespaced:!0,getters:{nativeHotkeys(){return[{shortcut:"Control+R",allowBrowserBehavior:!0},{shortcut:"Control+Shift+R",allowBrowserBehavior:!0}]},fileHotkeys(e,t,i,s){let o=i.ApplicationStore,r=o.activePage.page,n=o.settings.hotkeys.file,a=s["ApplicationStore/isValid"];return[{data:()=>I.fromNew(o),shortcut:n.new_file},{data:()=>I.fromFileSystem(o),shortcut:n.open_file},{data:()=>new N(o,r.id),shortcut:n.save_file},{data:()=>new z(o,r.id),shortcut:n.save_image},{data:()=>new $(o,r.id),shortcut:n.save_select_image},{data:()=>new V(o,r.id),shortcut:n.publish_file,disabled:!o.publisher||!a}]},editHotKeys(e,t,i){let s=i.ApplicationStore,o=s.activePage.page,r=s.settings.hotkeys.edit,n={delay:400,interval:50};return[{data:()=>new wt(s,o.id),shortcut:r.undo,repeat:n},{data:()=>new ut(s,o.id),shortcut:r.redo,repeat:n},{data:()=>new Ze(s,o),shortcut:r.cut},{data:()=>new E(s,o),shortcut:r.copy},{data:()=>new ht(s,o),shortcut:r.paste},{data:()=>new Je(o),shortcut:r.delete},{data:()=>new tt(s,o),shortcut:r.duplicate},{data:()=>new bt(o),shortcut:r.select_all}]},layoutHotkeys(e,t,i){let s=i.ApplicationStore,o=s.activePage.page,r=s.settings.hotkeys.layout;return[{data:()=>new ft(o,Ve.Top),shortcut:r.selection_to_front},{data:()=>new ft(o,Ve.OneBelow),shortcut:r.selection_to_back},{data:()=>new ft(o,Ve.OneAbove),shortcut:r.bring_selection_forward},{data:()=>new ft(o,Ve.Bottom),shortcut:r.send_selection_backward}]},viewHotkeys(e,t,i){let s=i.ApplicationStore,o=s.activePage.page,r=s.settings.hotkeys.view;return[{data:()=>new Y(s),shortcut:r.toggle_grid},{data:()=>new K(s),shortcut:r.toggle_shadows},{data:()=>new gt(s,o),shortcut:r.reset_view},{data:()=>new Mt(s,o,.25),shortcut:r.zoom_in},{data:()=>new Mt(s,o,-.25),shortcut:r.zoom_out},{data:()=>new lt(s,o),shortcut:r.jump_to_selection},{data:()=>new at(s,o),shortcut:r.jump_to_parents},{data:()=>new nt(s,o),shortcut:r.jump_to_children},{data:()=>new G(s),shortcut:r.fullscreen},{data:()=>new q(s),shortcut:r.toggle_debug_view}]}}},Li=Object(P["a"])({modules:{ApplicationStore:Hi,ContextMenuStore:Ii,HotkeyStore:Fi}});i("0da8"),i("2975");Object(s["c"])(Ti).use(Li).mount("#app")},cf07:function(e,t,i){"use strict";i("af01")},d288:function(e,t,i){},d3bf:function(e,t,i){},ddce:function(e,t,i){"use strict";i("1608")},e0ac:function(e,t,i){"use strict";var s=i("7a23");function o(e,t,i,o,r,n){return Object(s["r"])(),Object(s["f"])("div",{onPointerdown:t[0]||(t[0]=t=>e.$emit("focus")),class:"focus-box-container"},[Object(s["x"])(e.$slots,"default")],32)}var r=Object(s["k"])({name:"FocusBox",data(){return{onFocusOut:function(e){this.$el==e.target||this.$el.contains(e.target)||this.$emit("unfocus")}.bind(this)}},emits:["focus","unfocus"],mounted(){setTimeout(()=>{document.body.addEventListener("pointerdown",this.onFocusOut)},0)},unmounted(){document.body.removeEventListener("pointerdown",this.onFocusOut)}}),n=i("6b0d"),a=i.n(n);const l=a()(r,[["render",o]]);t["a"]=l},e16f:function(e,t,i){},ec4a:function(e,t,i){},f0dd:function(e,t,i){},f636:function(e,t,i){},f847:function(e,t,i){},f9d8:function(e,t,i){}});
//# sourceMappingURL=app.0ae9f97d.js.map