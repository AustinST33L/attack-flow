(function(e){function t(t){for(var o,s,a=t[0],l=t[1],c=t[2],d=0,h=[];d<a.length;d++)s=a[d],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&h.push(n[s][0]),n[s]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);u&&u(t);while(h.length)h.shift()();return r.push.apply(r,c||[]),i()}function i(){for(var e,t=0;t<r.length;t++){for(var i=r[t],o=!0,s=1;s<i.length;s++){var a=i[s];0!==n[a]&&(o=!1)}o&&(r.splice(t--,1),e=l(l.s=i[0]))}return e}var o={},s={app:0},n={app:0},r=[];function a(e){return l.p+"js/"+({}[e]||e)+"."+{"chunk-46cf60ae":"84b264b5","chunk-50298a5f":"b090cef3","chunk-7fe1654d":"10f09537"}[e]+".js"}function l(t){if(o[t])return o[t].exports;var i=o[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,l),i.l=!0,i.exports}l.e=function(e){var t=[],i={"chunk-46cf60ae":1,"chunk-50298a5f":1,"chunk-7fe1654d":1};s[e]?t.push(s[e]):0!==s[e]&&i[e]&&t.push(s[e]=new Promise((function(t,i){for(var o="css/"+({}[e]||e)+"."+{"chunk-46cf60ae":"2e5d066b","chunk-50298a5f":"bc0cbb0d","chunk-7fe1654d":"91ce4213"}[e]+".css",n=l.p+o,r=document.getElementsByTagName("link"),a=0;a<r.length;a++){var c=r[a],d=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(d===o||d===n))return t()}var h=document.getElementsByTagName("style");for(a=0;a<h.length;a++){c=h[a],d=c.getAttribute("data-href");if(d===o||d===n)return t()}var u=document.createElement("link");u.rel="stylesheet",u.type="text/css",u.onload=t,u.onerror=function(t){var o=t&&t.target&&t.target.src||n,r=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=o,delete s[e],u.parentNode.removeChild(u),i(r)},u.href=n;var p=document.getElementsByTagName("head")[0];p.appendChild(u)})).then((function(){s[e]=0})));var o=n[e];if(0!==o)if(o)t.push(o[2]);else{var r=new Promise((function(t,i){o=n[e]=[t,i]}));t.push(o[2]=r);var c,d=document.createElement("script");d.charset="utf-8",d.timeout=120,l.nc&&d.setAttribute("nonce",l.nc),d.src=a(e);var h=new Error;c=function(t){d.onerror=d.onload=null,clearTimeout(u);var i=n[e];if(0!==i){if(i){var o=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;h.message="Loading chunk "+e+" failed.\n("+o+": "+s+")",h.name="ChunkLoadError",h.type=o,h.request=s,i[1](h)}n[e]=void 0}};var u=setTimeout((function(){c({type:"timeout",target:d})}),12e4);d.onerror=d.onload=c,document.head.appendChild(d)}return Promise.all(t)},l.m=e,l.c=o,l.d=function(e,t,i){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(l.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)l.d(i,o,function(t){return e[t]}.bind(null,o));return i},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="",l.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],d=c.push.bind(c);c.push=t,c=c.slice();for(var h=0;h<c.length;h++)t(c[h]);var u=d;r.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("cd49")},"0da8":function(e,t,i){},"12bf":function(e,t,i){"use strict";i("157b")},"13c3":function(e,t,i){"use strict";function o(e,t,i,o,s,n=12,r=0){let a=o-t,l=s-i,c=Math.atan2(l,a),d=o-n*Math.cos(c-Math.PI/6),h=s-n*Math.sin(c-Math.PI/6),u=o-n*Math.cos(c+Math.PI/6),p=s-n*Math.sin(c+Math.PI/6);e.beginPath(),e.moveTo(d,h),e.lineTo(u,p),e.lineTo(o,s),e.closePath()}function s(e,t,i,o,s,n,r=1){t+=r/2,i+=r/2,o-=r,s-=r,n="number"===typeof n?{tl:n,tr:n,br:n,bl:n}:Object.assign({tl:0,tr:0,br:0,bl:0},n),e.beginPath(),e.moveTo(t+n.tl,i),e.lineTo(t+o-n.tr,i),e.quadraticCurveTo(t+o,i,t+o,i+n.tr),e.lineTo(t+o,i+s-n.br),e.quadraticCurveTo(t+o,i+s,t+o-n.br,i+s),e.lineTo(t+n.bl,i+s),e.quadraticCurveTo(t,i+s,t,i+s-n.bl),e.lineTo(t,i+n.tl),e.quadraticCurveTo(t,i,t+n.tl,i),e.closePath()}i.d(t,"g",(function(){return o})),i.d(t,"h",(function(){return s})),i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return l})),i.d(t,"c",(function(){return c})),i.d(t,"e",(function(){return d})),i.d(t,"m",(function(){return h})),i.d(t,"i",(function(){return u})),i.d(t,"j",(function(){return p})),i.d(t,"k",(function(){return g})),i.d(t,"l",(function(){return f})),i.d(t,"f",(function(){return m})),i.d(t,"d",(function(){return _}));class n{constructor(){this._listeners=new Map}on(e,t){this._listeners.has(e)||this._listeners.set(e,[]),this._listeners.get(e).unshift(t)}once(e,t){let i=(...o)=>{let s=this._listeners.get(e);s.splice(s.indexOf(i),1),t(...o)};this._listeners.has(e)||this._listeners.set(e,[]),this._listeners.get(e).unshift(i)}emit(e,...t){if(this._listeners.has(e)){let i=this._listeners.get(e);for(let e=i.length-1;0<=e;e--)i[e](...t)}}removeAllListeners(e){void 0!==e?this._listeners.delete(e):this._listeners.clear()}}var r=i("9ab4");class a{constructor(){this._fontList=new Map([["default",new l({size:"10pt",family:"sans-serif"})]])}getFont(e){let t=a.getCssFontString(e);return this._fontList.has(t)?this._fontList.get(t):this._fontList.get("default")}loadFonts(e,t=4e3){return Object(r["a"])(this,void 0,void 0,(function*(){let i=[];for(let n of e)i.push(this.loadFont(n,t));let o=yield Promise.allSettled(i),s=[];for(let t=0;t<o.length;t++)"fulfilled"!==o[t].status&&s.push(a.getCssFontString(e[t]));if(s.length){let e=`'${s.join("', '")}'`;throw new Error("The following fonts failed to load: "+e)}}))}loadFont(e,t=4e3){return Object(r["a"])(this,void 0,void 0,(function*(){let i=a.getCssFontString(e),o=document.fonts;if(o.check(i))return this._fontList.has(i)||this._fontList.set(i,new l(e)),!0;{let s,n=this._fontList.set.bind(this._fontList),a=Date.now(),c=new Promise((s,c)=>Object(r["a"])(this,void 0,void 0,(function*(){(function d(){return Object(r["a"])(this,void 0,void 0,(function*(){t<=Date.now()-a?c(new Error(`Failed to load font '${i}' request timed out after ${t}ms.`)):o.load(i).then(t=>{if(0<t.length){let t=o.check(i);t&&n(i,new l(e)),s(t)}else setTimeout(d,50)},c)}))})()}))),d=new Promise((e,o)=>{s=setTimeout(()=>o(new Error(`Failed to load font '${i}' request timed out after ${t}ms.`)),t)}),h=yield Promise.race([c,d]);return clearTimeout(s),h}}))}static getCssFontString(e){var t;return`${null!==(t=e.weight)&&void 0!==t?t:400} ${e.size} ${e.family}`}}class l{constructor(e){this.css=a.getCssFontString(e),this.descriptor=e,this._ctx=document.createElement("canvas").getContext("2d"),this._ctx.font=this.css,this._widthIndex=new Map;for(let t of l.DEFAULT_INDEX)this._widthIndex.set(t,this.measureWidth(t))}measureWidth(e){if(document.fonts.check(this.css))return this._ctx.measureText(e).width;throw new Error(`The font '${this.css}' has not been loaded. The width of '${e}' cannot be measured.`)}measure(e){if(document.fonts.check(this.css)){let t=this._ctx.measureText(e);return{width:t.width,ascent:t.actualBoundingBoxAscent,descent:t.actualBoundingBoxDescent}}throw new Error(`The font '${this.css}' has not been loaded. The width of '${e}' cannot be measured.`)}getCharWidth(e){return this._widthIndex.has(e)||this._widthIndex.set(e,this.measureWidth(e)),this._widthIndex.get(e)}wordWrap(e,t){let i=e.trim().split(/\n/),o=[];for(let s=0;s<i.length;s++)i[s]?o[s]=this.lineWrap(i[s],t):o[s]=i[s];return o.flat()}lineWrap(e,t){let i="",o=0,s=[],n=e.split(l.WHITESPACE).filter(Boolean),r=l.WHITESPACE.test(n[0])?0:1;for(let a=0;a<n.length;a++){let e=this.measureWidth(n[a]);if(a%2!==r)if(t<o+e&&(0!==a&&(s.push(i.trimEnd()),i="",o=0),t<e)){let r=n[a];for(let n=0;n<r.length;n++)e=this.getCharWidth(r[n]),0!==n&&t<o+e&&(s.push(i),i="",o=0),i+=r[n],o+=e}else i+=n[a],o+=e;else i+=n[a],o+=e}return s.push(i.trimEnd()),s}}l.DEFAULT_INDEX="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789\t ",l.WHITESPACE=/(\s+)/;const c=new a;function d(e,t,i){return Math.min(Math.max(e,t),i)}function h(e,t){return Math.sign(e)*Math.round(Math.abs(e)/t)*t}function u(e,t,i=5){let o=Math.pow(10,i);return Math.floor(e*o)===Math.floor(t*o)}function p(e){let t=0;for(let i in e)t|=e[i];return t}function g(e,t,i,o,s){let n=s/2,r=i-e,a=o-t,l=Math.acos(r/Math.sqrt(Math.pow(r,2)+Math.pow(a,2))),c=n*Math.sin(l),d=n*Math.cos(l);return[e-c,t-d,e+c,t+d,i+c,o+d,i-c,o-d]}function f(e,t,i){let o=1/0,s=1/0,n=-1/0,r=-1/0;for(let a=0;a<i.length;a+=2)o=Math.min(o,i[a]),s=Math.min(s,i[a+1]),n=Math.max(n,i[a]),r=Math.max(r,i[a+1]);if(o<e&&e<n&&s<t&&t<r){let o=e,s=t,r=n+1,a=t,l=0,c=i.length;for(let e=0;e<c;e+=2){let t=b(o,s,r,a,i[e],i[e+1],i[(e+2)%c],i[(e+3)%c]);t&&l++}return l%2!==0}return!1}function b(e,t,i,o,s,n,r,a){let l,c,d,h,u,p,g,f;return l=t-o,c=i-e,d=e*o-i*t,g=l*s+c*n+d,f=l*r+c*a+d,!(g<0&&f<0||g>0&&f>0)&&(h=n-a,u=r-s,p=s*a-r*n,g=h*e+u*t+p,f=h*i+u*o+p,!(g<0&&f<0||g>0&&f>0)&&l*u-h*c!=0)}function m(e){let t=0;if(0===e.length)return t;for(let i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t|=0;return t}var _;(function(e){e[e["Left"]=0]="Left",e[e["Middle"]=1]="Middle",e[e["Right"]=2]="Right"})(_||(_={}))},"14d9":function(e){e.exports=JSON.parse('{"file":{"image_export":{"padding":30}},"edit":{"clone_offset":[2,2]},"view":{"diagram":{"display_grid":true,"display_shadows":true,"display_debug_mode":false,"render_high_quality":true,"disable_shadows_at":0.7}},"hotkeys":{"file":{"new_file":"Control+N","open_file":"Control+O","save_file":"Control+S","save_image":"","save_select_image":"","publish_file":"","open_library":"","save_library":""},"edit":{"undo":"Control+Z","redo":"Control+Y","cut":"Control+X","copy":"Control+C","paste":"Control+V","delete":"Backspace","duplicate":"Control+D","select_all":"Control+A"},"layout":{"selection_to_front":"Control+Shift+F","selection_to_back":"Control+Shift+B","bring_selection_forward":"","send_selection_backward":"","align_left":"","align_center":"","align_right":"","align_top":"","align_middle":"","align_bottom":"","group":"Control+G","ungroup":"Control+Shift+U","open_group":"","close_group":""},"view":{"toggle_grid":"Control+Shift+G","toggle_shadows":"","reset_view":"Escape","zoom_in":"","zoom_out":"","fullscreen":"","jump_to_selection":"Shift+Z","jump_to_parents":"Shift+P","jump_to_children":"Shift+C","toggle_debug_view":""},"select":{"many":"Control"}}}')},"157b":function(e,t,i){},"1a8c":function(e,t,i){"use strict";i("b17c")},"1aaf":function(e,t,i){"use strict";i("a5cb")},"1bb6":function(e,t,i){"use strict";i("738f")},"1ce9":function(e,t,i){},"1d59":function(e,t,i){},"1dd9":function(e,t,i){"use strict";i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return r})),i.d(t,"e",(function(){return a})),i.d(t,"f",(function(){return l})),i.d(t,"g",(function(){return c})),i.d(t,"h",(function(){return d})),i.d(t,"i",(function(){return h})),i.d(t,"j",(function(){return u})),i.d(t,"k",(function(){return p})),i.d(t,"l",(function(){return g})),i.d(t,"m",(function(){return f})),i.d(t,"n",(function(){return b})),i.d(t,"o",(function(){return m})),i.d(t,"p",(function(){return y})),i.d(t,"d",(function(){return v}));var o=i("13c3");const s={Free:0,Grid:1},n=Object(o["j"])(s),r={Default:0,Pointer:2,Crosshair:4,Move:6,NotAllowed:8,Grab:10,Grabbing:12,N_Resize:14,E_Resize:16,S_Resize:18,W_Resize:20,EW_Resize:22,NS_Resize:24,Col_Resize:26,Row_Resize:28},a=Object(o["j"])(r),l={Off:0,Direct:32,Indirect:64},c=Object(o["j"])(l),d={False:0,True:128},h=Object(o["j"])(d),u={False:0,True:256},p=Object(o["j"])(u),g={Normal:512,High:1024},f=Object(o["j"])(g),b={Unselected:0,Single:2048,Multi:4096},m=Object(o["j"])(b),_={None:0,Node:8192,Edge:16384,EdgeSource:24576,EdgeTarget:32768},y=Object(o["j"])(_),v={[r.Default]:"default",[r.Pointer]:"pointer",[r.Crosshair]:"crosshair",[r.Move]:"move",[r.NotAllowed]:"not-allowed",[r.Grab]:"grab",[r.Grabbing]:"grabbing",[r.N_Resize]:"n-resize",[r.E_Resize]:"e-resize",[r.S_Resize]:"s-resize",[r.W_Resize]:"w-resize",[r.EW_Resize]:"ew-resize",[r.NS_Resize]:"ns-resize",[r.Col_Resize]:"col-resize",[r.Row_Resize]:"row-resize"}},"233b":function(e,t,i){"use strict";i("fd45")},"24a6":function(e,t,i){"use strict";i.d(t,"a",(function(){return o["a"]})),i.d(t,"d",(function(){return o["c"]})),i.d(t,"f",(function(){return o["f"]})),i.d(t,"n",(function(){return o["n"]})),i.d(t,"e",(function(){return o["d"]})),i.d(t,"q",(function(){return s["e"]})),i.d(t,"r",(function(){return s["m"]})),i.d(t,"i",(function(){return s["d"]})),i.d(t,"m",(function(){return n["g"]})),i.d(t,"l",(function(){return r["n"]})),i.d(t,"h",(function(){return r["l"]})),i.d(t,"p",(function(){return a["e"]})),i.d(t,"o",(function(){return l})),i.d(t,"j",(function(){return x})),i.d(t,"k",(function(){return B})),i.d(t,"g",(function(){return h})),i.d(t,"c",(function(){return E})),i.d(t,"b",(function(){return C}));var o=i("1dd9"),s=i("13c3"),n=i("5368"),r=i("cbc0"),a=i("317b");class l{static toGraph(e){let t,i=[],o=[];for(let s of e.getSubtree()){switch(s.getSemanticRole()){case a["e"].Node:t=o;break;case a["e"].Edge:t=i;break;default:continue}t.push({id:s.id,template:s.template,data:s.toExport(),prev:this.getPrevGraphLinks(s).map(e=>e.id),next:this.getNextGraphLinks(s).map(e=>e.id)})}return{edges:i,nodes:o}}static getNextGraphLinks(e){switch(e.getSemanticRole()){case a["e"].Edge:return this.getNodes(this.getEdgeTargetsFor(e));case a["e"].Node:return this.getEdges(this.getEdgeSourcesFor(e));default:return[]}}static getPrevGraphLinks(e){switch(e.getSemanticRole()){case a["e"].Edge:return this.getNodes(this.getEdgeSourcesFor(e));case a["e"].Node:return this.getEdges(this.getEdgeTargetsFor(e));default:return[]}}static getNodes(e){let t=[];for(let i of e){let e=this.getNode(i);e&&t.push(e)}return t}static getNode(e){if(!(e instanceof r["c"])||!e.hasRole(a["e"].EdgeSource)&&!e.hasRole(a["e"].EdgeTarget))return;let t=e.anchor;while(t){if(t.hasRole(a["e"].Node))return t;t=t.parent}}static getEdges(e){let t=[];for(let i of e){let e=this.getEdge(i);e&&t.push(e)}return t}static getEdge(e){if(!e.hasRole(a["e"].EdgeSource)&&!e.hasRole(a["e"].EdgeTarget))return;let t=e.parent;while(t){if(t.hasRole(a["e"].Edge))return t;t=t.parent}}static getEdgeSources(e){let t=[];for(let i of e)t=t.concat(this.getEdgeSourcesFor(i));return t}static getEdgeSourcesFor(e){if(!e.hasRole(a["e"].Edge)&&!e.hasRole(a["e"].Node))return[];let t=[e],i=[];while(t.length){let e=t.pop();if(e.hasRole(a["e"].EdgeSource))i.push(e);else for(let i of e.children)t.push(i)}return i}static getEdgeTargets(e){let t=[];for(let i of e)t=t.concat(this.getEdgeTargetsFor(i));return t}static getEdgeTargetsFor(e){if(!e.hasRole(a["e"].Edge)&&!e.hasRole(a["e"].Node))return[];let t=[e],i=[];while(t.length){let e=t.pop();if(e.hasRole(a["e"].EdgeTarget))i.push(e);else for(let i of e.children)t.push(i)}return i}}class c{constructor(e,t){this._object=e,this._parent=t}redo(){this._parent.addChild(this._object)}undo(){this._parent.removeChild(this._object.id,!0,!1)}}class d{constructor(e,t){this._object=e,this._anchor=t}redo(){this._anchor.addChild(this._object)}undo(){this._anchor.removeChild(this._object.id)}}var h,u=i("e37d");class p{constructor(e){if(!e.isAttached())throw new u["g"]("Object must be attached to an anchor.",e);this._object=e,this._anchor=e.anchor,this._index=e.getIndexInAnchor()}redo(){this._anchor.removeChild(this._object.id)}undo(){this._anchor.addChild(this._object,this._index)}}class g{constructor(e){this._actions=null!==e&&void 0!==e?e:[]}add(e){this._actions.push(e)}redo(){let e=0,t=this._actions.length;try{for(;e<t;e++)this._actions[e].redo()}catch(i){for(e--;0<=e;e--)this._actions[e].undo();throw i}}undo(){let e=this._actions.length-1;for(let t=e;0<=t;t--)this._actions[t].undo()}}class f{constructor(){this._undoStack=[],this._redoStack=[],this._transactions=[]}execute(e){Array.isArray(e)&&(e=new g(e)),this._transactions.length?this._transactions.at(-1).add(e):(e.redo(),this._redoStack=[],this._undoStack.push(e))}undo(){this._transactions=[],this._undoStack.length&&(this._undoStack.at(-1).undo(),this._redoStack.push(this._undoStack.pop()))}canUndo(){return 0<this._undoStack.length}redo(){this._transactions=[],this._redoStack.length&&(this._redoStack.at(-1).redo(),this._undoStack.push(this._redoStack.pop()))}canRedo(){return 0<this._redoStack.length}beginTransaction(){this._transactions.push(new g)}endTransaction(){if(!this._transactions.length)throw new Error("There are no open transactions.");this.execute(this._transactions.pop())}clearHistory(){this._undoStack=[],this._redoStack=[]}}class b{constructor(e,t){if(!e.parent)throw new u["g"]("Object must have a parent.",e);switch(this._object=e,this._parent=e.parent,this._prevIndex=e.getIndexInParent(),t){case h.Top:this._nextIndex=e.children.length;break;case h.OneAbove:this._nextIndex=this._prevIndex+1;break;case h.OneBelow:this._nextIndex=this._prevIndex-1;break;case h.Bottom:this._nextIndex=0;break}}redo(){this._parent.reorderChild(this._object.id,this._nextIndex)}undo(){this._parent.reorderChild(this._object.id,this._prevIndex)}}(function(e){e[e["Top"]=0]="Top",e[e["OneAbove"]=2]="OneAbove",e[e["OneBelow"]=3]="OneBelow",e[e["Bottom"]=4]="Bottom"})(h||(h={}));class m{constructor(e,t,i){this._object=e,this._dx=t,this._dy=i}redo(){this._object.moveBy(this._dx,this._dy)}undo(){this._object.moveBy(-this._dx,-this._dy)}}class _{constructor(e,t,i){this._object=e,this._lx=e.boundingBox.xMid,this._ly=e.boundingBox.yMid,this._nx=t,this._ny=i}redo(){this._object.moveTo(this._nx,this._ny)}undo(){this._object.moveTo(this._lx,this._ly)}}class y{constructor(...e){this._links=[],this._items=[];for(let i of e){if(!i.parent)throw new u["g"]("Object must have a parent.",i);this._items.push({index:i.getIndexInParent(),parent:i.parent,object:i})}let t=new Map;for(let i of this._items)for(let e of i.object.getSubtree())(e instanceof u["a"]||e instanceof u["b"])&&t.set(e.id,e);for(let i of t.values())if(i instanceof u["b"])i.isAttached()&&!t.has(i.anchor.id)&&this._links.push({index:i.getIndexInAnchor(),anchor:i.anchor,object:i});else if(i instanceof u["a"])for(let e of i.children)t.has(e.id)||this._links.push({index:e.getIndexInAnchor(),anchor:i,object:e})}redo(){for(let e of this._links)e.anchor.removeChild(e.object.id);for(let e of this._items)e.parent.removeChild(e.object.id,!0,!1)}undo(){for(let e of this._items)e.parent.addChild(e.object,e.index);for(let e of this._links)e.anchor.addChild(e.object,e.index)}}class v{constructor(e){this._obj=e}redo(){this._obj.setPositionSetByUser(o["j"].True)}undo(){this._obj.setPositionSetByUser(o["j"].False)}}class x{constructor(e){this.page=e,this._controller=new f}addObject(e,t=this.page.id){let i=this.page.lookup(t);if(!i)throw new Error(`Parent '${t}' does not exist.`);this._controller.execute(new c(e,i))}addLineObject(e,t,i,o=this.page.id){let s=this.page.lookup(o);if(!s)throw new Error(`Parent '${o}' does not exist.`);let n=new g;n.add(new c(e,s));let a=this.page.lookup(t),l=a instanceof r["b"];if(!l)throw new Error(`Invalid anchor '${t}'.`);{let{xMid:t,yMid:i}=a.boundingBox;n.add(new _(e.srcEnding,t,i)),n.add(new d(e.srcEnding,a))}if(i){let t=this.page.lookup(i),o=t instanceof r["b"];if(!o)throw new Error(`Invalid anchor '${i}'.`);{let{xMid:i,yMid:o}=t.boundingBox;n.add(new _(e.trgEnding,i,o)),n.add(new d(e.trgEnding,t))}}this._controller.execute(n)}removeObjects(...e){let t=[];for(let i of e){let e=this.page.lookup(i);if(!e)throw new Error(`'${i}' does not exist.`);t.push(e)}this._controller.execute(new y(...t))}attach(e,t){let i=this.page.lookup(e),o=this.page.lookup(t),s=i instanceof r["c"],n=o instanceof r["b"];if(!s||!n)throw new Error(`Invalid link '${e}' -> '${t}'.`);{let e=new g;i.isAttached()&&e.add(new p(i));let{xMid:t,yMid:s}=o.boundingBox;e.add(new _(i,t,s)),e.add(new d(i,o)),this._controller.execute(e)}}detach(e){let t=this.page.lookup(e),i=t instanceof r["c"];if(!i||!t.isAttached())throw new Error(`Invalid object '${e}'.`);this._controller.execute(new p(t))}moveObjectsBy(e,t,i){let o;if(Array.isArray(e)){o=new g;for(let s of e){let e=this.page.lookup(s);if(!e)throw new Error(`'${s}' does not exist.`);e.hasUserSetPosition()||o.add(new v(e)),o.add(new m(e,t,i))}}else{let s=this.page.lookup(e);if(!s)throw new Error(`'${e}' does not exist.`);o=s.hasUserSetPosition()?new m(s,t,i):new g([new v(s),new m(s,t,i)])}this._controller.execute(o)}moveObjectsTo(e,t,i){let o;if(Array.isArray(e)){o=new g;for(let s of e){let e=this.page.lookup(s);if(!e)throw new Error(`'${s}' does not exist.`);e.hasUserSetPosition()||o.add(new v(e)),o.add(new _(e,t,i))}}else{let s=this.page.lookup(e);if(!s)throw new Error(`'${e}' does not exist.`);o=s.hasUserSetPosition()?new _(s,t,i):new g([new v(s),new _(s,t,i)])}this._controller.execute(o)}reorderObjectLayer(e,t){let i=this.page.lookup(e);if(!i)throw new Error(`'${e}' does not exist.`);this._controller.execute(new b(i,t))}setCameraLocation(e){this.page.location=e}undo(){this._controller.undo()}canUndo(){return this._controller.canUndo()}redo(){this._controller.redo()}canRedo(){return this._controller.canRedo()}beginTransaction(){this._controller.beginTransaction()}endTransaction(){this._controller.endTransaction()}}class k{constructor(){this._scale=1,this._cache=new Map}createRaster(e,t,i,o=0){let s=new j(t,i,o,this._scale);return this._cache.set(e,s),s}drawRaster(e,t,i,o){let s=this._cache.get(t);return!!s&&(e.drawImage(s.canvas,i-s.cx,o-s.cy,s.w,s.h),!0)}setScale(e){this._scale=e,this._cache.clear()}getScale(){return this._scale}}class j{constructor(e,t,i,o){let s=i<<1;this.canvas=document.createElement("canvas"),this.canvas.width=Math.round((e+s)*o),this.canvas.height=Math.round((t+s)*o),this.context=this.canvas.getContext("2d"),this.context.setTransform(o,0,0,o,0,0),this.h=t+s,this.w=e+s,this.cx=Math.round(this.w/2),this.cy=Math.round(this.h/2),this.p=i}set fillStyle(e){this.context.fillStyle=e}set font(e){this.context.font=e}set lineWidth(e){this.context.lineWidth=e}set strokeStyle(e){this.context.strokeStyle=e}set textBaseline(e){this.context.textBaseline=e}beginPath(){this.context.beginPath()}closePath(){this.context.closePath()}moveTo(e,t){this.context.moveTo(this.p+e,this.p+t)}lineTo(e,t){this.context.lineTo(this.p+e,this.p+t)}stroke(){this.context.stroke()}fill(){this.context.fill()}fillText(e,t,i){this.context.fillText(e,t,i)}drawRect(e,t,i,o,s,n=1){e+=this.p+n/2,t+=this.p+n/2,i-=n,o-=n,s="number"===typeof s?{tl:s,tr:s,br:s,bl:s}:Object.assign({tl:0,tr:0,br:0,bl:0},s);let r=this.context;r.beginPath(),r.moveTo(e+s.tl,t),r.lineTo(e+i-s.tr,t),r.quadraticCurveTo(e+i,t,e+i,t+s.tr),r.lineTo(e+i,t+o-s.br),r.quadraticCurveTo(e+i,t+o,e+i-s.br,t+o),r.lineTo(e+s.bl,t+o),r.quadraticCurveTo(e,t+o,e,t+o-s.bl),r.lineTo(e,t+s.tl),r.quadraticCurveTo(e,t,e+s.tl,t),r.closePath()}}var w=i("898b");class S{constructor(){this.xMin=0,this.yMin=0,this.xMax=0,this.yMax=0,this.scale=1}}class O{constructor(e,t){this.dx=0,this.dy=0,this.ox=0,this.oy=0,this.odx=0,this.ody=0,this.anchor=void 0,this._cx=0,this._cy=0,this._cdx=0,this._cdy=0,this._alignment=o["a"].Free,this._gridX=e,this._gridY=t,this._anchors=[]}reset(e,t,i,o,s,n){this.dx=0,this.dy=0,this.ox=o,this.oy=s,this.odx=0,this.ody=0,this.anchor=void 0,this._cx=t,this._cy=i,this._cdx=0,this._cdy=0,this._alignment=e,this._anchors=null!==n&&void 0!==n?n:[]}updateDelta(e,t){this._cdx+=e,this._cdy+=t;let i,n,r,a,l=this._cx+this._cdx,c=this._cy+this._cdy;for(let o of this._anchors)if(a=o.boundingBox,i=o.radius,n=a.xMid-l,r=a.yMid-c,n*n+r*r<i*i)return this.dx=a.xMid-(this.ox+this.odx),this.dy=a.yMid-(this.oy+this.ody),this.odx+=this.dx,this.ody+=this.dy,void(this.anchor=o);switch(this.anchor=void 0,this._alignment){case o["a"].Grid:this.dx=Object(s["m"])(this._cdx,this._gridX)-this.odx,this.dy=Object(s["m"])(this._cdy,this._gridY)-this.ody;break;case o["a"].Free:default:this.dx=this._cdx-this.odx,this.dy=this._cdy-this.ody;break}this.odx+=this.dx,this.ody+=this.dy}}class M{constructor(){this.showGrid=!0,this.showShadows=!0,this.showDebug=!1,this.ssaaScale=1,this.shadowsDisableAt=0}}var T,A=i("a80d");class C extends s["a"]{constructor(){super();let e=r["n"].createDummy(),t=new k;this._canvas=null,this._context=null,this._display=new M,this._elWidth=0,this._elHeight=0,this._mover=new O(...e.grid),this._page=e.createView(t),this._rafId=0,this._rasterCache=t,this._resizeObserver=null,this._transform=w["e"],this._viewport=new S,this._ztoId=0,this._zoom=w["d"]().scaleExtent([1/8,6]).on("zoom",this.onCanvasZoom.bind(this)).on("end",e=>this.onCanvasZoomEnd(e)),this._hovObj=null}setPage(e){this._page=e.createView(this._rasterCache),this._mover=new O(...e.grid)}inject(e){this._elWidth=e.clientWidth,this._elHeight=e.clientHeight,this._canvas=w["c"](e).append("canvas").attr("style","display:block;").attr("width",this._elWidth).attr("height",this._elHeight).on("mousemove",e=>{this.onHoverSubject(...w["b"](e))}).on("contextmenu",e=>e.preventDefault()),this._context=this._canvas.node().getContext("2d",{alpha:!1}),this._resizeObserver=new ResizeObserver(e=>this.onCanvasResize(e[0].target)),this._resizeObserver.observe(e),this._canvas.call(w["a"]().filter(()=>!0).subject(this.onSelectSubject.bind(this)).on("start",this.onObjectDragStarted.bind(this)).on("drag",this.onObjectDragged.bind(this)).on("end",this.onObjectDragEnded.bind(this))).call(this._zoom),this.updateView(0)}destroy(){var e,t;null===(e=this._canvas)||void 0===e||e.remove(),this._canvas=null,this._context=null,this.removeAllListeners(),null===(t=this._resizeObserver)||void 0===t||t.disconnect()}on(e,t){super.on(e,t)}once(e,t){super.once(e,t)}removeAllListeners(e){super.removeAllListeners(e)}emit(e,...t){super.emit(e,...t)}setGridDisplay(e){this._display.showGrid=e}setShadowsDisplay(e){this._display.showShadows=e}setDebugDisplay(e){this._display.showDebug=e}setSsaaScale(e){this._display.ssaaScale=e,this._rasterCache.setScale(e)}setShadowsDisableAt(e){this._display.shadowsDisableAt=e}render(){0==this._rafId&&(this._rafId=requestAnimationFrame(()=>{this._rafId=0,this.executeRenderPipeline()}))}executeRenderPipeline(){if(null===this._context)return;let e=this._display;this._page.renderPageSurfaceTo(this._context,this._viewport,e.showGrid),e.showShadows&&e.shadowsDisableAt<=this._transform.k?this._page.renderTo(this._context,this._viewport):this._page.renderTo(this._context,this._viewport,0,0),e.showDebug&&this._page.renderDebugTo(this._context,this._viewport)}onHoverSubject(e,t,i){var s;e=this._transform.invertX(e),t=this._transform.invertY(t);let n=this._page.el.getObjectAt(e,t);this._hovObj!==n&&(this._hovObj=n,i=null!==(s=null!==i&&void 0!==i?i:null===n||void 0===n?void 0:n.getCursor())&&void 0!==s?s:o["c"].Default,this.emit("object-hover",n,i))}onSelectSubject(e){let t,i=e.sourceEvent,o=this._transform.invertX(e.x),n=this._transform.invertY(e.y),a=this._page.el.getObjectAt(o,n),l=i.button===s["d"].Right;if(a){if(a instanceof r["b"]){if(this.emit("canvas-click",i,e.x,e.y),l)return;let t=a.makeLine(),o=a.boundingBox.xMid,s=a.boundingBox.yMid;t.srcEnding.moveTo(o,s),t.trgEnding.moveTo(o,s);let n=t.createView(this._rasterCache).updateView();return{type:T.CreateLine,line:n,parent:this._page,anchor:a,obj:n.trgEnding}}if(a.parent instanceof r["d"]){if(this.emit("object-click",i,a.parent,e.x,e.y),l)return;t=[this._page.lookup(a.id)]}else{if(this.emit("object-click",i,a,e.x,e.y),l)return;t=this._page.selects}return t[0]instanceof A["c"]&&1===t.length?{type:T.MoveAnchorable,obj:t[0]}:{type:T.Move,objs:t}}this.emit("canvas-click",i,e.x,e.y)}onObjectDragStarted(e){let t=e.subject,i=this._transform.invertX(e.x),s=this._transform.invertY(e.y),n=0,r=0,a=o["a"].Free,l=void 0;switch(t.type){case T.Move:for(let e of t.objs)n+=e.x,r+=e.y,a=Math.max(a,e.el.getAlignment());n/=t.objs.length,r/=t.objs.length;break;case T.CreateLine:t.parent.children.push(t.line);case T.MoveAnchorable:n=t.obj.x,r=t.obj.y,a=t.obj.el.getAlignment(),l=this._page.el.anchorCache;break}this._mover.reset(a,i,s,n,r,l)}onObjectDragged(e){let t,i=e.subject;switch(this._mover.updateDelta(e.dx/this._transform.k,e.dy/this._transform.k),i.type){case T.Move:for(let e of i.objs)t=e.fakePositionSetByUser(o["j"].True),e.moveBy(this._mover.dx,this._mover.dy,t);break;case T.CreateLine:i.obj.el.moveBy(this._mover.dx,this._mover.dy);case T.MoveAnchorable:this.onHoverSubject(e.x,e.y,i.obj.el.getCursor()),t=i.obj.fakePositionSetByUser(o["j"].True),i.obj.moveBy(this._mover.dx,this._mover.dy,t);break}this.render()}onObjectDragEnded(e){let t=e.subject,i=this._mover.odx,o=this._mover.ody;switch(t.type){case T.Move:if(!i&&!o)return;let e=t.objs.map(e=>e.el);this.emit("object-move",e,i,o);break;case T.MoveAnchorable:if(!i&&!o)return;if(this._mover.anchor){let e=this._mover.anchor,i=t.obj.el;this.emit("object-attach",i,e)}else if(t.obj.el.isAttached()){let e=t.obj.el;this.emit("object-detach",e,i,o)}else{let e=[t.obj.el];this.emit("object-move",e,i,o)}break;case T.CreateLine:if((i||o)&&t.anchor!==this._mover.anchor){let e=t.line.el,i=t.parent.el,o=t.anchor,s=this._mover.anchor;this.emit("line-create",e,i,o,s)}else this.updateView(0);break}}onCanvasZoom(e){var t;this._transform.k!==e.transform.k&&(clearTimeout(this._ztoId),this._ztoId=setTimeout(()=>{let e=this._transform.k*this._display.ssaaScale;this._rasterCache.getScale()!==e&&(this._rasterCache.setScale(e),this.render())},C.RASTER_CACHE_UPDATE_DELAY)),this._transform=e.transform,this.updateViewportBounds(),null===(t=this._context)||void 0===t||t.setTransform(this._transform.k,0,0,this._transform.k,this._transform.x,this._transform.y),null===e.sourceEvent?0===this._rafId&&this.executeRenderPipeline():this.render()}onCanvasZoomEnd(e){this.emit("canvas-transform",this._transform.x,this._transform.y,this._transform.k);let[t,i]=this.getCameraOriginOffset();e.sourceEvent&&this.emit("camera-move",{type:r["l"].Point,x:(t-this._transform.x)/this._transform.k,y:(i-this._transform.y)/this._transform.k,k:this._transform.k})}onCanvasResize(e){var t,i,o;let s=e.clientWidth,n=e.clientHeight;this._transform.x+=(s-this._elWidth)/2,this._transform.y+=(n-this._elHeight)/2,this._elWidth=s,this._elHeight=n,null===(i=null===(t=this._canvas)||void 0===t?void 0:t.attr("width",this._elWidth))||void 0===i||i.attr("height",this._elHeight),this.updateViewportBounds(),null===(o=this._context)||void 0===o||o.setTransform(this._transform.k,0,0,this._transform.k,this._transform.x,this._transform.y),this._context&&this.executeRenderPipeline()}updateViewportBounds(){let e=this._transform,t=C.VIEWPORT_PADDING;this._viewport.xMin=Math.round(e.invertX(-t)),this._viewport.xMax=Math.round(e.invertX(this._elWidth+t)),this._viewport.yMin=Math.round(e.invertY(-t)),this._viewport.yMax=Math.round(e.invertY(this._elHeight+t)),this._viewport.scale=e.k}getCameraOriginOffset(){return[Math.round(this._elWidth/2),Math.round(this._elHeight/2)]}updateView(e=1e3){if(this._page.updateView(),!this._canvas)return;let{location:t}=this._page.el,[i,o,n]=[...this.getCameraOriginOffset(),1];switch(t.type){case r["l"].Point:n=t.k,i-=t.x*n,o-=t.y*n;break;case r["l"].Region:let e=t.w/this._elWidth,s=t.h/this._elHeight,a=Math.max(e,s);n=Math.min(.9/a,1.5),i=Math.round(i-t.x*n),o=Math.round(o-t.y*n);break}let a=this._transform;Object(s["i"])(a.x,i)&&Object(s["i"])(a.y,o)&&Object(s["i"])(a.k,n)?this.render():this._canvas.transition().duration(e).call(this._zoom.transform,w["e"].translate(i,o).scale(n))}}C.VIEWPORT_PADDING=0,C.RASTER_CACHE_UPDATE_DELAY=100,function(e){e[e["Move"]=0]="Move",e[e["MoveAnchorable"]=1]="MoveAnchorable",e[e["CreateLine"]=2]="CreateLine"}(T||(T={}));class B{constructor(e,t=30,i=!0,o=!0,s=!1){this._page=e,this._padding=t,this._showGrid=i,this._showShadows=o,this._showDebug=s}capture(e){let t,i,o,s;if(null===e||void 0===e?void 0:e.length){t=1/0,i=1/0,o=-1/0,s=-1/0;for(let n of e){let e=this._page.lookup(n);if(!e)throw new Error(`'${n}' does not exist.`);t=Math.min(t,e.boundingBox.xMin),i=Math.min(i,e.boundingBox.yMin),o=Math.max(o,e.boundingBox.xMax),s=Math.max(s,e.boundingBox.yMax)}}else t=this._page.boundingBox.xMin,i=this._page.boundingBox.yMin,o=this._page.boundingBox.xMax,s=this._page.boundingBox.yMax;let n=new k,r=this._page.createView(n);r.updateView();let a=document.createElement("canvas");a.width=Math.round(o-t)+2*this._padding,a.height=Math.round(s-i)+2*this._padding;let l=a.getContext("2d");l.setTransform(1,0,0,1,-t+this._padding,-i+this._padding);let c=new S;return c.xMin=t-this._padding,c.yMin=i-this._padding,c.xMax=o+this._padding,c.yMax=s+this._padding,r.renderPageSurfaceTo(l,c,this._showGrid),this._showShadows?r.renderTo(l,c):r.renderTo(l,c,0,0),this._showDebug&&r.renderDebugTo(l,c),a}}var P=i("9ab4"),D=i("fa17"),R=i("9224");class E{constructor(e,t,i,o){this.name=e,this.factory=t,this.page=i,this.editor=new x(i),this.apiVersion=o}static createDummy(){return new this("@__builtin__dummy_document",a["c"].createDummy(),r["n"].createDummy(),"0.0.0")}static create(e,t){return Object(P["a"])(this,void 0,void 0,(function*(){let i=yield a["c"].create(t),o=i.createObject(t.page_template);return new this(e,i,o,R.version)}))}static deserialize(e){return Object(P["a"])(this,void 0,void 0,(function*(){e.constructor.name===String.name&&(e=JSON.parse(e)),e=e;let t=Object.assign(Object.assign({},e.schema),structuredClone(D["a"].schema)),i=yield a["c"].create(t),o=new Map;for(let r of e.objects)o.set(r.id,r);let s=o.get(e.page),n=function e(t,i,s,n){if(!s.has(t.id)){let r=[];for(let l of t.children)r.push(e(o.get(l),i,s,n));let a=n.createObject(Object.assign(Object.assign({},t),{children:r}));s.set(a.id,a)}return s.get(t.id)}(s,o,new Map,i);return new this(e.name,i,n,e.api_version)}))}toExport(){return{api_version:this.apiVersion,name:this.name,schema:this.factory.getSchema(),page:this.page.id,objects:[...this.page.getSubtree()].map(e=>e.toExport())}}}},"281e":function(e,t,i){"use strict";i("28d6")},"28d6":function(e,t,i){},"317b":function(e,t,i){"use strict";i.d(t,"d",(function(){return o})),i.d(t,"f",(function(){return s})),i.d(t,"e",(function(){return n})),i.d(t,"a",(function(){return r})),i.d(t,"b",(function(){return l})),i.d(t,"c",(function(){return u}));class o extends Error{constructor(e){super(e)}}var s,n,r;(function(e){e[e["AnchorPoint"]=0]="AnchorPoint",e[e["DictionaryBlock"]=1]="DictionaryBlock",e[e["LineEndingPoint"]=2]="LineEndingPoint",e[e["LineHandlePoint"]=3]="LineHandlePoint",e[e["LineHorizontalElbow"]=4]="LineHorizontalElbow",e[e["LineVerticalElbow"]=5]="LineVerticalElbow",e[e["Page"]=6]="Page",e[e["TextBlock"]=7]="TextBlock",e[e["OperatorBlock"]=8]="OperatorBlock"})(s||(s={})),function(e){e[e["None"]=0]="None",e[e["Node"]=8192]="Node",e[e["Edge"]=16384]="Edge",e[e["EdgeSource"]=24576]="EdgeSource",e[e["EdgeTarget"]=32768]="EdgeTarget"}(n||(n={})),function(e){e[e["DEG_0"]=0]="DEG_0",e[e["DEG_90"]=1]="DEG_90"}(r||(r={}));const a="@__builtin__",l=[{id:a+"page",name:"Page",type:s.Page,role:n.None,grid:[10,10],style:{grid_color:"#1d1d1d",background_color:"#141414",drop_shadow:{color:"rgba(0,0,0,.4)",offset:[3,3]}}},{id:a+"anchor",name:"Anchor",type:s.AnchorPoint,role:n.None,radius:10,line_templates:{[r.DEG_0]:a+"line_horizontal_elbow",[r.DEG_90]:a+"line_vertical_elbow"},style:{color:"rgba(255, 255, 255, 0.25)"}},{id:a+"line_handle",name:"Line Handle",type:s.LineHandlePoint,role:n.None,style:{radius:6,fill_color:"#fedb22",stroke_color:"#141414",stroke_width:1.5}},{id:a+"line_source",name:"Line Source",type:s.LineEndingPoint,role:n.EdgeSource,style:{radius:6,fill_color:"#fedb22",stroke_color:"#141414",stroke_width:1.5}},{id:a+"line_target",name:"Line Target",type:s.LineEndingPoint,role:n.EdgeTarget,style:{radius:6,fill_color:"#fedb22",stroke_color:"#141414",stroke_width:1.5}},{id:a+"line_horizontal_elbow",name:"Horizontal Elbow",type:s.LineHorizontalElbow,role:n.Edge,hitbox_width:20,line_handle_template:a+"line_handle",line_ending_template:{source:a+"line_source",target:a+"line_target"},style:{width:5,cap_size:16,color:"#646464",select_colors:{solo_color:"#646464",many_color:"#646464"}}},{id:a+"line_vertical_elbow",name:"Vertical Elbow",type:s.LineVerticalElbow,role:n.Edge,hitbox_width:20,line_handle_template:a+"line_handle",line_ending_template:{source:a+"line_source",target:a+"line_target"},style:{width:5,cap_size:16,color:"#646464",select_colors:{solo_color:"#646464",many_color:"#646464"}}}];var c=i("9ab4"),d=i("13c3"),h=i("cbc0");class u{constructor(e,t){this.schema=e,this.templates=t}static createDummy(){return new this({page_template:"",templates:[]},new Map)}static create(e){return Object(c["a"])(this,void 0,void 0,(function*(){let t=structuredClone(e),i=new Set;for(let e of t.templates){if(i.has(e.id))throw new o(`Template '${e.id}' can only be defined once.`);i.add(e.id)}let s=new Map;for(let e of[...l,...t.templates])s.set(e.id,e);let n=[];for(let e of s.values())n=n.concat(this.getFontDescriptorsFromTemplate(e));yield d["c"].loadFonts(n);for(let e of s.values())this.swapFontDescriptorsWithFonts(e);return new this(e,s)}))}getTemplate(e){return this.templates.get(e)}getBlockTemplates(){let e=[];for(let t of this.templates.values())switch(t.type){case s.DictionaryBlock:case s.OperatorBlock:e.push(t);break}return e}getLineTemplates(){let e=[];for(let t of this.templates.values())switch(t.type){case s.LineVerticalElbow:case s.LineHorizontalElbow:e.push(t);break}return e}createObject(e){let t,i;e instanceof Object?(t=e.template,i=e):t=e;let n=this.templates.get(t);if(!n)throw new o(`Template '${t}' does not exist.`);switch(n.type){case s.Page:return new h["n"](this,n,i);case s.AnchorPoint:return new h["a"](this,n,i);case s.DictionaryBlock:return new h["f"](this,n,i);case s.LineEndingPoint:return new h["h"](this,n,i);case s.LineHandlePoint:return new h["i"](this,n,i);case s.LineVerticalElbow:return new h["k"](this,n,i);case s.LineHorizontalElbow:return new h["j"](this,n,i);case s.OperatorBlock:return new h["m"](this,n,i)}}cloneObjects(...e){let t=new Map,i=new Map,o=e.map(e=>this.cloneObject(e,t,i));for(let[s,n]of i)for(let e of n){let i=t.get(e);i&&s.addChild(i)}return o}cloneObject(e,t,i){if(e instanceof h["b"]){let o=this.createObject(Object.assign(Object.assign({},e.toExport()),{id:crypto.randomUUID(),children:[]}));return t.set(e.id,o),i.set(o,e.children.map(e=>e.id)),o}let o=[];for(let n of e.children)o.push(this.cloneObject(n,t,i));let s=this.createObject(Object.assign(Object.assign({},e.toExport()),{id:crypto.randomUUID(),children:o}));return t.set(e.id,s),s}static getFontDescriptorsFromTemplate(e){let t;switch(e.type){case s.DictionaryBlock:return t=e.style,[t.head.title.font,t.head.subtitle.font,t.body.field_name.font,t.body.field_value.font];case s.OperatorBlock:return t=e.style,[t.text.font];default:return[]}}static swapFontDescriptorsWithFonts(e){let t=d["c"].getFont.bind(d["c"]);switch(e.type){case s.DictionaryBlock:let{head:i,body:o}=e.style;i.title.font=t(i.title.font),i.subtitle.font=t(i.subtitle.font),o.field_name.font=t(o.field_name.font),o.field_value.font=t(o.field_value.font);break;case s.OperatorBlock:let{text:n}=e.style;n.font=t(n.font);break;default:break}}getSchema(){let e=[];for(let t of this.templates.values()){let i=JSON.stringify(t,(e,t)=>t instanceof d["b"]?t.descriptor:t);e.push(JSON.parse(i))}return{page_template:this.schema.page_template,templates:e}}}},"3c97":function(e,t,i){},"442f":function(e,t,i){"use strict";i("8d0a")},"4ebf":function(e,t,i){"use strict";i("3c97")},5368:function(e,t,i){"use strict";var o;i.d(t,"g",(function(){return o})),i.d(t,"f",(function(){return s})),i.d(t,"b",(function(){return n})),i.d(t,"h",(function(){return r})),i.d(t,"e",(function(){return a})),i.d(t,"a",(function(){return c})),i.d(t,"c",(function(){return d})),i.d(t,"d",(function(){return h})),function(e){e[e["Int"]=0]="Int",e[e["Float"]=1]="Float",e[e["String"]=2]="String",e[e["Date"]=3]="Date",e[e["Dropdown"]=4]="Dropdown",e[e["List"]=5]="List",e[e["Dictionary"]=6]="Dictionary"}(o||(o={}));class s{constructor(e){this.type=e.type,this.descriptor=e}static create(e,t){switch(e.type){case o.String:return new r(e,t);case o.Int:case o.Float:return new a(e,t);case o.Date:return new n(e,t);case o.List:return new h(e,t);case o.Dictionary:return new d(e,t);default:throw new Error(`Unknown property type: '${e.type}'.`)}}}class n extends s{constructor(e,t){super(e),this.descriptor=e,this.value="string"===typeof t?new Date(t):e.value}toRawValue(){return this.value.toISOString()}toString(){return""+this.value}}class r extends s{constructor(e,t){super(e),this.descriptor=e,this.value=""+(null!==t&&void 0!==t?t:e.value)}toRawValue(){return this.value}toString(){return this.value}}class a extends s{constructor(e,t){super(e),this.descriptor=e,this.value="number"===typeof t?t:e.value}toRawValue(){return this.value}toString(){return""+this.value}}var l=i("13c3");class c extends s{constructor(e){super(e),this.descriptor=e,this.value=new Map}getHash(){return Object(l["f"])([...this.value.values()].map(e=>e.toString()).join("."))}toRawValue(){return[...this.value.entries()].map(([e,t])=>[e,t.toRawValue()])}}class d extends c{constructor(e,t){var i;super(e),this.descriptor=e,this.value=new Map;for(let o in e.form){let n=null===(i=null===t||void 0===t?void 0:t.find(e=>e[0]===o))||void 0===i?void 0:i.at(1);this.value.set(o,s.create(e.form[o],n))}}toString(){var e,t;let i=this.descriptor.text_key;return null!==(t=null===(e=this.value.get(i))||void 0===e?void 0:e.toString())&&void 0!==t?t:`Unknown key: '${i}'`}}class h extends c{constructor(e,t){if(super(e),this.descriptor=e,this.value=new Map,Array.isArray(t))for(let[i,o]of t){let t=s.create(e.form,o);this.value.set(i,t)}else if(e.values)for(let i of e.values){let t=crypto.randomUUID(),o=s.create(e.form,i);this.value.set(t,o)}}addItem(){let e=crypto.randomUUID(),t=s.create(this.descriptor.form);this.value.set(e,t)}deleteItem(e){this.value.delete(e)}toString(){return[...this.value.values()].map(e=>e.toString()).join(", ")}}},"5dbc":function(e,t,i){"use strict";i("63e5")},"61f7":function(e,t,i){"use strict";i("1ce9")},"63e5":function(e,t,i){},"69ee":function(e,t,i){"use strict";var o=i("7a23");const s={class:"object-field-contents-input"},n={class:"field-name"};function r(e,t,i,r,a,l){return Object(o["q"])(),Object(o["f"])("div",s,[(Object(o["q"])(!0),Object(o["f"])(o["a"],null,Object(o["w"])(e.property.value,([t,i])=>(Object(o["q"])(),Object(o["f"])("div",{class:"field-item",key:t},[Object(o["g"])("p",n,Object(o["A"])(e.titleCase(t)),1),(Object(o["q"])(),Object(o["d"])(Object(o["z"])(e.getField(i.type)),{property:i,align:e.align,onChange:e.onChange},null,40,["property","align","onChange"]))]))),128))])}var a=i("24a6");const l=Object(o["j"])(()=>i.e("chunk-50298a5f").then(i.bind(null,"a23f"))),c=Object(o["j"])(()=>i.e("chunk-7fe1654d").then(i.bind(null,"2de3"))),d=Object(o["j"])(()=>i.e("chunk-46cf60ae").then(i.bind(null,"f090")));var h=Object(o["k"])({name:"DictionaryFieldContents",props:{property:{type:Object,required:!0},align:{type:String,default:"left"}},methods:{getField(e){switch(e){case a["m"].String:return"TextField";case a["m"].List:return"ListField";case a["m"].Dictionary:return"DictionaryField"}},onChange(e,t){this.$emit("change",e,t)},capitalize(e){return`${e[0].toLocaleUpperCase()}${e.substring(1)}`},titleCase(e){return e.split(/\s+|_/).map(e=>this.capitalize(e)).join(" ")}},emits:["change"],components:{TextField:l,ListField:c,DictionaryField:d}}),u=(i("f0b6"),i("6b0d")),p=i.n(u);const g=p()(h,[["render",r],["__scopeId","data-v-72f7aae2"]]);t["a"]=g},"6e0f":function(e,t,i){},"738f":function(e,t,i){},"8d0a":function(e,t,i){},9224:function(e){e.exports=JSON.parse('{"name":"attack-flow-builder","version":"0.1.0","private":true,"scripts":{"serve":"vue-cli-service serve","build":"vue-cli-service build"},"author":"mcarenzo","dependencies":{"vue":"^3.0.0","vuex":"^4.0.0-0"},"devDependencies":{"@types/d3":"^7.4.0","@types/resize-observer-browser":"^0.1.7","@vue/cli-plugin-typescript":"~4.5.15","@vue/cli-plugin-vuex":"~4.5.15","@vue/cli-service":"~4.5.15","@vue/compiler-sfc":"^3.0.0","d3":"^7.4.4","standard-version":"^9.3.2","typescript":"^4.1.5"},"browserslist":["> 1%","last 2 versions","not dead"]}')},"97e0":function(e,t,i){},a5cb:function(e,t,i){},a80d:function(e,t,i){"use strict";i.d(t,"f",(function(){return s})),i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return r})),i.d(t,"d",(function(){return a})),i.d(t,"e",(function(){return c})),i.d(t,"g",(function(){return d})),i.d(t,"i",(function(){return h})),i.d(t,"j",(function(){return u})),i.d(t,"k",(function(){return g})),i.d(t,"l",(function(){return f})),i.d(t,"a",(function(){return b})),i.d(t,"h",(function(){return m})),i.d(t,"m",(function(){return _})),i.d(t,"n",(function(){return y}));var o=i("1dd9");class s{constructor(e,t){this.el=e,this.x=e.boundingBox.xMid,this.y=e.boundingBox.yMid,this.parent=void 0,this.children=[],this._rasterCache=t}*getSubtree(e){let t=new Set([this.el.id]),i=[this];while(0!=i.length){let o=i.shift();if(e&&!e(o)||(yield o),!(o instanceof n))for(let e of o.children)t.has(e.el.id)||(t.add(e.el.id),i.push(e))}}moveTo(e,t,i){this.moveBy(e-this.x,t-this.y)}moveBy(e,t,i){this.x+=e,this.y+=t;for(let o of this.children)o instanceof r&&o.el.isAttached()||o.moveBy(e,t)}renderTo(e,t,i=0,o=0,s){if(this.isVisible(t))for(let n of this.children)n.renderTo(e,t,i,o)}renderDebugTo(e,t){if(!this.isVisible(t))return;for(let o of this.children)o.renderDebugTo(e,t);let i=this.el.boundingBox;e.beginPath(),e.moveTo(i.xMin+.5,i.yMin+.5),e.lineTo(i.xMax-.5,i.yMin+.5),e.lineTo(i.xMax-.5,i.yMax-.5),e.lineTo(i.xMin+.5,i.yMax-.5),e.lineTo(i.xMin+.5,i.yMin+.5),e.lineTo(i.xMax-.5,i.yMax-.5),e.stroke()}isVisible(e){let{xMin:t,yMin:i,xMax:o,yMax:s}=this.el.boundingBox;return e.xMin<=o&&e.xMax>=t&&e.yMin<=s&&e.yMax>=i}updateView(){let e=new Array(this.el.children.length);for(let t=0;t<e.length;t++){let i=this.el.children[t].id,o=this.children.find(e=>e.el.id===i);e[t]=null!==o&&void 0!==o?o:this.el.children[t].createView(this._rasterCache),e[t].parent=this,e[t].updateView()}return this.children=e,this.x=this.el.boundingBox.xMid,this.y=this.el.boundingBox.yMid,this}fakeAlignment(e){return this.el.attrs&~o["b"]|e}fakeCursor(e){return this.el.attrs&~o["e"]|e}fakeHover(e){return this.el.attrs&~o["g"]|e}fakeInheritAlignment(e){return this.el.attrs&~o["i"]|e}fakePositionSetByUser(e){return this.el.attrs&~o["k"]|e}fakePriority(e){return this.el.attrs&~o["m"]|e}fakeSelect(e){return this.el.attrs&~o["o"]|e}}class n extends s{constructor(e,t){super(e,t),this.children=[],this.el=e}moveBy(e,t,i){this.x+=e,this.y+=t;for(let o of this.children)o.el.isAttached(this.el)?o.moveTo(this.x,this.y):console.warn(`'${o.el.id}' incorrectly attached to anchor.`)}updateView(){return this.x=this.el.boundingBox.xMid,this.y=this.el.boundingBox.yMid,this}}class r extends s{constructor(e,t){super(e,t),this.el=e}}class a extends r{constructor(e,t){super(e,t),this.el=e}moveBy(e,t,i,o=!1){var s;o?super.moveBy(e,t,i):null===(s=this.parent)||void 0===s||s.moveChild(this.el.id,e,t,i)}}class l extends s{constructor(e,t){super(e,t),this.el=e}moveBy(e,t,i,o=!1){var s;o?super.moveBy(e,t,i):null===(s=this.parent)||void 0===s||s.moveChild(this.el.id,e,t,i)}}class c extends s{constructor(e,t){super(e,t),this.el=e,this.children=[]}get srcEnding(){return this.children.at(0)}get trgEnding(){return this.children.at(-1)}}class d extends s{constructor(e,t){super(e,t),this.el=e,this._objectCache=new Map}renderDebugTo(e,t){e.save(),e.lineWidth=1,e.fillStyle="#00ff00",e.strokeStyle="#ffffff",e.setLineDash([2,2]),super.renderDebugTo(e,t),e.restore()}updateView(){super.updateView(),this._objectCache.clear();for(let e of this.getSubtree())this._objectCache.set(e.el.id,e);for(let e of this.el.anchorCache){let t=this.lookup(e.id);t.children=new Array(e.children.length);for(let i=0;i<t.children.length;i++){let o=e.children[i];t.children[i]=this.lookup(o.id),t.children[i].anchor=t}}return this}lookup(e){return this._objectCache.get(e)}}class h extends a{constructor(e,t){super(e,t),this.el=e}renderTo(e,t,i=0,o=0,s){let{radius:n,fill_color:r,stroke_color:a,stroke_width:l}=this.el.style;e.fillStyle=r,e.lineWidth=l,e.strokeStyle=a,e.beginPath(),e.arc(this.x,this.y,n,0,2*Math.PI),e.closePath(),e.fill(),e.stroke()}}class u extends l{constructor(e,t){super(e,t),this.el=e}renderTo(e,t,i=0,o=0,s){let{radius:n,fill_color:r,stroke_color:a,stroke_width:l}=this.el.style;e.fillStyle=r,e.lineWidth=l,e.strokeStyle=a;let c=l%2?.5:0;e.beginPath(),e.arc(this.x,this.y,n+c,0,2*Math.PI),e.closePath(),e.fill(),e.stroke()}}var p=i("13c3");class g extends c{constructor(e,t){super(e,t),this.el=e}moveChild(e,t,i,o){let s=this.children.find(t=>t.el.id===e);if(!s)return;s instanceof a&&s.moveBy(t,i,void 0,!0);let[n,r,l]=this.children,c=(n.x+l.x)/2-r.x,d=(n.y+l.y)/2-r.y;r.el.hasUserSetPosition(s===r?o:void 0)?s===r&&r.moveBy(t,0,void 0,!0):r.moveBy(c,0,void 0,!0),r.moveBy(0,d,void 0,!0)}renderTo(e,t,i=0,s=0,n){if(!this.isVisible(t))return;let r,{children:a}=this,{cap_size:l,width:c,color:d,select_colors:h}=this.el.style;switch(e.lineWidth=c,this.el.attrs&o["o"]){case o["n"].Single:r=h.solo_color;break;case o["n"].Multi:r=h.many_color;break;case o["n"].Unselected:default:r=d;break}e.fillStyle=r,e.strokeStyle=r;let u=c%2?.5:0,g=Math.sign(a[2].x-a[1].x)*(l>>1);e.beginPath(),e.moveTo(a[0].x,a[0].y+u),e.lineTo(a[1].x+u,a[0].y+u),e.lineTo(a[1].x+u,a[2].y+u),e.lineTo(a[2].x-g,a[2].y+u),e.stroke(),Object(p["g"])(e,a[1].x,a[2].y+u,a[2].x,a[2].y+u,l),e.fill(),this.el.isSelected(n)&&super.renderTo(e,t,i,s)}renderDebugTo(e,t){if(!this.isVisible(t))return;let i=2,o=2*Math.PI;e.beginPath();for(let s of this.el.hitboxes)for(let t=0;t<s.length;t+=2)e.moveTo(s[t]+i,s[t+1]),e.arc(s[t],s[t+1],i,0,o);e.fill(),super.renderDebugTo(e,t)}}class f extends c{constructor(e,t){super(e,t),this.el=e}moveChild(e,t,i,o){let s=this.children.find(t=>t.el.id===e);if(!s)return;s instanceof a&&s.moveBy(t,i,void 0,!0);let[n,r,l]=this.children,c=(n.x+l.x)/2-r.x,d=(n.y+l.y)/2-r.y;r.el.hasUserSetPosition(s===r?o:void 0)?s===r&&r.moveBy(0,i,void 0,!0):r.moveBy(0,d,void 0,!0),r.moveBy(c,0,void 0,!0)}renderTo(e,t,i=0,s=0,n){if(!this.isVisible(t))return;let r,{children:a}=this,{cap_size:l,width:c,color:d,select_colors:h}=this.el.style;switch(e.lineWidth=c,this.el.attrs&o["o"]){case o["n"].Single:r=h.solo_color;break;case o["n"].Multi:r=h.many_color;break;case o["n"].Unselected:default:r=d;break}e.fillStyle=r,e.strokeStyle=r;let u=c%2?.5:0,g=Math.sign(a[1].y-a[2].y)*(l>>1);e.beginPath(),e.moveTo(a[0].x+u,a[0].y),e.lineTo(a[0].x+u,a[1].y+u),e.lineTo(a[2].x+u,a[1].y+u),e.lineTo(a[2].x+u,a[2].y+g),e.stroke(),Object(p["g"])(e,a[2].x+u,a[1].y,a[2].x+u,a[2].y,l),e.fill(),this.el.isSelected(n)&&super.renderTo(e,t,i,s)}renderDebugTo(e,t){if(!this.isVisible(t))return;let i=2,o=2*Math.PI;e.beginPath();for(let s of this.el.hitboxes)for(let t=0;t<s.length;t+=2)e.moveTo(s[t]+i,s[t+1]),e.arc(s[t],s[t+1],i,0,o);e.fill(),super.renderDebugTo(e,t)}}class b extends n{constructor(e,t){super(e,t),this.el=e}renderTo(e,t,i=0,o=0,s){this.el.isHovered(s)&&(e.fillStyle=this.el.style.color,e.beginPath(),e.arc(this.x,this.y,this.el.radius,0,2*Math.PI),e.closePath(),e.fill())}}class m extends s{constructor(e,t){super(e,t),this.el=e,this.tlx=0,this.tly=0}moveBy(e,t,i){super.moveBy(e,t),this.tlx+=e,this.tly+=t}renderTo(e,t,i=0,s=0,n){if(!this.isVisible(t))return;let{tlx:r,tly:a}=this,{body:l,head:c,select_outline:d,border_radius:h}=this.el.style,{width:u,height:g,headHeight:f}=this.el.layout;e.lineWidth=1.1,i|s?(Object(p["h"])(e,r,a,u,g,h),e.shadowOffsetX=i+.5*t.scale,e.shadowOffsetY=s+.5*t.scale,e.fillStyle=l.fill_color,e.strokeStyle=l.stroke_color,e.fill(),e.shadowOffsetX=0,e.shadowOffsetY=0,e.stroke()):(Object(p["h"])(e,r,a+f-1,u,g-f+1,{br:h,bl:h}),e.fillStyle=l.fill_color,e.strokeStyle=l.stroke_color,e.fill(),e.stroke()),Object(p["h"])(e,r,a,u,f,{tr:h,tl:h}),e.fillStyle=c.fill_color,e.strokeStyle=c.stroke_color,e.fill(),e.stroke();let b=c.title;e.font=b.font.css,e.fillStyle=b.color;for(let o of this.el.layout.titleFont)e.fillText(o.t,r+o.x,a+o.y);let m=c.subtitle;e.font=m.font.css,e.fillStyle=m.color;for(let o of this.el.layout.subtitleFont)e.fillText(o.t,r+o.x,a+o.y);let _=l.field_name;e.font=_.font.css,e.fillStyle=_.color;for(let o of this.el.layout.fieldNameFont)e.fillText(o.t,r+o.x,a+o.y);let y=l.field_value;e.font=y.font.css,e.fillStyle=y.color;for(let o of this.el.layout.fieldValueFont)e.fillText(o.t,r+o.x,a+o.y);if(this.el.isSelected(n)){let{padding:t,solo_color:i,many_color:s,border_radius:n}=d;switch(t+=1,Object(p["h"])(e,r-t,a-t,u+2*t,g+2*t,n,1),this.el.attrs&o["o"]){case o["n"].Single:e.strokeStyle=i;break;case o["n"].Multi:e.strokeStyle=s;break}e.stroke()}else if(this.el.isHovered(n)){let{color:o,size:n}=this.el.style.anchor_markers;super.renderTo(e,t,i,s),e.strokeStyle=o,e.beginPath();for(let t of this.children)e.moveTo(t.x-n,t.y-n),e.lineTo(t.x+n,t.y+n),e.moveTo(t.x+n,t.y-n),e.lineTo(t.x-n,t.y+n);e.stroke()}}updateView(){return super.updateView(),this.tlx=this.el.boundingBox.xMin+this.el.layout.dx,this.tly=this.el.boundingBox.yMin+this.el.layout.dy,this}}class _ extends s{constructor(e,t){super(e,t),this.el=e,this.tlx=0,this.tly=0}moveBy(e,t,i){super.moveBy(e,t),this.tlx+=e,this.tly+=t}renderTo(e,t,i=0,s=0,n){if(!this.isVisible(t))return;let{tlx:r,tly:a}=this,{text:l,fill_color:c,stroke_color:d,select_outline:h,border_radius:u}=this.el.style,{width:g,height:f,textFont:b}=this.el.layout;if(e.lineWidth=1.1,i|s?(Object(p["h"])(e,r,a,g,f,u),e.shadowOffsetX=i+.5*t.scale,e.shadowOffsetY=s+.5*t.scale,e.fillStyle=c,e.strokeStyle=d,e.fill(),e.shadowOffsetX=0,e.shadowOffsetY=0,e.stroke()):(Object(p["h"])(e,r,a,g,f,u),e.fillStyle=c,e.strokeStyle=d,e.fill(),e.stroke()),e.font=l.font.css,e.fillStyle=l.color,e.fillText(b.t,r+b.x,a+b.y),this.el.isSelected(n)){let{padding:t,solo_color:i,many_color:s,border_radius:n}=h;switch(t+=1,Object(p["h"])(e,r-t,a-t,g+2*t,f+2*t,n,1),this.el.attrs&o["o"]){case o["n"].Single:e.strokeStyle=i;break;case o["n"].Multi:e.strokeStyle=s;break}e.stroke()}else if(this.el.isHovered(n)){let{color:o,size:n}=this.el.style.anchor_markers;super.renderTo(e,t,i,s),e.strokeStyle=o,e.beginPath();for(let t of this.children)e.moveTo(t.x-n,t.y-n),e.lineTo(t.x+n,t.y+n),e.moveTo(t.x+n,t.y-n),e.lineTo(t.x-n,t.y+n);e.stroke()}}updateView(){return super.updateView(),this.tlx=this.el.boundingBox.xMin+this.el.layout.dx,this.tly=this.el.boundingBox.yMin+this.el.layout.dy,this}}class y extends d{constructor(e,t){super(e,t),this.el=e;let{grid_color:i,background_color:o}=this.el.style;this._gridPattern=this.createGridPattern(...this.el.grid,o,i)}get selects(){return[...this.getSubtree(e=>e.el.isSelected())]}renderPageSurfaceTo(e,t,i){e.fillStyle=i?this._gridPattern:this.el.style.background_color,e.fillRect(t.xMin,t.yMin,t.xMax-t.xMin,t.yMax-t.yMin)}renderTo(e,t,i=this.el.style.drop_shadow.offset[0],o=this.el.style.drop_shadow.offset[1],s){e.shadowColor=this.el.style.drop_shadow.color,super.renderTo(e,t,i*t.scale,o*t.scale)}createGridPattern(e,t,i,o){let s=document.createElement("canvas"),n=s.getContext("2d",{alpha:!1});s.width=e,s.height=t,n.fillStyle=i,n.lineWidth=2,n.strokeStyle=o,n.fillRect(0,0,e,t),n.moveTo(0,0),n.lineTo(0,t),n.lineTo(e,t),n.stroke();let r=n.createPattern(s,"repeat");return r.setTransform((new DOMMatrix).translate(0,1)),r}}},b17c:function(e,t,i){},c4f4:function(e,t,i){"use strict";i("6e0f")},cbc0:function(e,t,i){"use strict";i.d(t,"e",(function(){return o["f"]})),i.d(t,"g",(function(){return o["i"]})),i.d(t,"b",(function(){return o["a"]})),i.d(t,"c",(function(){return o["b"]})),i.d(t,"d",(function(){return o["e"]})),i.d(t,"h",(function(){return r})),i.d(t,"i",(function(){return a})),i.d(t,"j",(function(){return c})),i.d(t,"k",(function(){return d})),i.d(t,"a",(function(){return h})),i.d(t,"f",(function(){return g})),i.d(t,"m",(function(){return f})),i.d(t,"n",(function(){return b})),i.d(t,"l",(function(){return u}));var o=i("e37d"),s=i("a80d"),n=i("1dd9");class r extends o["c"]{constructor(e,t,i){super(e,t,i),this.setCursor(n["c"].Pointer),this.setSemanticRole(t.role),this.template=t,this.style=t.style,this.updateLayout(o["i"].ObjectInit)}getObjectAt(e,t){let i=e-this.boundingBox.xMid,o=t-this.boundingBox.yMid,s=this.style.radius;return i*i+o*o<s*s?this:void 0}updateLayout(e,t=!0){var i;let o=this.boundingBox;o.xMin=o.xMid-this.style.radius,o.yMin=o.yMid-this.style.radius,o.xMax=o.xMid+this.style.radius,o.yMax=o.yMid+this.style.radius,t&&(null===(i=this.parent)||void 0===i||i.updateLayout(e))}createView(e){return new s["i"](this,e)}}class a extends o["d"]{constructor(e,t,i){super(e,t,i),this.setCursor(n["c"].Move),this.setSemanticRole(t.role),this.template=t,this.style=t.style,this.updateLayout(o["i"].ObjectInit)}getObjectAt(e,t){let i=e-this.boundingBox.xMid,o=t-this.boundingBox.yMid,s=this.style.radius;return i*i+o*o<s*s?this:void 0}updateLayout(e,t=!0){var i;let o=this.boundingBox;o.xMin=o.xMid-this.style.radius,o.yMin=o.yMid-this.style.radius,o.xMax=o.xMid+this.style.radius,o.yMax=o.yMid+this.style.radius,t&&(null===(i=this.parent)||void 0===i||i.updateLayout(e))}createView(e){return new s["j"](this,e)}}var l=i("13c3");class c extends o["e"]{constructor(e,t,i){if(super(e,t,i),this.hitboxes=[[],[],[]],this.setCursor(n["c"].Move),this.setSemanticRole(t.role),this.template=t,!this.children.length){let i=this.boundingBox.xMid,o=this.boundingBox.yMid,s=t.line_ending_template.source,n=t.line_handle_template,r=t.line_ending_template.target;this.addChild(e.createObject(s),0,!1),this.addChild(e.createObject(n),1,!1),this.addChild(e.createObject(r),2,!1);for(let e of this.children)e.moveTo(i,o);this.children[0].moveBy(-100,50),this.children[2].moveBy(100,-50)}this.updateLayout(o["i"].ObjectInit)}getObjectAt(e,t){if(this.isAnchored()){let i=super.getObjectAt(e,t);if(i)return i;for(let o=0;o<this.hitboxes.length;o++)if(Object(l["l"])(e,t,this.hitboxes[o]))return 1===o?this.children[o]:this}else{if(this.isSelected()){let i=super.getObjectAt(e,t);if(i)return i}for(let i of this.hitboxes)if(Object(l["l"])(e,t,i))return this}}moveChild(e,t,i,o=!0){let s=this.children.find(t=>t.id===e);if(!s)return;s instanceof r&&s.moveBy(t,i,o,!0);let[n,a,l]=this.children,c=n.boundingBox.xMid,d=n.boundingBox.yMid,h=l.boundingBox.xMid,u=l.boundingBox.yMid,p=a.boundingBox.xMid,g=a.boundingBox.yMid,f=(c+h)/2-p,b=(d+u)/2-g;a.hasUserSetPosition()?s===a&&a.moveBy(t,0,o,!0):a.moveBy(f,0,o,!0),a.moveBy(0,b,o,!0)}updateLayout(e,t=!0){let[i,o,s]=this.children.map(e=>e.boundingBox),r=this.hitboxWidth;this.hitboxes[0]=Object(l["k"])(i.xMid,i.yMid,o.xMid,i.yMid,r),this.hitboxes[1]=Object(l["k"])(o.xMid,i.yMid,o.xMid,s.yMid,r),this.hitboxes[2]=Object(l["k"])(o.xMid,s.yMid,s.xMid,s.yMid,r),this.children[1].setCursor(n["c"].Col_Resize),super.updateLayout(e,t)}createView(e){return new s["k"](this,e)}}class d extends o["e"]{constructor(e,t,i){if(super(e,t,i),this.hitboxes=[[],[],[]],this.setCursor(n["c"].Move),this.setSemanticRole(t.role),this.template=t,!this.children.length){let i=this.boundingBox.xMid,o=this.boundingBox.yMid,s=t.line_ending_template.source,n=t.line_handle_template,r=t.line_ending_template.target;this.addChild(e.createObject(s),0,!1),this.addChild(e.createObject(n),1,!1),this.addChild(e.createObject(r),2,!1);for(let e of this.children)e.moveTo(i,o);this.children[0].moveBy(-50,100),this.children[2].moveBy(50,-100)}this.updateLayout(o["i"].ObjectInit)}getObjectAt(e,t){if(this.isAnchored()){let i=super.getObjectAt(e,t);if(i)return i;for(let o=0;o<this.hitboxes.length;o++)if(Object(l["l"])(e,t,this.hitboxes[o]))return 1===o?this.children[o]:this}else{if(this.isSelected()){let i=super.getObjectAt(e,t);if(i)return i}for(let i of this.hitboxes)if(Object(l["l"])(e,t,i))return this}}moveChild(e,t,i,o=!0){let s=this.children.find(t=>t.id===e);if(!s)return;s instanceof r&&s.moveBy(t,i,o,!0);let[n,a,l]=this.children,c=n.boundingBox.xMid,d=n.boundingBox.yMid,h=l.boundingBox.xMid,u=l.boundingBox.yMid,p=a.boundingBox.xMid,g=a.boundingBox.yMid,f=(c+h)/2-p,b=(d+u)/2-g;a.hasUserSetPosition()?s===a&&a.moveBy(0,i,o,!0):a.moveBy(0,b,o,!0),a.moveBy(f,0,o,!0)}updateLayout(e,t=!0){let[i,o,s]=this.children.map(e=>e.boundingBox),r=this.hitboxWidth;this.hitboxes[0]=Object(l["k"])(i.xMid,i.yMid,i.xMid,o.yMid,r),this.hitboxes[1]=Object(l["k"])(i.xMid,o.yMid,s.xMid,o.yMid,r),this.hitboxes[2]=Object(l["k"])(s.xMid,o.yMid,s.xMid,s.yMid,r),this.children[1].setCursor(n["c"].Row_Resize),super.updateLayout(e,t)}createView(e){return new s["l"](this,e)}}class h extends o["a"]{constructor(e,t,i){super(e,t,i),this.setSemanticRole(t.role),this.template=t,this.style=t.style,this.updateLayout(o["i"].ObjectInit)}updateLayout(e,t=!0){var i;let o=this.boundingBox;o.xMin=o.xMid-this.radius,o.yMin=o.yMid-this.radius,o.xMax=o.xMid+this.radius,o.yMax=o.yMid+this.radius,t&&(null===(i=this.parent)||void 0===i||i.updateLayout(e))}createView(e){return new s["a"](this,e)}}var u,p=i("317b");class g extends o["f"]{constructor(e,t,i){if(super(e,t,i),this.setInheritAlignment(n["h"].False),this.setAlignment(n["a"].Grid),this.setCursor(n["c"].Move),this.layout={},this.setSemanticRole(t.role),this.template=t,this.style=t.style,!this.children.length){let i=t.anchor_template,o=[p["a"].DEG_90,p["a"].DEG_0];for(let t,s=0;s<12;s++)t=e.createObject(i),t.angle=o[Math.floor(s/3)%2],this.addChild(t,s,!1)}this.updateLayout(o["i"].ObjectInit)}getObjectAt(e,t){let i=super.getObjectAt(e,t);if(i)return i;let o=this.boundingBox;return o.xMin<=e&&e<=o.xMax&&o.yMin<=t&&t<=o.yMax?this:void 0}updateLayout(e,t=!0){var i,o;let s=this.props.getHash();if(this.layout.contentHash!==s){let{max_width:t,head:o,body:n,horizontal_padding:r}=this.style,a=o.title,l=o.subtitle,c=n.field_name,d=n.field_value,h=1,u=[],p=[],g=[],f=[],b=this.template.title_key,m=this.props.value.get(b),_=this.template.id.toLocaleUpperCase(),y=null!==(i=null===m||void 0===m?void 0:m.toString())&&void 0!==i?i:`Unknown key: '${b}'`,v=t;v=Math.max(v,o.title.font.measureWidth(_));for(let e of this.props.value.keys())v=Math.max(v,n.field_name.font.measureWidth(e));let x=null,k=0,j=h+r,w=h+o.vertical_padding;x=a.font.measure(_),k=Math.max(k,x.width),w+=x.ascent,u.push({x:j,y:w,t:_}),w+=x.descent+o.title.padding;let S=l.font.wordWrap(y,v);x=l.font.measure(S[0]),k=Math.max(k,x.width),w+=x.ascent,p.push({x:j,y:w,t:S[0]});for(let e=1;e<S.length;e++)x=l.font.measure(S[e]),k=Math.max(k,x.width),w+=l.lineHeight,p.push({x:j,y:w,t:S[e]});w+=o.vertical_padding+h;let O=Math.round(w);w+=n.vertical_padding;for(let[e,i]of this.props.value){if(""===i.toString())continue;if(e===this.template.title_key)continue;e=e.toLocaleUpperCase(),x=c.font.measure(e),k=Math.max(k,x.width),w+=x.ascent,g.push({x:j,y:w,t:e}),w+=x.descent+n.field_name.padding;let t=d.font.wordWrap(""+i.toString(),v);x=d.font.measure(t[0]),k=Math.max(k,x.width),w+=x.ascent,f.push({x:j,y:w,t:t[0]});for(let e=1;e<t.length;e++)x=d.font.measure(t[e]),k=Math.max(k,x.width),w+=d.line_height,f.push({x:j,y:w,t:t[e]});w+=n.field_value.padding}w-=n.field_value.padding;let M=Math.round(2*(r+h)+k),T=Math.round(w+n.vertical_padding+h),A=this.boundingBox,C=Math.round(A.xMid-M/2),B=Math.round(A.yMid-T/2),P=Math.round(A.xMid+M/2),D=Math.round(A.yMid+T/2),R=(A.xMid-C)/2,E=(A.yMid-B)/2,L=[A.xMid-R,B,A.xMid,B,A.xMid+R,B,P,A.yMid-E,P,A.yMid,P,A.yMid+E,A.xMid+R,D,A.xMid,D,A.xMid-R,D,C,A.yMid+E,C,A.yMid,C,A.yMid-E];for(let e=0;e<L.length;e+=2)this.children[e/2].moveTo(L[e],L[e+1],!1);super.updateLayout(e,!1),this.layout={contentHash:s,dx:C-A.xMin,dy:B-A.yMin,width:M,height:T,headHeight:O,titleFont:u,subtitleFont:p,fieldNameFont:g,fieldValueFont:f}}t&&(null===(o=this.parent)||void 0===o||o.updateLayout(e))}createView(e){return new s["h"](this,e)}}class f extends o["f"]{constructor(e,t,i){if(super(e,t,i),this.setInheritAlignment(n["h"].False),this.setAlignment(n["a"].Grid),this.setCursor(n["c"].Move),this.layout={},this.setSemanticRole(t.role),this.template=t,this.style=t.style,3===this.children.length){let i=t.anchor_template,o=e.createObject(i);o.angle=p["a"].DEG_90;let s=e.createObject(i);s.angle=p["a"].DEG_90;let n=e.createObject(i);n.angle=p["a"].DEG_90;let r=[];for(let e of[...this.children])r.push(e),this.removeChild(e.id,!1,!1);let a=[o,r[0],s,r[1],n,r[2]];console.log(a);for(let e=0;e<a.length;e++)this.addChild(a[e],e,!1)}if(!this.children.length){let i=t.anchor_template;for(let t,o=0;o<6;o++)t=e.createObject(i),t.angle=p["a"].DEG_90,this.addChild(t,o,!1)}this.updateLayout(o["i"].ObjectInit)}getObjectAt(e,t){let i=super.getObjectAt(e,t);if(i)return i;let o=this.boundingBox;return o.xMin<=e&&e<=o.xMax&&o.yMin<=t&&t<=o.yMax?this:void 0}updateLayout(e,t=!0){var i;let o=Object(l["f"])(this.template.text);if(this.layout.contentHash!==o){let{text:t,vertical_padding:i,horizontal_padding:s}=this.style,n=1,r=t.font.measure(this.template.text),a={x:n+s,y:n+i+r.ascent,t:this.template.text},l=2*s+r.width,c=2*i+r.ascent+r.descent,d=this.boundingBox,h=Math.round(d.xMid-l/2),u=Math.round(d.yMid-c/2),p=Math.round(d.xMid+l/2),g=Math.round(d.yMid+c/2),f=(d.xMid-h)/2,b=[d.xMid-f,u,d.xMid,u,d.xMid+f,u,d.xMid+f,g,d.xMid,g,d.xMid-f,g];for(let e=0;e<b.length;e+=2)this.children[e/2].moveTo(b[e],b[e+1],!1);super.updateLayout(e,!1),d.xMin=h,d.xMax=p,d.xMid=Math.floor((d.xMin+d.xMax)/2),this.layout={contentHash:o,dx:h-d.xMin,dy:u-d.yMin,width:l,height:c,textFont:a}}t&&(null===(i=this.parent)||void 0===i||i.updateLayout(e))}createView(e){return new s["m"](this,e)}}class b extends o["h"]{constructor(e,t,i){var s;super(e,t,i),this.setSemanticRole(t.role),this.template=t,this.grid=t.grid,this.style=t.style,this.location=null!==(s=null===i||void 0===i?void 0:i.location)&&void 0!==s?s:{type:u.Point,x:0,y:0,k:1},this.updateLayout(o["i"].ObjectInit)}static createDummy(){return new this(p["c"].createDummy(),{id:"",name:"",type:p["f"].Page,role:p["e"].None,grid:[10,10],style:{grid_color:"#1d1d1d",background_color:"#141414",drop_shadow:{color:"rgba(0,0,0,.4)",offset:[3,3]}}})}createView(e){return new s["n"](this,e)}toExport(){return Object.assign(Object.assign({},super.toExport()),{location:this.location})}}(function(e){e[e["Point"]=0]="Point",e[e["Region"]=1]="Region"})(u||(u={}))},cd49:function(e,t,i){"use strict";i.r(t);var o=i("7a23");const s={id:"app-body"};function n(e,t,i,n,r,a){const l=Object(o["y"])("AppTitleBar"),c=Object(o["y"])("BlockDiagram"),d=Object(o["y"])("EditorTabs"),h=Object(o["y"])("AppFooterBar"),u=Object(o["y"])("AppHotkeyBox");return Object(o["q"])(),Object(o["d"])(u,{id:"main"},{default:Object(o["F"])(()=>[Object(o["i"])(l,{id:"app-title-bar"}),Object(o["g"])("div",s,[Object(o["i"])(c,{id:"block-diagram"}),Object(o["i"])(d,{id:"app-tabs"}),Object(o["i"])(h,{id:"app-footer-bar"})])]),_:1})}var r=i("9ab4"),a=i("5502"),l=i("fa17");const c=e=>(Object(o["t"])("data-v-34dfc6e8"),e=e(),Object(o["r"])(),e),d=c(()=>Object(o["g"])("span",{class:"logo"},"AFB",-1));function h(e,t,i,s,n,r){const a=Object(o["y"])("TitleBar");return Object(o["q"])(),Object(o["d"])(a,{class:"app-title-bar-element",menus:e.menus,onSelect:e.onItemSelect},{icon:Object(o["F"])(()=>[d]),_:1},8,["menus","onSelect"])}const u={class:"icon"},p=["onMouseenter","onClick"];function g(e,t,i,s,n,r){const a=Object(o["y"])("ContextMenuListing"),l=Object(o["y"])("FocusBox");return Object(o["q"])(),Object(o["d"])(l,{class:"title-bar-control",onUnfocus:e.menuClose},{default:Object(o["F"])(()=>[Object(o["g"])("li",u,[Object(o["x"])(e.$slots,"icon",{},void 0,!0)]),(Object(o["q"])(!0),Object(o["f"])(o["a"],null,Object(o["w"])(e.menus,i=>(Object(o["q"])(),Object(o["f"])("li",{key:i.id,class:Object(o["o"])({focused:i.id===e.focusedMenu}),onMouseenter:t=>e.menuEnter(i.id),onClick:t=>e.menuOpen(i.id)},[Object(o["g"])("p",null,Object(o["A"])(i.text),1),i.id===e.focusedMenu?(Object(o["q"])(),Object(o["d"])(a,{key:0,class:"menu-listing",sections:i.sections,select:e.menuSelect,onClick:t[0]||(t[0]=Object(o["H"])(()=>{},["stop"]))},null,8,["sections","select"])):Object(o["e"])("",!0)],42,p))),128))]),_:3},8,["onUnfocus"])}function f(e,t,i,s,n,r){return Object(o["q"])(),Object(o["f"])("div",{onClick:t[0]||(t[0]=t=>e.$emit("focus")),class:"focus-box-container"},[Object(o["x"])(e.$slots,"default")])}var b=Object(o["k"])({name:"FocusBox",data(){return{onFocusOut:function(e){this.$el==e.target||this.$el.contains(e.target)||this.$emit("unfocus")}.bind(this)}},emits:["focus","unfocus"],mounted(){setTimeout(()=>{document.body.addEventListener("pointerdown",this.onFocusOut)},0)},unmounted(){document.body.removeEventListener("pointerdown",this.onFocusOut)}}),m=i("6b0d"),_=i.n(m);const y=_()(b,[["render",f]]);var v=y;const x=e=>(Object(o["t"])("data-v-431fe6dc"),e=e(),Object(o["r"])(),e),k=["onMouseenter"],j={class:"item"},w={class:"text"},S=x(()=>Object(o["g"])("span",{class:"more-arrow"},null,-1)),O={key:0,class:"submenu"},M=["onClick"],T=["href"],A={class:"check"},C={class:"text"},B={key:0,class:"shortcut"},P={key:0,class:"section-divider"};function D(e,t,i,s,n,r){const a=Object(o["y"])("ContextMenuListing",!0);return Object(o["q"])(),Object(o["f"])("div",{class:"context-menu-listing-control",style:Object(o["p"])(e.offset),onContextmenu:t[2]||(t[2]=Object(o["H"])(()=>{},["prevent"]))},[Object(o["g"])("input",{type:"file",ref:"file",style:{display:"none"},onChange:t[0]||(t[0]=(...t)=>e.readFile&&e.readFile(...t))},null,544),(Object(o["q"])(!0),Object(o["f"])(o["a"],null,Object(o["w"])(e.sections,(i,s)=>(Object(o["q"])(),Object(o["f"])("div",{class:"section",key:i.name},[(Object(o["q"])(!0),Object(o["f"])(o["a"],null,Object(o["w"])(i.items,i=>(Object(o["q"])(),Object(o["f"])(o["a"],{key:i.id},[i.action===e.MenuAction.OpenSubmenu?(Object(o["q"])(),Object(o["f"])("li",{key:0,class:Object(o["o"])({disabled:i.disabled}),onMouseenter:t=>e.submenuEnter(i),onMouseleave:t[1]||(t[1]=(...t)=>e.submenuLeave&&e.submenuLeave(...t))},[Object(o["g"])("a",j,[Object(o["g"])("span",w,Object(o["A"])(i.text),1),S]),i.id===e.focusedSubMenu?(Object(o["q"])(),Object(o["f"])("div",O,[Object(o["i"])(a,{sections:i.sections,select:e.selectItem},null,8,["sections","select"])])):Object(o["e"])("",!0)],42,k)):(Object(o["q"])(),Object(o["f"])("li",{key:1,class:Object(o["o"])({disabled:i.disabled}),onClick:t=>e.onItemClick(i)},[Object(o["g"])("a",{class:"item",href:i.disabled?null:i.link,target:"_blank"},[Object(o["G"])(Object(o["g"])("span",A,"✓",512),[[o["C"],i.value]]),Object(o["g"])("span",C,Object(o["A"])(i.text),1),i.shortcut?(Object(o["q"])(),Object(o["f"])("span",B,Object(o["A"])(e.formatShortcut(i.shortcut)),1)):Object(o["e"])("",!0)],8,T)],10,M))],64))),128)),s<e.sections.length-1?(Object(o["q"])(),Object(o["f"])("a",P)):Object(o["e"])("",!0)]))),128))],36)}var R;(function(e){e[e["OpenSubmenu"]=0]="OpenSubmenu",e[e["RunTask"]=1]="RunTask",e[e["OpenFile"]=2]="OpenFile",e[e["OpenLink"]=3]="OpenLink",e[e["ToggleValue"]=4]="ToggleValue"})(R||(R={}));const E={Control:"Ctrl",Escape:"Esc",ArrowLeft:"←",ArrowUp:"↑",ArrowRight:"→",ArrowDown:"↓",Delete:"Del"};var L=Object(o["k"])({name:"ContextMenuListing",setup(){return{file:Object(o["v"])(null)}},props:{sections:{type:Array,required:!0},select:{type:Function,required:!0},forceInsideWindow:{type:Boolean,default:!0}},data(){return{xOffset:0,yOffset:0,leaveTimeout:500,leaveTimeoutId:0,focusedSubMenu:null,selectedFileId:null,MenuAction:R}},computed:{offset(){return{marginTop:this.yOffset+"px",marginLeft:this.xOffset+"px"}}},methods:{submenuEnter(e){clearTimeout(this.leaveTimeoutId),e.disabled||(this.focusedSubMenu=e.id)},submenuLeave(){this.leaveTimeoutId=setTimeout(()=>{this.focusedSubMenu=null},this.leaveTimeout)},onItemClick(e){if(!e.disabled)switch(e.action){case R.OpenFile:this.file.click(),this.selectedFileId=e.id,this.select("__preload_"+e.id,!0,e.data);break;case R.ToggleValue:this.select(e.id,!1,Object.assign(Object.assign({},e.data),{value:e.value}));break;default:this.select(e.id,!0,e.data);break}},readFile(e){let t=e.target.files[0],i=new FileReader;i.onload=e=>{var i;this.select(this.selectedFileId,!0,{filename:t.name,file:null===(i=e.target)||void 0===i?void 0:i.result}),this.selectedFileId=null},i.readAsText(t)},selectItem(e,t,i){this.select(e,t,i),t&&(this.focusedSubMenu=null)},formatShortcut(e){return e?e.split("+").map(e=>e in E?E[e]:e).join("+"):e}},mounted(){if(!this.forceInsideWindow)return;let e=window.innerWidth,t=window.innerHeight,{top:i,left:o,bottom:s,right:n}=this.$el.getBoundingClientRect();this.xOffset=n>e?-Math.min(o,n-e):0,this.yOffset=s>t?-Math.min(i,s-t):0}});i("5dbc");const I=_()(L,[["render",D],["__scopeId","data-v-431fe6dc"]]);var F=I,H=Object(o["k"])({name:"TitleBar",props:{menus:{type:Array,default:[]}},data(){return{focusedMenu:null}},emits:["select"],methods:{menuOpen(e){this.focusedMenu=e},menuEnter(e){null!==this.focusedMenu&&(this.focusedMenu=e)},menuClose(){this.focusedMenu=null},menuSelect(e,t,i){this.$emit("select",e,i),t&&(this.focusedMenu=null)}},components:{FocusBox:v,ContextMenuListing:F}});i("442f");const z=_()(H,[["render",g],["__scopeId","data-v-73631bd3"]]);var V=z,q=Object(o["k"])({name:"AppTitleBar",computed:Object.assign(Object.assign({},Object(a["c"])("ContextMenuStore",["fileMenu","editMenu","layoutMenu","viewMenu","helpMenu"])),{menus(){return[this.fileMenu,this.editMenu,this.layoutMenu,this.viewMenu,this.helpMenu]}}),methods:Object.assign(Object.assign({},Object(a["b"])("AppActionsStore",["executeAppAction"])),{onItemSelect(e,t){return Object(r["a"])(this,void 0,void 0,(function*(){try{yield this.executeAppAction({id:e,data:t})}catch(i){console.error(i)}}))}}),components:{TitleBar:V}});i("e5f1");const $=_()(q,[["render",h],["__scopeId","data-v-34dfc6e8"]]);var U=$;function N(e,t,i,s,n,r){const a=Object(o["y"])("HotkeyBox");return Object(o["q"])(),Object(o["d"])(a,{class:"app-hotkey-box-element",hotkeys:e.hotkeys,onFire:e.onHotkeyFired},{default:Object(o["F"])(()=>[Object(o["x"])(e.$slots,"default")]),_:3},8,["hotkeys","onFire"])}const G={class:"hotkey-box-container",tabindex:"0"};function W(e,t,i,s,n,r){return Object(o["q"])(),Object(o["f"])("div",G,[Object(o["x"])(e.$slots,"default",{},void 0,!0)])}class Y{constructor(e,t){this._boundAdvanceKeyState=this.advanceKeyState.bind(this),this._boundReverseKeyState=this.reverseKeyState.bind(this),this._callback=e,this._callLoop=void 0,this._container=null,this._hotkeyIdMap=new Map,this._keyState=".",this._recognitionDelay=t,this._selectedFileId=null,this._fileInput=document.createElement("input"),this._fileInput.type="file",this._fileInput.addEventListener("change",this.readFile.bind(this))}observe(e){this._container=e,this._container.addEventListener("keydown",this._boundAdvanceKeyState),this._container.addEventListener("keyup",this._boundReverseKeyState)}disconnect(){var e,t;null===(e=this._container)||void 0===e||e.removeEventListener("keydown",this._boundAdvanceKeyState),null===(t=this._container)||void 0===t||t.removeEventListener("keyup",this._boundReverseKeyState)}setHotkeys(e){this._hotkeyIdMap=new Map;for(let t of e){if(""===t.shortcut)continue;let e=this.keySequenceToHotKeyId(t.shortcut);for(let t of this._hotkeyIdMap.keys())if(t.startsWith(e)||e.startsWith(t))throw new X(`Overlapping key sequences ('${t}' and '${e}') are not allowed.`);this._hotkeyIdMap.set(e,t)}}setRecognitionDelay(e){this._recognitionDelay=e}isHotkeyActive(e,t=!0){let i=this.keySequenceToHotKeyId(e);return t?this._keyState===i:this._keyState.includes(i)}advanceKeyState(e){let t=e.key.toLocaleLowerCase();if(!this._keyState.endsWith(`.${t}.`)&&(clearTimeout(this._callLoop),this._keyState+=t+".","INPUT"!==e.target.tagName))if(this._hotkeyIdMap.has(this._keyState)){let t=this._hotkeyIdMap.get(this._keyState);t.allowBrowserBehavior||e.preventDefault(),this.triggerHotkey(t)}else e.preventDefault()}reverseKeyState(e){clearTimeout(this._callLoop);let t=e.key.toLocaleLowerCase();this._keyState=this._keyState.replace(`.${t}.`,".")}triggerHotkey(e){e.disabled||(this._callLoop=setTimeout(()=>{switch(e.action){case K.RunTask:this._callback(e.id),e.repeat&&this.runRepeat(e);break;case K.ToggleValue:this._callback(e.id,{value:e.value});break;case K.OpenLink:window.open(e.link,"_blank"),this._keyState=".",this._callback(e.id);break;case K.OpenFile:this._fileInput.click(),this._selectedFileId=e.id,this._callback("__preload_"+e.id);break}},this._recognitionDelay))}runRepeat(e){let t=function(){this._callback(e.id),this._callLoop=setTimeout(t,e.repeat.interval)}.bind(this);this._callLoop=setTimeout(t,e.repeat.delay)}readFile(e){let t=e.target.files[0],i=new FileReader;i.onload=e=>{var i;this._callback(this._selectedFileId,{filename:t.name,file:null===(i=e.target)||void 0===i?void 0:i.result}),this._selectedFileId=null},i.readAsText(t)}keySequenceToHotKeyId(e){let t=e.toLocaleLowerCase().replace(/\s+/g,"").split("+").join(".");return`.${t}.`}}class X extends Error{constructor(e){super(e)}}var K;(function(e){e[e["RunTask"]=0]="RunTask",e[e["OpenFile"]=1]="OpenFile",e[e["OpenLink"]=2]="OpenLink",e[e["ToggleValue"]=3]="ToggleValue"})(K||(K={}));var J=Object(o["k"])({name:"HotkeyBox",provide(){return{isHotkeyActive:(e,t=!0)=>this.observer.isHotkeyActive(e,t)}},props:{hotkeys:{type:Array,default:[]}},data(){return{observer:Object(o["n"])(new Y((e,t)=>this.$emit("fire",e,t),0))}},emits:["fire"],watch:{hotkeys(){this.observer.setHotkeys(this.hotkeys)}},mounted(){this.observer.observe(this.$el),this.observer.setHotkeys(this.hotkeys)}});i("1bb6");const Z=_()(J,[["render",W],["__scopeId","data-v-54b3aeda"]]);var Q=Z,ee=Object(o["k"])({name:"AppHotkeyBox",computed:Object.assign(Object.assign({},Object(a["c"])("HotkeyStore",["nativeHotkeys","fileHotkeys","editHotKeys","layoutHotkeys","viewHotkeys"])),{hotkeys(){return[...this.nativeHotkeys,...this.fileHotkeys,...this.editHotKeys,...this.layoutHotkeys,...this.viewHotkeys]}}),methods:Object.assign(Object.assign({},Object(a["b"])("AppActionsStore",["executeAppAction"])),{onHotkeyFired(e,t){return Object(r["a"])(this,void 0,void 0,(function*(){try{yield this.executeAppAction({id:e,data:t})}catch(i){console.error(i)}}))}}),components:{HotkeyBox:Q}});const te=_()(ee,[["render",N]]);var ie=te;function oe(e,t,i,s,n,r){const a=Object(o["y"])("ContextMenu");return Object(o["q"])(),Object(o["f"])("div",{class:"block-diagram-element",style:Object(o["p"])(e.cursorStyle)},[e.menu.show?(Object(o["q"])(),Object(o["d"])(a,{key:0,class:"block-diagram-menu",style:Object(o["p"])(e.menuStyle),sections:e.menuOptions,onSelect:e.onItemSelect,onUnfocus:e.closeContextMenu},null,8,["style","sections","onSelect","onUnfocus"])):Object(o["e"])("",!0)],4)}var se=i("24a6");function ne(e,t,i,s,n,r){const a=Object(o["y"])("ContextMenuListing"),l=Object(o["y"])("FocusBox");return Object(o["q"])(),Object(o["d"])(l,{style:Object(o["p"])(e.offset),class:"context-menu-control",onUnfocus:t[0]||(t[0]=t=>e.$emit("unfocus")),onContextmenu:t[1]||(t[1]=Object(o["H"])(()=>{},["prevent"]))},{default:Object(o["F"])(()=>[Object(o["i"])(a,{sections:e.sections,select:(t,i,o)=>e.$emit("select",t,o),forceInsideWindow:!1},null,8,["sections","select"])]),_:1},8,["style"])}var re=Object(o["k"])({name:"ContextMenu",props:{sections:{type:Array,required:!0}},data(){return{xOffset:0,yOffset:0}},computed:{offset(){return{marginTop:this.yOffset+"px",marginLeft:this.xOffset+"px"}}},emits:["select","unfocus"],mounted(){let e=window.innerWidth,t=window.innerHeight,{bottom:i,right:o}=this.$el.getBoundingClientRect();this.xOffset=o>e?-(this.$el.clientWidth-1):0,this.yOffset=i>t?-(this.$el.clientHeight-1):0},components:{FocusBox:v,ContextMenuListing:F}});i("12bf");const ae=_()(re,[["render",ne],["__scopeId","data-v-6ed3d4b3"]]);var le=ae,ce=Object(o["k"])({name:"BlockDiagram",setup(){return{isHotkeyActive:Object(o["m"])("isHotkeyActive")}},data(){return{cursor:se["d"].Default,diagram:Object(o["n"])(new se["b"]),menu:{x:0,y:0,show:!1}}},computed:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Object(a["d"])("ActivePageStore",{page(e){return e.page.ref},hovers(e){return e.hovers},selects(e){return e.selects.trigger},pageUpdate(e){return e.page.trigger}})),Object(a["c"])("ActivePageStore",["hasSelection"])),Object(a["d"])("AppSettingsStore",{displayGrid(e){return e.settings.view.diagram.display_grid},displayShadows(e){return e.settings.view.diagram.display_shadows},displayDebugMode(e){return e.settings.view.diagram.display_debug_mode},renderHighQuality(e){return e.settings.view.diagram.render_high_quality},disableShadowsAt(e){return e.settings.view.diagram.disable_shadows_at},multiselectHotkey(e){return e.settings.hotkeys.select.many}})),Object(a["c"])("ContextMenuStore",["deleteMenu","clipboardMenu","duplicateMenu","layeringMenu","jumpMenu","createMenu","undoRedoMenu","selectAllMenu","zoomMenu","diagramViewMenu"])),{cursorStyle(){return{cursor:se["e"][this.cursor]}},menuStyle(){return{top:this.menu.y+"px",left:this.menu.x+"px"}},menuOptions(){return this.hasSelection?[this.deleteMenu,this.clipboardMenu,this.duplicateMenu,this.layeringMenu,this.jumpMenu]:[this.undoRedoMenu,this.createMenu,this.selectAllMenu,this.zoomMenu,this.diagramViewMenu]}}),methods:Object.assign(Object.assign(Object.assign({},Object(a["b"])("ActivePageStore",["select","unselectAll","attach","detach","hover","unhoverAll","moveBy","addLineObject","moveCameraTo","setViewTransform"])),Object(a["b"])("AppActionsStore",["executeAppAction"])),{onItemSelect(e,t){try{"create_object"===e?this.executeAppAction({id:e,data:Object.assign(Object.assign({},t),{x:this.menu.x,y:this.menu.y})}):this.executeAppAction({id:e,data:t})}catch(i){console.error(i)}this.closeContextMenu()},openContextMenu(e,t){requestAnimationFrame(()=>{this.menu.show=!0,this.menu.x=e,this.menu.y=t})},closeContextMenu(){this.menu.show=!1}}),watch:{page(){this.diagram.setPage(Object(o["n"])(this.page)),this.diagram.updateView(0)},hovers(){this.diagram.render()},selects(){this.diagram.render()},pageUpdate(){this.diagram.updateView()},displayGrid(){this.diagram.setGridDisplay(this.displayGrid),this.diagram.render()},displayShadows(){this.diagram.setShadowsDisplay(this.displayShadows),this.diagram.render()},displayDebugMode(){this.diagram.setDebugDisplay(this.displayDebugMode),this.diagram.render()},renderHighQuality(){this.diagram.setSsaaScale(this.renderHighQuality?2:1),this.diagram.render()},disableShadowsAt(){this.diagram.setShadowsDisableAt(this.disableShadowsAt),this.diagram.render()}},mounted(){this.diagram.on("object-hover",(e,t)=>{this.cursor=t,e?this.hover(e.id):this.unhoverAll()}),this.diagram.on("object-click",(e,t,i,o)=>{this.isHotkeyActive(this.multiselectHotkey)||t.isSelected()||this.unselectAll(),this.select(t.id),e.button===se["i"].Right&&this.openContextMenu(i,o)}),this.diagram.on("canvas-click",(e,t,i)=>{this.unselectAll(),e.button===se["i"].Right&&this.openContextMenu(t,i)}),this.diagram.on("canvas-transform",(e,t,i)=>{this.setViewTransform({x:e,y:t,k:i})}),this.diagram.on("object-move",(e,t,i)=>{this.moveBy({objects:e.map(e=>e.id),dx:t,dy:i})}),this.diagram.on("object-attach",(e,t)=>{this.attach({object:e.id,anchor:t.id})}),this.diagram.on("object-detach",(e,t,i)=>{this.detach({object:e.id,dx:t,dy:i})}),this.diagram.on("line-create",(e,t,i,o)=>{this.addLineObject({object:e,source:i.id,target:null===o||void 0===o?void 0:o.id,parent:t.id}),this.unselectAll(),this.select(e.id)}),this.diagram.on("camera-move",e=>{this.moveCameraTo(e)}),this.diagram.setGridDisplay(this.displayGrid),this.diagram.setShadowsDisplay(this.displayShadows),this.diagram.setDebugDisplay(this.displayDebugMode),this.diagram.setSsaaScale(this.renderHighQuality?2:1),this.diagram.setShadowsDisableAt(this.disableShadowsAt),this.diagram.setPage(Object(o["n"])(this.page)),this.diagram.inject(this.$el)},unmounted(){this.diagram.destroy()},components:{ContextMenu:le}});i("4ebf");const de=_()(ce,[["render",oe],["__scopeId","data-v-40949232"]]);var he=de;const ue=e=>(Object(o["t"])("data-v-0ec2c908"),e=e(),Object(o["r"])(),e),pe={class:"app-footer-bar-element"},ge={class:"info left"},fe={class:"selected"},be=ue(()=>Object(o["g"])("span",null,"Selected:",-1)),me={class:"info right"},_e={key:0,class:"page-check valid"},ye=ue(()=>Object(o["g"])("span",null,"✓",-1)),ve={key:1,class:"page-check invalid"},xe=ue(()=>Object(o["g"])("span",null,"⚠",-1));function ke(e,t,i,s,n,r){return Object(o["q"])(),Object(o["f"])("div",pe,[Object(o["g"])("div",ge,[Object(o["g"])("p",fe,[be,Object(o["h"])(" "+Object(o["A"])(e.selects),1)])]),Object(o["g"])("div",me,[e.isPageValid?(Object(o["q"])(),Object(o["f"])("div",_e,[ye,Object(o["h"])(" Valid "+Object(o["A"])(e.fileName),1)])):(Object(o["q"])(),Object(o["f"])("div",ve,[xe,Object(o["h"])(" Invalid "+Object(o["A"])(e.fileName),1)]))])])}var je=Object(o["k"])({name:"AppFooterBar",data(){return{fileName:l["a"].file_type_name}},computed:Object.assign(Object.assign({},Object(a["d"])("ActivePageStore",{selects(e){return 1+e.selects.trigger===0?0:e.selects.ref.size}})),Object(a["c"])("ActivePageStore",["isPageValid"]))});i("c4f4");const we=_()(je,[["render",ke],["__scopeId","data-v-0ec2c908"]]);var Se=we;function Oe(e,t,i,s,n,r){const a=Object(o["y"])("ObjectEditor"),l=Object(o["y"])("Tab"),c=Object(o["y"])("TabBox");return Object(o["q"])(),Object(o["d"])(c,{class:"editor-tabs-element",modelValue:e.active,"onUpdate:modelValue":t[0]||(t[0]=t=>e.active=t),canClose:!1},{default:Object(o["F"])(()=>[Object(o["i"])(l,{class:"object-properties",name:"Properties"},{default:Object(o["F"])(()=>[Object(o["i"])(a)]),_:1})]),_:1},8,["modelValue"])}const Me={key:0,class:"tab-container"};function Te(e,t,i,s,n,r){return e.isActive?(Object(o["q"])(),Object(o["f"])("div",Me,[Object(o["x"])(e.$slots,"default",{},void 0,!0)])):Object(o["e"])("",!0)}var Ae=Object(o["k"])({name:"Tab",setup(){let e=Object(o["l"])(),t=Object(o["m"])("tabsState");if(void 0===t)throw new TypeError("<Tab> can only be used within a <TabBox>.");let{active:i,tabs:s}=t,n=Object(o["b"])(()=>s.value.findIndex(t=>t.props.name===e.props.name)),r=Object(o["b"])(()=>n.value===i.value);return Object(o["E"])(()=>{-1===n.value&&s.value.push(e)}),{isActive:r}},props:{name:{type:String,required:!0}}});i("61f7");const Ce=_()(Ae,[["render",Te],["__scopeId","data-v-450513ef"]]);var Be=Ce;const Pe={class:"tab-box-container"},De={class:"tab-box-header"},Re=["onClick"],Ee={class:"tab-box-body"};function Le(e,t,i,s,n,r){return Object(o["q"])(),Object(o["f"])("div",Pe,[Object(o["g"])("div",De,[(Object(o["q"])(!0),Object(o["f"])(o["a"],null,Object(o["w"])(e.tabs,(t,i)=>(Object(o["q"])(),Object(o["f"])("li",{key:i,class:Object(o["o"])(["tab-link",{active:e.active===i}]),onClick:t=>e.select(i)},[Object(o["g"])("p",null,Object(o["A"])(t.props.name),1)],10,Re))),128)),e.canClose?(Object(o["q"])(),Object(o["f"])("li",{key:0,class:"close-link",onClick:t[0]||(t[0]=t=>e.$emit("close"))},"✗")):Object(o["e"])("",!0)]),Object(o["g"])("div",Ee,[Object(o["x"])(e.$slots,"default",{},void 0,!0)])])}var Ie=Object(o["k"])({name:"TabBox",setup(e,{emit:t}){let i=Object(o["b"])(()=>e.modelValue),s=Object(o["v"])([]);function n(e){t("update:modelValue",e)}return Object(o["s"])("tabsState",{active:i,tabs:s}),{active:i,tabs:s,select:n}},props:{canClose:{type:Boolean,default:!0},modelValue:{type:[String,Number]}},emits:["update:modelValue","close"]});i("281e");const Fe=_()(Ie,[["render",Le],["__scopeId","data-v-2649b21e"]]);var He=Fe;const ze={class:"object-editor-element"},Ve={key:1,class:"no-prop-selection"},qe={key:2,class:"no-prop-selection"};function $e(e,t,i,s,n,r){const a=Object(o["y"])("DictionaryFieldContents"),l=Object(o["y"])("ScrollBox");return Object(o["q"])(),Object(o["f"])("div",ze,[e.property?(Object(o["q"])(),Object(o["d"])(l,{key:0,class:"scrollbox",alwaysShowScrollBar:!0,scrollColor:"#1f1f1f"},{default:Object(o["F"])(()=>[Object(o["i"])(a,{class:"contents",property:e.property,onChange:e.onChange},null,8,["property","onChange"])]),_:1})):e.selected?(Object(o["q"])(),Object(o["f"])("p",Ve,"The selected object has no properties.")):(Object(o["q"])(),Object(o["f"])("p",qe,"Select an object to edit its properties."))])}const Ue={class:"scrollbox-container"};function Ne(e,t,i,s,n,r){return Object(o["q"])(),Object(o["f"])("div",Ue,[Object(o["g"])("div",{ref:"content",class:"scroll-content",onWheelPassive:t[0]||(t[0]=t=>e.moveScrollPosition(e.scrollTop+t.deltaY,t))},[Object(o["x"])(e.$slots,"default",{},void 0,!0)],544),Object(o["G"])(Object(o["g"])("div",{class:"scroll-bar",style:Object(o["p"])(e.scroll.sty),onWheelPassive:t[3]||(t[3]=t=>e.moveScrollPosition(e.scrollTop+t.deltaY,t))},[Object(o["G"])(Object(o["g"])("div",{class:"scroll-handle",style:Object(o["p"])(e.handle.sty),onPointerdown:t[1]||(t[1]=(...t)=>e.startDrag&&e.startDrag(...t)),onPointerup:t[2]||(t[2]=(...t)=>e.stopDrag&&e.stopDrag(...t))},null,36),[[o["C"],e.showScrollbar]])],36),[[o["C"],e.alwaysShowScrollBar||e.showScrollbar]])])}class Ge{constructor(){this.deltaX=0,this.deltaY=0,this.movementX=0,this.movementY=0,this.target=null,this._originX=0,this._originY=0,this._lastX=0,this._lastY=0}capture(e,t){this._originX=e.clientX,this._originY=e.clientY,this._lastX=this._originX,this._lastY=this._originY,this.target=e.target,this.target.setPointerCapture(e.pointerId),this.target.onpointermove=e=>{this.update(e),t(e,this)}}update(e){this.deltaX=e.clientX-this._originX,this.deltaY=e.clientY-this._originY,this.movementX=e.clientX-this._lastX,this.movementY=e.clientY-this._lastY,this._lastX=e.clientX,this._lastY=e.clientY}release(e){null!==this.target&&(this.target.releasePointerCapture(e.pointerId),this.target.onpointermove=null,this.target=null)}}var We=Object(o["k"])({name:"ScrollBox",setup(){return{content:Object(o["v"])(null)}},props:{resetScrollOnChange:{type:Boolean,default:!1},alwaysShowScrollBar:{type:Boolean,default:!1},handleColor:{type:String,default:"#333333"},scrollColor:{type:String,default:"none"},borderColor:{type:String,default:"#404040"},width:{type:Number,default:17}},data(){return{scrollTop:0,windowMax:0,scroll:{sty:{width:this.width+"px",background:this.scrollColor}},handle:{trk:Object(o["n"])(new Ge),hei:0,max:0,pos:0,sty:{height:"0px",transform:"translateY(0px)",background:this.handleColor,borderColor:this.borderColor}},showScrollbar:!1,onResizeObserver:null,onMutateObserver:null}},methods:{startDrag(e){this.handle.trk.capture(e,this.onDrag),document.addEventListener("pointerup",this.stopDrag,{once:!0})},onDrag(e,t){this.moveScrollPosition(this.handleTopToTop(this.handle.pos+t.movementY))},stopDrag(e){this.handle.trk.release(e)},recalculateScrollState(e=!0){let t=this.showScrollbar,i=this.content;if(0===i.clientHeight)return void(this.showScrollbar=!1);let o=i.clientHeight/i.scrollHeight;this.handle.hei=Math.max(15,Math.round((i.clientHeight-4)*o)),this.handle.max=i.clientHeight-this.handle.hei-4,this.windowMax=i.scrollHeight-i.clientHeight,this.showScrollbar=1!==o,this.handle.sty.height=this.handle.hei+"px",this.moveScrollPosition(e?0:i.scrollTop),!t&&this.showScrollbar&&setTimeout(()=>this.recalculateScrollState(e),0)},moveScrollPosition(e,t=null){let i=this.scrollTop;this.scrollTop=Object(se["q"])(e,0,this.windowMax),this.handle.pos=this.topToHandleTop(this.scrollTop),this.handle.sty.transform=`translateY(${this.handle.pos}px)`,this.content.scrollTop=this.scrollTop;let o=i-this.scrollTop!==0;(o||0<this.scrollTop&&this.scrollTop<this.windowMax)&&(null===t||void 0===t||t.stopPropagation())},topToHandleTop(e){return e/this.windowMax*this.handle.max},handleTopToTop(e){return e/this.handle.max*this.windowMax}},mounted(){let e={childList:!0,characterData:!0,subtree:!0};this.onMutateObserver=new MutationObserver(()=>this.recalculateScrollState(this.resetScrollOnChange)),this.onResizeObserver=new ResizeObserver(()=>this.recalculateScrollState(!1)),this.onResizeObserver.observe(this.$el),this.onMutateObserver.observe(this.content,e)},unmounted(){this.onResizeObserver.disconnect(),this.onMutateObserver.disconnect()}});i("1a8c");const Ye=_()(We,[["render",Ne],["__scopeId","data-v-8005e880"]]);var Xe=Ye,Ke=i("69ee"),Je=Object(o["k"])({name:"ObjectEditor",computed:Object.assign(Object.assign({},Object(a["d"])("ActivePageStore",{selects(e){return e.selects.ref},selectTrigger(e){return e.selects.trigger},pageUpdate(e){return e.page.trigger}})),{selected(){if(1+this.selectTrigger!==0)return 1===this.selects.size?this.selects.values().next().value:void 0},property(){var e,t,i;if(1+this.pageUpdate!==0)return 0<(null!==(t=null===(e=this.selected)||void 0===e?void 0:e.props.value.size)&&void 0!==t?t:0)?null===(i=this.selected)||void 0===i?void 0:i.props:void 0}}),methods:Object.assign(Object.assign(Object.assign({},Object(a["b"])("AppActionsStore",["executeAppAction"])),Object(a["b"])("ActivePageStore",["setObjectProperty"])),{onChange(e,t){this.setObjectProperty({object:this.selected.id,property:e,value:t})}}),components:{ScrollBox:Xe,DictionaryFieldContents:Ke["a"]}});i("233b");const Ze=_()(Je,[["render",$e],["__scopeId","data-v-a6f348d4"]]);var Qe=Ze,et=Object(o["k"])({name:"EditorTabs",setup(){return{active:Object(o["v"])(0)}},computed:Object.assign(Object.assign({},Object(a["c"])("ContextMenuStore",["fileMenu","editMenu","layoutMenu","viewMenu","helpMenu"])),{menus(){return[this.fileMenu,this.editMenu,this.layoutMenu,this.viewMenu,this.helpMenu]}}),methods:Object.assign(Object.assign({},Object(a["b"])("AppActionsStore",["executeAppAction"])),{onItemSelect(e,t){return Object(r["a"])(this,void 0,void 0,(function*(){try{yield this.executeAppAction({id:e,data:t})}catch(i){console.error(i)}}))}}),components:{TabBox:He,Tab:Be,ObjectEditor:Qe}});i("e254");const tt=_()(et,[["render",Oe],["__scopeId","data-v-70494a9a"]]);var it=tt,ot=Object(o["k"])({name:"App",methods:Object.assign(Object.assign({},Object(a["b"])("ActiveDocumentStore",["createEmptyDocument","openDocument"])),Object(a["b"])("AppSettingsStore",["loadSettings"])),created(){return Object(r["a"])(this,void 0,void 0,(function*(){yield this.loadSettings(),yield this.createEmptyDocument("Untitled "+l["a"].file_type_name)}))},components:{AppHotkeyBox:ie,AppTitleBar:U,BlockDiagram:he,AppFooterBar:Se,EditorTabs:it}});i("1aaf");const st=_()(ot,[["render",n]]);var nt=st,rt={namespaced:!0,state:{page:{trigger:0,editor:Object(o["n"])(new se["j"](se["l"].createDummy())),ref:se["l"].createDummy()},hovers:[],selects:{trigger:0,ref:Object(o["n"])(new Map)},transform:{x:0,y:0,k:1},validator:void 0},getters:{hasSelection(e){return 1+e.selects.trigger!==0&&0<e.selects.ref.size},canUndo(e){return 1+e.page.trigger!==0&&e.page.editor.canUndo()},canRedo(e){return 1+e.page.trigger!==0&&e.page.editor.canRedo()},isPageValid(e){var t,i;return null===(i=null===(t=e.validator)||void 0===t?void 0:t.inValidState())||void 0===i||i}},actions:{select({commit:e},t){if(Array.isArray(t))for(let i of t)e("addToSelection",i);else e("addToSelection",t)},selectAll({dispatch:e,state:t}){let i=t.page.ref.children;e("unselectAll"),e("select",i.map(e=>e.id))},unselectAll({commit:e,state:t}){let i=t.selects;if(0!==i.ref.size)for(let o of i.ref.keys())e("removeFromSelection",o)},updateSelect({commit:e,state:t}){for(let i of t.selects.ref.keys())t.page.ref.lookup(i)||e("removeFromSelection",i)},pivotSelectGraphParents({dispatch:e}){let t=se["o"].getPrevGraphLinks.bind(se["o"]);e("__pivotSelectGraph",t)},pivotSelectGraphChildren({commit:e,dispatch:t,state:i}){let o=se["o"].getNextGraphLinks.bind(se["o"]);t("__pivotSelectGraph",o)},__pivotSelectGraph({commit:e,dispatch:t,state:i},o){let s=[...i.selects.ref.values()];t("unselectAll");for(let n of s){let t=o(n);if(n.hasRole(se["p"].Node))for(let i of t){let t=o(i);if(t.length)for(let i of t)e("addToSelection",i.id);else e("addToSelection",i.id)}else for(let i of t)e("addToSelection",i.id)}},hover({commit:e},t){e("clearHover"),e("setHover",t)},unhoverAll({commit:e}){e("clearHover")},updateHover({commit:e,state:t}){let i=t.hovers;i.length&&!t.page.ref.lookup(i[0].id)&&e("clearHover")},spawnObject({commit:e,state:t},{template:i,parent:o,x:s,y:n}){let r=t.page.ref.factory.createObject(i),a=t.transform;if(void 0===s)s=a.x+(t.page.ref.location.x-a.x);else{let{xMid:e,xMin:t}=r.boundingBox;s=(s-a.x)/a.k+e-t}if(void 0===n)n=a.y+(t.page.ref.location.y-a.y);else{let{yMid:e,yMin:t}=r.boundingBox;n=(n-a.y)/a.k+e-t}r.getAlignment()===se["a"].Grid&&(s=Object(se["r"])(s,t.page.ref.grid[0]),n=Object(se["r"])(n,t.page.ref.grid[1])),r.moveTo(s,n),e("addObjects",{objects:r,parent:o})},addObjects({commit:e},t){e("addObjects",t)},addLineObject({commit:e},t){e("addLineObject",t)},removeObject({commit:e,dispatch:t},i){e("removeObject",i),t("updateSelect"),t("updateHover")},removeSelected({commit:e,dispatch:t}){e("removeSelected"),t("updateSelect"),t("updateHover")},duplicateSelected({commit:e,dispatch:t,state:i,rootState:o}){let s=i.selects.ref,n=i.page.ref.factory,r=o.AppSettingsStore.settings.edit.clone_offset;if(!s.size)return;let a=n.cloneObjects(...s.values()),[l,c]=i.page.ref.grid;for(let d of a)d.moveBy(r[0]*l,r[1]*c);e("addObjects",{objects:a}),t("unselectAll"),t("select",a.map(e=>e.id))},attach({commit:e},t){e("attach",t)},detach({commit:e},t){e("detach",t)},moveBy({commit:e},t){e("moveObjectsBy",t)},setObjectProperty({commit:e},t){e("setObjectProperty",t)},reorderSelected({commit:e,state:t},i){let o=t.selects.ref;o.size&&e("reorderObjects",{objects:[...o.keys()].reverse(),layer:i})},moveCameraTo({commit:e},t){e("setCameraLocation",t)},resetView({commit:e}){e("setCameraLocation",{type:se["h"].Point,x:0,y:0,k:1})},zoomIn({commit:e,state:t}){let i,o=t.page.ref.location;switch(o.type){case se["h"].Region:i=t.transform.k+.25;break;case se["h"].Point:i=o.k+.25;break}e("setCameraLocation",{type:se["h"].Point,x:o.x,y:o.y,k:i})},zoomOut({commit:e,state:t}){let i,o=t.page.ref.location;switch(o.type){case se["h"].Region:i=t.transform.k-.25;break;case se["h"].Point:i=o.k-.25;break}e("setCameraLocation",{type:se["h"].Point,x:o.x,y:o.y,k:i})},moveCameraToSelection({commit:e,state:t}){if(0===t.selects.ref.size)return;let i=1/0,o=1/0,s=-1/0,n=-1/0;for(let d of t.selects.ref.values())i=Math.min(i,d.boundingBox.xMin),o=Math.min(o,d.boundingBox.yMin),s=Math.max(s,d.boundingBox.xMax),n=Math.max(n,d.boundingBox.yMax);let r=s-i,a=n-o,l=Math.round((i+s)/2),c=Math.round((o+n)/2);e("setCameraLocation",{type:se["h"].Region,x:l,y:c,w:r,h:a})},setViewTransform({commit:e},t){e("setViewTransform",t)},undo({commit:e,dispatch:t}){e("undo"),t("updateSelect"),t("updateHover")},redo({commit:e,dispatch:t}){e("redo"),t("updateSelect"),t("updateHover")},snapImage({commit:e,state:t,rootState:i},o){e("toggleHover",!1),e("toggleSelect",!1);let s,{diagram:n}=i.AppSettingsStore.settings.view,{image_export:r}=i.AppSettingsStore.settings.file,a=new se["k"](t.page.ref,r.padding,n.display_grid,n.display_shadows,n.display_debug_mode);return s=o.length?a.capture(o):a.capture(),e("toggleSelect",!0),e("toggleHover",!0),s}},mutations:{setActivePage(e,t){for(let i of e.selects.ref.values())i.setSelect(se["n"].Unselected);e.selects.ref=Object(o["n"])(new Map);for(let i of e.hovers)i.setHover(se["f"].Off);e.hovers=[],e.page.editor=Object(o["n"])(t),e.page.ref=Object(o["n"])(t.page),l["a"].validator&&(e.validator=new l["a"].validator,e.validator.reset())},addToSelection(e,t){let i=e.selects.ref,o=e.page.ref.lookup(t);if(!o)throw new Error(`'${t}' does not exist.`);if(!i.has(t)){if(0===i.size)o.setSelect(se["n"].Single);else if(1===i.size){let e=i.values().next().value;e.setSelect(se["n"].Multi),o.setSelect(se["n"].Multi)}else o.setSelect(se["n"].Multi);i.set(o.id,o),e.selects.trigger++}},removeFromSelection(e,t){let i=e.selects.ref;if(!i.has(t))return;let o=i.get(t);if(o.setSelect(se["n"].Unselected),i.delete(t),1===i.size){let e=i.values().next().value;e.setSelect(se["n"].Single)}e.selects.trigger++},toggleSelect(e,t){let i=e.selects.ref;if(t)if(1===i.size){let e=i.values().next().value;e.setSelect(se["n"].Single)}else for(let o of i.values())o.setSelect(se["n"].Multi);else for(let o of i.values())o.setSelect(se["n"].Unselected)},setHover(e,t){let i=e.page.ref.lookup(t);if(!i)throw new Error(`'${t}' does not exist.`);let o=[i];i.setHover(se["f"].Direct);let s=i.parent;while(s)o.push(s),s.setHover(se["f"].Indirect),s=s.parent;e.hovers=o},clearHover(e){let t=e.hovers;for(let i=0;i<t.length;i++)t[i].setHover(se["f"].Off);e.hovers=[]},toggleHover(e,t){let i=e.hovers;if(t&&i.length){i[0].setHover(se["f"].Direct);for(let e=1;e<i.length;e++)i[e].setHover(se["f"].Indirect)}else for(let o of i)o.setHover(se["f"].Off)},addObjects(e,{objects:t,parent:i}){var o;if(Array.isArray(t)){e.page.editor.beginTransaction();for(let o of t)e.page.editor.addObject(o,i);e.page.editor.endTransaction()}else e.page.editor.addObject(t,i);null===(o=e.validator)||void 0===o||o.run(e.page.ref),e.page.trigger++},addLineObject(e,{object:t,source:i,target:o,parent:s}){var n;e.page.editor.addLineObject(t,i,o,s),null===(n=e.validator)||void 0===n||n.run(e.page.ref),e.page.trigger++},removeObject(e,t){var i;e.page.editor.removeObjects(t),null===(i=e.validator)||void 0===i||i.run(e.page.ref),e.page.trigger++},removeSelected(e){var t;let i=e.selects.ref;i.size&&(e.page.editor.removeObjects(...i.keys()),null===(t=e.validator)||void 0===t||t.run(e.page.ref),e.page.trigger++)},attach(e,{object:t,anchor:i}){var o;e.page.editor.attach(t,i),null===(o=e.validator)||void 0===o||o.run(e.page.ref),e.page.trigger++},detach(e,{object:t,dx:i,dy:o}){var s;i=null!==i&&void 0!==i?i:0,o=null!==o&&void 0!==o?o:0,i||o?(e.page.editor.beginTransaction(),e.page.editor.moveObjectsBy(t,i,o),e.page.editor.detach(t),e.page.editor.endTransaction()):e.page.editor.detach(t),null===(s=e.validator)||void 0===s||s.run(e.page.ref),e.page.trigger++},moveObjectsBy(e,{objects:t,dx:i,dy:o}){i=Math.round(i),o=Math.round(o),e.page.editor.moveObjectsBy(t,i,o),e.page.trigger++},setObjectProperty(e,{object:t,property:i,value:o}){let s=e.page.ref.lookup(t);if(!s)throw new Error(`No object with id: '${t}'.`);s.setProperty(i,o),e.page.trigger++},reorderObjects(e,{objects:t,layer:i}){if(Array.isArray(t)){e.page.editor.beginTransaction();for(let o of t)e.page.editor.reorderObjectLayer(o,i);e.page.editor.endTransaction()}else e.page.editor.reorderObjectLayer(t,i);e.page.trigger++},setCameraLocation(e,t){e.page.editor.setCameraLocation(t),e.page.trigger++},setViewTransform(e,t){e.transform=t},undo(e){var t;e.page.editor.undo(),null===(t=e.validator)||void 0===t||t.run(e.page.ref),e.page.trigger++},redo(e){var t;e.page.editor.redo(),null===(t=e.validator)||void 0===t||t.run(e.page.ref),e.page.trigger++}}};class at{static textFile(e,t,i="txt"){let o=new Blob([t],{type:"octet/stream"}),s=window.URL.createObjectURL(o);this._aLink.href=s,this._aLink.download=`${e}.${i}`,this._aLink.click(),window.URL.revokeObjectURL(s)}static imageFile(e,t){t.toBlob(t=>{if(!t)return;let i=window.URL.createObjectURL(t);this._aLink.href=i,this._aLink.download=e+".png",this._aLink.click(),window.URL.revokeObjectURL(i)},"image/octet-stream")}}at._aLink=document.createElement("a");const lt={root:!0};var ct={namespaced:!0,state:{document:Object(o["n"])(se["c"].createDummy()),clipboard:[],publisher:void 0},getters:{hasClipboardContents(e){return 0<e.clipboard.length}},actions:{createEmptyDocument(e,t){return Object(r["a"])(this,void 0,void 0,(function*(){let{commit:i,state:o}=e,s=structuredClone(l["a"].schema);i("setActiveDocument",yield se["c"].create(t,s)),i("ActivePageStore/setActivePage",o.document.editor,lt)}))},openDocument(e,t){return Object(r["a"])(this,void 0,void 0,(function*(){let{commit:i,state:o}=e;i("setActiveDocument",yield se["c"].deserialize(t)),i("ActivePageStore/setActivePage",o.document.editor,lt)}))},saveDocumentToDevice({state:e}){let t=JSON.stringify(e.document.toExport());at.textFile(e.document.name,t,l["a"].file_type_extension)},saveActivePageImageToDevice({dispatch:e,state:t}){return Object(r["a"])(this,void 0,void 0,(function*(){let i=yield e("ActivePageStore/snapImage",[],lt);at.imageFile(t.document.name,i)}))},saveActiveSelectionImageToDevice({dispatch:e,state:t,rootState:i}){return Object(r["a"])(this,void 0,void 0,(function*(){let o=i.ActivePageStore.selects.ref;if(!o.size)return;let s=yield e("ActivePageStore/snapImage",[...o.keys()],lt);at.imageFile(t.document.name,s)}))},publishActivePageToDevice({dispatch:e,state:t,rootState:i,rootGetters:o}){return Object(r["a"])(this,void 0,void 0,(function*(){let e=i.ActivePageStore.page.ref;if(!t.publisher)return;if(!o["ActivePageStore/isPageValid"])return;let s=t.publisher.publish(e);at.textFile(t.document.name,s,"json")}))},clipboardCut({commit:e,dispatch:t,state:i,rootState:o}){let s=i.document.factory,n=o.ActivePageStore.selects.ref;n.size&&(e("setClipboard",s.cloneObjects(...n.values())),t("ActivePageStore/removeSelected",null,lt))},clipboardCopy({commit:e,state:t,rootState:i}){let o=t.document.factory,s=i.ActivePageStore.selects.ref,n=i.AppSettingsStore.settings.edit.clone_offset;if(!s.size)return;e("setClipboard",o.cloneObjects(...s.values()));let[r,a]=i.ActivePageStore.page.ref.grid;e("offsetClipboard",{dx:n[0]*r,dy:n[1]*a})},clipboardPaste({commit:e,dispatch:t,state:i,rootState:o}){let s=i.document.factory,n=o.AppSettingsStore.settings.edit.clone_offset,r=s.cloneObjects(...i.clipboard);t("ActivePageStore/addObjects",{objects:r},lt),t("ActivePageStore/unselectAll",null,lt),t("ActivePageStore/select",r.map(e=>e.id),lt);let[a,l]=o.ActivePageStore.page.ref.grid;e("offsetClipboard",{dx:n[0]*a,dy:n[1]*l})}},mutations:{setActiveDocument(e,t){e.document=Object(o["n"])(t),l["a"].publisher&&(e.publisher=new l["a"].publisher)},setClipboard(e,t){e.clipboard=t},offsetClipboard(e,{dx:t,dy:i}){for(let o of e.clipboard)o.moveBy(t,i)}}};function dt(e=document.body){let t=e;t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()}const ht={root:!0};var ut={namespaced:!0,actions:{executeAppAction({dispatch:e,rootState:t},{id:i,data:o}){return Object(r["a"])(this,void 0,void 0,(function*(){switch(i){case"new_file":yield e("ActiveDocumentStore/createEmptyDocument","Untitled "+l["a"].file_type_name,ht);break;case"open_file":yield e("ActiveDocumentStore/openDocument",o.file,ht);break;case"save_file":yield e("ActiveDocumentStore/saveDocumentToDevice",null,ht);break;case"save_image":yield e("ActiveDocumentStore/saveActivePageImageToDevice",null,ht);break;case"save_select_image":yield e("ActiveDocumentStore/saveActiveSelectionImageToDevice",null,ht);break;case"publish_file":yield e("ActiveDocumentStore/publishActivePageToDevice",null,ht);break;case"open_library":break;case"save_library":break;case"undo":yield e("ActivePageStore/undo",null,ht);break;case"redo":yield e("ActivePageStore/redo",null,ht);break;case"cut":yield e("ActiveDocumentStore/clipboardCut",null,ht);break;case"copy":yield e("ActiveDocumentStore/clipboardCopy",null,ht);break;case"paste":yield e("ActiveDocumentStore/clipboardPaste",null,ht);break;case"create_object":yield e("ActivePageStore/spawnObject",{template:o.template,parent:o.parent,x:o.x,y:o.y},ht);break;case"delete":yield e("ActivePageStore/removeSelected",null,ht);break;case"duplicate":yield e("ActivePageStore/duplicateSelected",null,ht);break;case"select_all":yield e("ActivePageStore/selectAll",null,ht);break;case"selection_to_front":yield e("ActivePageStore/reorderSelected",se["g"].Top,ht);break;case"selection_to_back":yield e("ActivePageStore/reorderSelected",se["g"].Bottom,ht);break;case"bring_selection_forward":yield e("ActivePageStore/reorderSelected",se["g"].OneAbove,ht);break;case"send_selection_backward":yield e("ActivePageStore/reorderSelected",se["g"].OneBelow,ht);break;case"align_left":break;case"align_center":break;case"align_right":break;case"align_top":break;case"align_middle":break;case"align_bottom":break;case"group":break;case"ungroup":break;case"open_group":break;case"close_group":break;case"toggle_grid":yield e("AppSettingsStore/setGridDisplay",!o.value,ht);break;case"toggle_shadows":yield e("AppSettingsStore/setShadowsDisplay",!o.value,ht);break;case"enable_high_quality_render":yield e("AppSettingsStore/setHighRenderQuality",!0,ht);break;case"enable_low_quality_render":yield e("AppSettingsStore/setHighRenderQuality",!1,ht);break;case"reset_view":yield e("ActivePageStore/resetView",null,ht);break;case"zoom_in":yield e("ActivePageStore/zoomIn",null,ht);break;case"zoom_out":yield e("ActivePageStore/zoomOut",null,ht);break;case"jump_to_selection":yield e("ActivePageStore/moveCameraToSelection",null,ht);break;case"jump_to_parents":yield e("ActivePageStore/pivotSelectGraphParents",null,ht),yield e("ActivePageStore/moveCameraToSelection",null,ht);break;case"jump_to_children":yield e("ActivePageStore/pivotSelectGraphChildren",null,ht),yield e("ActivePageStore/moveCameraToSelection",null,ht);break;case"fullscreen":dt();break;case"toggle_debug_view":yield e("AppSettingsStore/setDebugDisplay",!o.value,ht);break;case"open_about_window":break;default:break}}))}}},pt=i("14d9"),gt={namespaced:!0,state:{settings:{file:{image_export:{padding:0}},edit:{clone_offset:[0,0]},view:{diagram:{display_grid:!0,display_shadows:!0,display_debug_mode:!1,render_high_quality:!0,disable_shadows_at:0}},hotkeys:{file:{new_file:"",open_file:"",save_file:"",save_image:"",save_select_image:"",publish_file:"",open_library:"",save_library:""},edit:{undo:"",redo:"",cut:"",copy:"",paste:"",delete:"",duplicate:"",select_all:""},layout:{selection_to_front:"",selection_to_back:"",bring_selection_forward:"",send_selection_backward:"",align_left:"",align_center:"",align_right:"",align_top:"",align_middle:"",align_bottom:"",group:"",ungroup:"",open_group:"",close_group:""},view:{toggle_grid:"",toggle_shadows:"",reset_view:"",zoom_in:"",zoom_out:"",fullscreen:"",jump_to_selection:"",jump_to_parents:"",jump_to_children:"",toggle_debug_view:""},select:{many:""}}}},actions:{loadSettings({commit:e}){return Object(r["a"])(this,void 0,void 0,(function*(){let t=pt;e("loadSettings",t)}))},setGridDisplay({commit:e},t){e("setDiagramSetting",{key:"display_grid",value:t})},setShadowsDisplay({commit:e},t){e("setDiagramSetting",{key:"display_shadows",value:t})},setHighRenderQuality({commit:e},t){e("setDiagramSetting",{key:"render_high_quality",value:t})},setDebugDisplay({commit:e},t){e("setDiagramSetting",{key:"display_debug_mode",value:t})}},mutations:{loadSettings(e,t){e.settings=t},setDiagramSetting(e,{key:t,value:i}){e.settings.view.diagram[t]=i}}},ft={namespaced:!0,getters:{fileMenu(e,t,i,o){let{file:s}=i.AppSettingsStore.settings.hotkeys,n=l["a"].file_type_name,r=o["ActivePageStore/isPageValid"],a=o["ActivePageStore/hasSelection"];return bt({id:"file_menu",text:"File",action:R.OpenSubmenu,sections:[{id:"open_file_options",items:[{id:"new_file",text:"New File",action:R.RunTask,shortcut:s.new_file},{id:"open_file",text:"Open File...",action:R.OpenFile,shortcut:s.open_file}]},{id:"save_file_options",items:[{id:"save_file",text:"Save",action:R.RunTask,shortcut:s.save_file},{id:"save_image",text:"Save as Image",action:R.RunTask,shortcut:s.save_image},{id:"save_select_image",text:"Save Selection as Image",action:R.RunTask,shortcut:s.save_select_image,disabled:!a}]},{id:"publish_options",items:[{id:"publish_file",text:"Publish "+n,action:R.RunTask,shortcut:s.publish_file,disabled:!r}]}]},{publish_options:void 0!==l["a"].publisher})},editMenu(e,t,i){let{edit:o}=i.AppSettingsStore.settings.hotkeys;return{id:"edit_menu",text:"Edit",action:R.OpenSubmenu,sections:[t.undoRedoMenu,t.clipboardMenu,t.deleteMenu,t.duplicateMenu,t.createMenu,t.selectAllMenu]}},undoRedoMenu(e,t,i,o){let{edit:s}=i.AppSettingsStore.settings.hotkeys;return{id:"undo_redo_options",items:[{id:"undo",text:"Undo",action:R.RunTask,shortcut:s.undo,disabled:!o["ActivePageStore/canUndo"]},{id:"redo",text:"Redo",action:R.RunTask,shortcut:s.redo,disabled:!o["ActivePageStore/canRedo"]}]}},clipboardMenu(e,t,i,o){let{edit:s}=i.AppSettingsStore.settings.hotkeys,n=o["ActiveDocumentStore/hasClipboardContents"],r=o["ActivePageStore/hasSelection"];return{id:"clipboard_options",items:[{id:"cut",text:"Cut",action:R.RunTask,shortcut:s.cut,disabled:!r},{id:"copy",text:"Copy",action:R.RunTask,shortcut:s.copy,disabled:!r},{id:"paste",text:"Paste",action:R.RunTask,shortcut:s.paste,disabled:!n}]}},deleteMenu(e,t,i,o){let{edit:s}=i.AppSettingsStore.settings.hotkeys,n=o["ActivePageStore/hasSelection"];return{id:"delete_options",items:[{id:"delete",text:"Delete",action:R.RunTask,shortcut:s.delete,disabled:!n}]}},duplicateMenu(e,t,i,o){let{edit:s}=i.AppSettingsStore.settings.hotkeys,n=o["ActivePageStore/hasSelection"];return{id:"duplicate_options",items:[{id:"duplicate",text:"Duplicate",action:R.RunTask,shortcut:s.duplicate,disabled:!n}]}},selectAllMenu(e,t,i){let{edit:o}=i.AppSettingsStore.settings.hotkeys;return{id:"select_options",items:[{id:"select_all",text:"Select All",action:R.RunTask,shortcut:o.select_all}]}},createMenu(e,t,i){let{document:o}=i.ActiveDocumentStore,s=[];for(let r of o.factory.getBlockTemplates())s.push({id:"create_object",text:r.name,action:R.RunTask,data:{template:r.id}});let n=[];for(let r of o.factory.getLineTemplates())n.push({id:"create_object",text:r.name,action:R.RunTask,data:{template:r.id}});return{id:"create_options",items:[{id:"create_menu",text:"Create",action:R.OpenSubmenu,sections:[{id:"block_objects",items:s},{id:"line_objects",items:n}]}]}},layoutMenu(e,t,i){let{layout:o}=i.AppSettingsStore.settings.hotkeys;return{id:"layout_menu",text:"Layout",action:R.OpenSubmenu,sections:[t.layeringMenu]}},layeringMenu(e,t,i){let{layout:o}=i.AppSettingsStore.settings.hotkeys;return{id:"layering_options",items:[{id:"selection_to_front",text:"To Front",action:R.RunTask,shortcut:o.selection_to_front},{id:"selection_to_back",text:"To Back",action:R.RunTask,shortcut:o.selection_to_back},{id:"bring_selection_forward",text:"Bring Forward",action:R.RunTask,shortcut:o.bring_selection_forward},{id:"send_selection_backward",text:"Send Backward",action:R.RunTask,shortcut:o.send_selection_backward}]}},groupingMenu(e,t,i){let{layout:o}=i.AppSettingsStore.settings.hotkeys;return{id:"grouping_options",items:[{id:"group",text:"Group",action:R.RunTask,shortcut:o.group},{id:"ungroup",text:"Ungroup",action:R.RunTask,shortcut:o.ungroup}]}},groupMenu(e,t,i){let{layout:o}=i.AppSettingsStore.settings.hotkeys;return{id:"group_options",items:[{id:"open_group",text:"Open Group",action:R.RunTask,shortcut:o.open_group},{id:"close_group",text:"Close Group",action:R.RunTask,shortcut:o.close_group}]}},viewMenu(e,t,i){return{id:"view_menu",text:"View",action:R.OpenSubmenu,sections:[t.diagramViewMenu,t.diagramRenderMenu,t.zoomMenu,t.jumpMenu,t.fullscreenMenu,t.developerViewMenu]}},diagramViewMenu(e,t,i){let{view:o}=i.AppSettingsStore.settings.hotkeys,{display_grid:s,display_shadows:n}=i.AppSettingsStore.settings.view.diagram;return{id:"diagram_view_options",items:[{id:"toggle_grid",text:"Grid",action:R.ToggleValue,shortcut:o.toggle_grid,value:s},{id:"toggle_shadows",text:"Shadows",action:R.ToggleValue,shortcut:o.toggle_shadows,value:n}]}},diagramRenderMenu(e,t,i){let{render_high_quality:o}=i.AppSettingsStore.settings.view.diagram;return{id:"diagram_render_quality",items:[{id:"enable_high_quality_render",text:"Rendering – High Quality",action:R.ToggleValue,value:o},{id:"enable_low_quality_render",text:"Rendering – Fast",action:R.ToggleValue,value:!o}]}},zoomMenu(e,t,i){let{view:o}=i.AppSettingsStore.settings.hotkeys;return{id:"zoom_options",items:[{id:"reset_view",text:"Reset View",action:R.RunTask,shortcut:o.reset_view},{id:"zoom_in",text:"Zoom In",action:R.RunTask,shortcut:o.zoom_in},{id:"zoom_out",text:"Zoom Out",action:R.RunTask,shortcut:o.zoom_out}]}},jumpMenu(e,t,i,o){let{view:s}=i.AppSettingsStore.settings.hotkeys,n=o["ActivePageStore/hasSelection"];return{id:"jump_options",items:[{id:"jump_to_selection",text:"Zoom to Selection",action:R.RunTask,shortcut:s.jump_to_selection,disabled:!n},{id:"jump_to_parents",text:"Jump to Parents",action:R.RunTask,shortcut:s.jump_to_parents,disabled:!n},{id:"jump_to_children",text:"Jump to Children",action:R.RunTask,shortcut:s.jump_to_children,disabled:!n}]}},fullscreenMenu(e,t,i){let{view:o}=i.AppSettingsStore.settings.hotkeys;return{id:"fullscreen_options",items:[{id:"fullscreen",text:"Fullscreen",action:R.RunTask,shortcut:o.fullscreen}]}},developerViewMenu(e,t,i){let{view:o}=i.AppSettingsStore.settings.hotkeys,{display_debug_mode:s}=i.AppSettingsStore.settings.view.diagram;return{id:"developer_view_options",items:[{id:"toggle_debug_view",text:"Debug Mode",action:R.ToggleValue,shortcut:o.toggle_debug_view,value:s}]}},helpMenu(){let e=l["a"].help_links;return{id:"help_menu",text:"Help",action:R.OpenSubmenu,sections:[{id:"help_links",items:e.map(e=>({id:"open_help_link",text:e.text,action:R.OpenLink,link:e.url}))}]}}}};function bt(e,t={}){if(!(e.id in t)||t[e.id]){if(e.action!==R.OpenSubmenu)return e;for(let i=e.sections.length-1;0<=i;i--){let o=e.sections[i];if(o.id in t&&!t[o.id])e.sections.splice(i,1);else{for(let e=o.items.length-1;0<=e;e--){let i=o.items[e];i.id in t&&!t[i.id]?o.items.splice(e,1):i.action===R.OpenSubmenu&&(bt(i,t),0===i.sections.length&&o.items.splice(e,1))}0===o.items.length&&e.sections.splice(i,1)}}return 0===e.sections.length?void 0:e}}var mt={namespaced:!0,getters:{nativeHotkeys(){return[{id:"refresh",action:K.RunTask,shortcut:"Control+R",allowBrowserBehavior:!0},{id:"hard-refresh",action:K.RunTask,shortcut:"Control+Shift+R",allowBrowserBehavior:!0}]},fileHotkeys(e,t,i){let{file:o}=i.AppSettingsStore.settings.hotkeys;return[{id:"new_file",action:K.RunTask,shortcut:o.new_file},{id:"open_file",action:K.OpenFile,shortcut:o.open_file},{id:"save_file",action:K.RunTask,shortcut:o.save_file},{id:"save_image",action:K.RunTask,shortcut:o.save_image},{id:"save_select_image",action:K.RunTask,shortcut:o.save_select_image},{id:"publish_file",action:K.RunTask,shortcut:o.publish_file},{id:"open_library",action:K.OpenFile,shortcut:o.open_library},{id:"save_library",action:K.RunTask,shortcut:o.save_library}]},editHotKeys(e,t,i){let o={delay:400,interval:50},{edit:s}=i.AppSettingsStore.settings.hotkeys;return[{id:"undo",action:K.RunTask,shortcut:s.undo,repeat:o},{id:"redo",action:K.RunTask,shortcut:s.redo,repeat:o},{id:"cut",action:K.RunTask,shortcut:s.cut},{id:"copy",action:K.RunTask,shortcut:s.copy},{id:"paste",action:K.RunTask,shortcut:s.paste},{id:"delete",action:K.RunTask,shortcut:s.delete},{id:"duplicate",action:K.RunTask,shortcut:s.duplicate},{id:"select_all",action:K.RunTask,shortcut:s.select_all}]},layoutHotkeys(e,t,i){let{layout:o}=i.AppSettingsStore.settings.hotkeys;return[{id:"selection_to_front",action:K.RunTask,shortcut:o.selection_to_front},{id:"selection_to_back",action:K.RunTask,shortcut:o.selection_to_back},{id:"bring_selection_forward",action:K.RunTask,shortcut:o.bring_selection_forward},{id:"send_selection_backward",action:K.RunTask,shortcut:o.send_selection_backward},{id:"align_left",action:K.RunTask,shortcut:o.align_left},{id:"align_center",action:K.RunTask,shortcut:o.align_center},{id:"align_right",action:K.RunTask,shortcut:o.align_right},{id:"align_top",action:K.RunTask,shortcut:o.align_top},{id:"align_middle",action:K.RunTask,shortcut:o.align_middle},{id:"align_bottom",action:K.RunTask,shortcut:o.align_bottom},{id:"group",action:K.RunTask,shortcut:o.group},{id:"ungroup",action:K.RunTask,shortcut:o.ungroup},{id:"open_group",action:K.RunTask,shortcut:o.open_group},{id:"close_group",action:K.RunTask,shortcut:o.close_group}]},viewHotkeys(e,t,i){let{view:o}=i.AppSettingsStore.settings.hotkeys,{display_grid:s,display_shadows:n,display_debug_mode:r}=i.AppSettingsStore.settings.view.diagram;return[{id:"toggle_grid",action:K.ToggleValue,shortcut:o.toggle_grid,value:s},{id:"toggle_shadows",action:K.ToggleValue,shortcut:o.toggle_shadows,value:n},{id:"reset_view",action:K.RunTask,shortcut:o.reset_view},{id:"zoom_in",action:K.RunTask,shortcut:o.zoom_in},{id:"zoom_out",action:K.RunTask,shortcut:o.zoom_out},{id:"jump_to_selection",action:K.RunTask,shortcut:o.jump_to_selection},{id:"jump_to_parents",action:K.RunTask,shortcut:o.jump_to_parents},{id:"jump_to_children",action:K.RunTask,shortcut:o.jump_to_children},{id:"fullscreen",action:K.RunTask,shortcut:o.fullscreen},{id:"toggle_debug_view",action:K.ToggleValue,shortcut:o.toggle_debug_view,value:r}]}}},_t=Object(a["a"])({modules:{ActiveDocumentStore:ct,ActivePageStore:rt,AppActionsStore:ut,AppSettingsStore:gt,ContextMenuStore:ft,HotkeyStore:mt}});i("0da8");Object(o["c"])(nt).use(_t).mount("#app")},e254:function(e,t,i){"use strict";i("f367")},e37d:function(e,t,i){"use strict";i.d(t,"f",(function(){return r})),i.d(t,"g",(function(){return a})),i.d(t,"i",(function(){return c})),i.d(t,"a",(function(){return d})),i.d(t,"b",(function(){return h})),i.d(t,"c",(function(){return u})),i.d(t,"d",(function(){return p})),i.d(t,"e",(function(){return g})),i.d(t,"h",(function(){return f}));var o=i("5368"),s=i("317b"),n=i("1dd9");class r{constructor(e,t,i){var r,a,c,d,h;if(this.id=null!==(r=null===i||void 0===i?void 0:i.id)&&void 0!==r?r:crypto.randomUUID(),this.attrs=null!==(a=null===i||void 0===i?void 0:i.attrs)&&void 0!==a?a:n["j"].False,this.setAlignment(n["a"].Free),this.setCursor(n["c"].Default),this.setInheritAlignment(n["h"].True),this.setSemanticRole(s["e"].None),this.children=[],this.factory=e,this.template=t,this.boundingBox=new l,this.boundingBox.xMid=null!==(c=null===i||void 0===i?void 0:i.x)&&void 0!==c?c:0,this.boundingBox.yMid=null!==(d=null===i||void 0===i?void 0:i.y)&&void 0!==d?d:0,this.props=o["f"].create({type:o["g"].Dictionary,form:null!==(h=null===t||void 0===t?void 0:t.properties)&&void 0!==h?h:{},text_key:""},null===i||void 0===i?void 0:i.properties),null===i||void 0===i?void 0:i.children)for(let o=0;o<i.children.length;o++)this.addChild(i.children[o],o,!1)}*getSubtree(e){let t=new Set([this.id]),i=[this];while(0!=i.length){let o=i.shift();if(e&&!e(o)||(yield o),!(o instanceof d))for(let e of o.children)t.has(e.id)||(t.add(e.id),i.push(e))}}addChild(e,t=this.children.length,i=!0){if(this.hasChild(e.id))throw new a(`Object already has a child with the id '${e.id}'.`,this);e.parent=this,this.children.splice(t,0,e),i&&this.updateLayout(c.ChildAdded)}reorderChild(e,t,i=!0){let o=this.children.findIndex(t=>t.id===e),s=this.children[o];if(!s)throw new a(`Object has no child with the id '${e}'.`);this.children.splice(o,1),this.children.splice(t,0,s),i&&this.updateLayout(c.Movement)}removeChild(e,t=!0,i=!0){let o=this.children.findIndex(t=>t.id===e),s=this.children[o];if(s){if(i&&s.hasExternalAttachments())throw new a(`'${s.id}' still maintains external attachments.`,s);s.parent=void 0,this.children.splice(o,1),t&&this.updateLayout(c.ChildDeleted)}}hasChild(e){return void 0!==this.children.find(t=>t.id===e)}hasExternalAttachments(){let e=new Map;for(let t of this.getSubtree())(t instanceof d||t instanceof h)&&e.set(t.id,t);for(let t of e.values())if(t instanceof h){if(t.isAttached()&&!e.has(t.anchor.id))return!0}else if(t instanceof d)for(let i of t.children)if(!e.has(i.id))return!0;return!1}getIndexInParent(){var e,t;return null!==(t=null===(e=this.parent)||void 0===e?void 0:e.children.indexOf(this))&&void 0!==t?t:-1}getObjectAt(e,t){let i=void 0,o=void 0;for(let s=this.children.length-1;0<=s;s--){let r=this.children[s];if(!(r instanceof h&&r.isAttached())&&(o=r.getObjectAt(e,t),o&&(!i||o.hasHigherPriorityThan(i))&&(i=o,i.getPriority()===n["l"].High)))break}return i}moveTo(e,t,i=!0){this.moveBy(e-this.boundingBox.xMid,t-this.boundingBox.yMid,i)}moveBy(e,t,i=!0){this.boundingBox.xMin+=e,this.boundingBox.xMid+=e,this.boundingBox.xMax+=e,this.boundingBox.yMin+=t,this.boundingBox.yMid+=t,this.boundingBox.yMax+=t;let o=!0;for(let s of this.children)s instanceof h&&s.isAttached()||(o=!1,s.moveBy(e,t));o&&this.updateLayout(c.Movement,i)}setProperty(e,t){e instanceof o["h"]&&(e.value=t,this.updateLayout(c.PropertyChange))}updateLayout(e,t=!0){var i;let o=this.boundingBox;o.xMin=1/0,o.yMin=1/0,o.xMax=-1/0,o.yMax=-1/0;let s=n["a"].Free;for(let n of this.children)o.xMin=Math.min(o.xMin,n.boundingBox.xMin),o.yMin=Math.min(o.yMin,n.boundingBox.yMin),o.xMax=Math.max(o.xMax,n.boundingBox.xMax),o.yMax=Math.max(o.yMax,n.boundingBox.yMax),s=Math.max(s,n.getAlignment());o.xMid=Math.floor((o.xMin+o.xMax)/2),o.yMid=Math.floor((o.yMin+o.yMax)/2),this.isAlignmentInherited()&&this.setAlignment(s),t&&(null===(i=this.parent)||void 0===i||i.updateLayout(e))}getAlignment(e=this.attrs){return e&n["b"]}getCursor(e=this.attrs){return e&n["e"]}isHovered(e=this.attrs){return(e&n["g"])!==n["f"].Off}isHoveredOrSelected(e=this.attrs){return 0<(e&(n["o"]|n["g"]))}isAlignmentInherited(e=this.attrs){return(e&n["i"])===n["h"].True}hasUserSetPosition(e=this.attrs){return(e&n["k"])===n["j"].True}getPositionSetByUser(e=this.attrs){return e&n["k"]}getPriority(e=this.attrs){return e&n["m"]}hasHigherPriorityThan(e){return this.getPriority()>e.getPriority()}isSelected(e=this.attrs){return(e&n["o"])!==n["n"].Unselected}getSemanticRole(e=this.attrs){return e&n["p"]}hasRole(e,t=this.attrs){return(t&n["p"])===e}setAlignment(e){this.attrs=this.attrs&~n["b"]|e}setCursor(e){this.attrs=this.attrs&~n["e"]|e}setHover(e){this.attrs=this.attrs&~n["g"]|e}setInheritAlignment(e){this.attrs=this.attrs&~n["i"]|e}setPositionSetByUser(e){this.attrs=this.attrs&~n["k"]|e}setPriority(e){this.attrs=this.attrs&~n["m"]|e}setSelect(e){this.attrs=this.attrs&~n["o"]|e}setSemanticRole(e){this.attrs=this.attrs&~n["p"]|e}toExport(){return{id:this.id,x:this.boundingBox.xMid,y:this.boundingBox.yMid,attrs:this.getPositionSetByUser(),template:this.template.id,children:this.children.map(e=>e.id),properties:this.props.toRawValue()}}}class a extends Error{constructor(e,t){super(e),this.subject=t}}class l{constructor(){this.xMin=0,this.yMin=0,this.xMid=0,this.yMid=0,this.xMax=0,this.yMax=0}}const c={Movement:1,ChildAdded:2,ChildDeleted:4,ObjectInit:8,PropertyChange:16};class d extends r{constructor(e,t,i){var o;super(e,t,i),this.radius=t.radius,this.template=t,this.lineTemplates=t.line_templates,this.angle=null!==(o=null===i||void 0===i?void 0:i.angle)&&void 0!==o?o:s["a"].DEG_0}addChild(e,t=this.children.length){if(!(e instanceof h))throw new a(`'${e.id}' must be of type '${d.name}.'`,e);if(e.isAttached())throw new a(`'${e.id}' is already anchored.`,e);if(this.hasChild(e.id))throw new a(`Anchor already has a child with the id '${e.id}'.`,this);e.anchor=this,this.children.splice(t,0,e)}removeChild(e){let t=this.children.findIndex(t=>t.id===e),i=this.children[t];if(i){if(!(i instanceof h))throw new a(`'${e}' is not an '${h.name}.'`,i);i.anchor=void 0,this.children.splice(t,1)}}hasAttachments(){return 0<this.children.length}getObjectAt(e,t){let i=void 0,o=void 0;for(let l=this.children.length-1;0<=l;l--)if(o=this.children[l].getObjectAt(e,t),o&&(!i||o.hasHigherPriorityThan(i))&&(i=o,i.getPriority()===n["l"].High))break;let s=this.radius,r=e-this.boundingBox.xMid,a=t-this.boundingBox.yMid;return i&&i.getPriority()>n["l"].Normal?i:r*r+a*a<s*s?this:void 0}moveBy(e,t,i=!0){this.boundingBox.xMin+=e,this.boundingBox.xMid+=e,this.boundingBox.xMax+=e,this.boundingBox.yMin+=t,this.boundingBox.yMid+=t,this.boundingBox.yMax+=t;for(let o of this.children)o.isAttached(this)?o.moveTo(this.boundingBox.xMid,this.boundingBox.yMid):console.warn(`'${o.id}' incorrectly attached to anchor.`);this.updateLayout(c.Movement,i)}updateLayout(e,t=!0){var i;let o=this.boundingBox;o.xMin=o.xMid-this.radius,o.yMin=o.yMid-this.radius,o.xMax=o.xMid+this.radius,o.yMax=o.yMid+this.radius,t&&(null===(i=this.parent)||void 0===i||i.updateLayout(e))}toExport(){return Object.assign(Object.assign({},super.toExport()),{angle:this.angle})}makeLine(){let e=this.lineTemplates[this.angle],t=this.factory.createObject(e);if(t instanceof g)return t;throw new a(`Template '${e}' is not a line.`,t)}}class h extends r{constructor(e,t,i){super(e,t,i),this.anchor=void 0}isAttached(e){return e?this.anchor===e:void 0!==this.anchor}getIndexInAnchor(){var e,t;return null!==(t=null===(e=this.anchor)||void 0===e?void 0:e.children.indexOf(this))&&void 0!==t?t:-1}}class u extends h{constructor(e,t,i){super(e,t,i)}moveBy(e,t,i=!0,o=!1){var s;o?super.moveBy(e,t,i):null===(s=this.parent)||void 0===s||s.moveChild(this.id,e,t,i)}}class p extends r{constructor(e,t,i){super(e,t,i)}moveBy(e,t,i=!0,o=!1){var s;o?super.moveBy(e,t,i):null===(s=this.parent)||void 0===s||s.moveChild(this.id,e,t,i)}}class g extends r{constructor(e,t,i){super(e,t,i),this.style=t.style,this.template=t,this.hitboxWidth=t.hitbox_width}get srcEnding(){return this.children.at(0)}get trgEnding(){return this.children.at(-1)}addChild(e,t=this.children.length,i=!0){if(!(e instanceof u||e instanceof p)){let t=u.name,i=p.name;throw new a(`Child must be of type '${t}' or '${i}.'`,e)}super.addChild(e,t,i)}reorderChild(e,t,i=!0){throw new a("Line objects cannot be reordered.",this)}isAnchored(){for(let e of this.children)if(e instanceof u&&e.isAttached())return!0;return!1}setSelect(e){super.setSelect(e);let t=this.isSelected()?n["l"].High:n["l"].Normal;for(let i of this.children)i.setPriority(t)}}class f extends r{constructor(e,t,i){super(e,t,i),this.anchorCache=[],this._objectCache=new Map([[this.id,this]])}lookup(e){return this._objectCache.get(e)}updateLayout(e){let{ChildAdded:t,ChildDeleted:i,ObjectInit:o}=c;if(super.updateLayout(e),e&(o|t|i)){this._objectCache.clear(),this.anchorCache.splice(0,this.anchorCache.length);for(let e of this.getSubtree())e instanceof d&&this.anchorCache.push(e),this._objectCache.set(e.id,e)}}}},e5f1:function(e,t,i){"use strict";i("97e0")},f0b6:function(e,t,i){"use strict";i("1d59")},f367:function(e,t,i){},fa17:function(e,t,i){"use strict";class o{constructor(){this._errors=[]}run(e){this.reset(),this.validate(e)}validate(e){}getErrors(){return this._errors}addError(e,t){this._errors.push({object:e.id,reason:t})}inValidState(){return 0===this._errors.length}reset(){this._errors=[]}}var s=i("24a6");class n extends o{validate(e){let t=s["o"].toGraph(e);for(let i of t.edges)1===i.prev.length&&1===i.next.length||this.addError(i,"Everything should be connected")}}var r=n;class a{publish(e){return""}}class l extends a{publish(e){s["o"].toGraph(e);return console.log("DID IT!"),""}}var c=l,d=i("5368"),h=i("317b");const u={max_width:320,head:{fill_color:"#000",stroke_color:"#000",title:{font:{family:"Inter",size:"8pt",weight:600},color:"#d8d8d8",padding:8},subtitle:{font:{family:"Inter",size:"13pt",weight:800},color:"#d8d8d8",lineHeight:23},vertical_padding:14},body:{fill_color:"#1f1f1f",stroke_color:"#383838",field_name:{font:{family:"Inter",size:"8pt",weight:600},color:"#b3b3b3",padding:12},field_value:{font:{family:"Inter",size:"10.5pt"},color:"#bfbfbf",line_height:20,padding:22},vertical_padding:18},select_outline:{padding:4,solo_color:"#e6d845",many_color:"#e6d845",border_radius:9},anchor_markers:{color:"#ffffff",size:3},border_radius:5,horizontal_padding:20},p={fill_color:"#c94040",stroke_color:"#dd5050",text:{font:{family:"Inter",size:"14pt",weight:800},color:"#d8d8d8"},border_radius:15,select_outline:{padding:4,solo_color:"#e6d845",many_color:"#e6d845",border_radius:19},anchor_markers:{color:"#ffffff",size:3},vertical_padding:18,horizontal_padding:35},g=structuredClone(u);g.head.fill_color="#637bc9",g.head.stroke_color="#708ce6";const f=structuredClone(u);f.head.fill_color="#c26130",f.head.stroke_color="#e57339";const b=structuredClone(u);b.head.fill_color="#2a9642",b.head.stroke_color="#32b34e";const m=structuredClone(p),_=structuredClone(p),y=structuredClone(u);y.head.fill_color="#637bc9",y.head.stroke_color="#708ce6";const v=structuredClone(u);v.head.fill_color="#637bc9",v.head.stroke_color="#708ce6";const x=structuredClone(u);x.head.fill_color="#637bc9",x.head.stroke_color="#708ce6";const k=structuredClone(u);k.head.fill_color="#637bc9",k.head.stroke_color="#708ce6";const j=structuredClone(u);j.head.fill_color="#637bc9",j.head.stroke_color="#708ce6";const w=structuredClone(u);w.head.fill_color="#637bc9",w.head.stroke_color="#708ce6";const S={file_type_name:"Attack Flow",file_type_extension:"afb",schema:{page_template:"@__builtin__page",templates:[{id:"action",name:"Action Block",type:h["f"].DictionaryBlock,role:h["e"].Node,title_key:"technique_name",properties:{technique_id:{type:d["g"].String,value:""},technique_name:{type:d["g"].String,value:""},technique_ref:{type:d["g"].String,value:""},description:{type:d["g"].String,value:""},created:{type:d["g"].String,value:""},modified:{type:d["g"].String,value:""}},anchor_template:"@__builtin__anchor",style:g},{id:"asset",name:"Asset Block",type:h["f"].DictionaryBlock,role:h["e"].Node,title_key:"name",properties:{name:{type:d["g"].String,value:""},description:{type:d["g"].String,value:""}},anchor_template:"@__builtin__anchor",style:f},{id:"condition",name:"Condition Block",type:h["f"].DictionaryBlock,role:h["e"].Node,title_key:"description",properties:{description:{type:d["g"].String,value:""},pattern:{type:d["g"].String,value:""},pattern_type:{type:d["g"].String,value:""},pattern_version:{type:d["g"].String,value:""}},anchor_template:"@__builtin__anchor",style:b},{id:"and",name:"AND Block",type:h["f"].OperatorBlock,role:h["e"].Node,text:"AND",anchor_template:"@__builtin__anchor",style:m},{id:"or",name:"OR Block",type:h["f"].OperatorBlock,role:h["e"].Node,text:"OR",anchor_template:"@__builtin__anchor",style:_},{id:"infrastructure",name:"Infrastructure Block",type:h["f"].DictionaryBlock,role:h["e"].Node,title_key:"name",properties:{description:{type:d["g"].String,value:""},name:{type:d["g"].String,value:""},infrustructure_types:{type:d["g"].String,value:""},aliases:{type:d["g"].String,value:""},kill_chain_phases:{type:d["g"].String,value:""},first_seen:{type:d["g"].String,value:""},last_seen:{type:d["g"].String,value:""}},anchor_template:"@__builtin__anchor",style:y},{id:"identity",name:"Identity Block",type:h["f"].DictionaryBlock,role:h["e"].Node,title_key:"name",properties:{name:{type:d["g"].String,value:""},description:{type:d["g"].String,value:""},roles:{type:d["g"].String,value:""},identity_class:{type:d["g"].String,value:""},sectors:{type:d["g"].String,value:""},contact_information:{type:d["g"].String,value:""}},anchor_template:"@__builtin__anchor",style:v},{id:"threat_actor",name:"Threat Actor Block",type:h["f"].DictionaryBlock,role:h["e"].Node,title_key:"name",properties:{name:{type:d["g"].String,value:""},description:{type:d["g"].String,value:""},threat_actor_types:{type:d["g"].String,value:""},aliases:{type:d["g"].String,value:""},first_seen:{type:d["g"].String,value:""},last_seen:{type:d["g"].String,value:""},roles:{type:d["g"].String,value:""},goals:{type:d["g"].String,value:""},sophistication:{type:d["g"].String,value:""},resource_level:{type:d["g"].String,value:""},primary_motivation:{type:d["g"].String,value:""},secondary_motivation:{type:d["g"].String,value:""},personal_motivations:{type:d["g"].String,value:""}},anchor_template:"@__builtin__anchor",style:x},{id:"campaign",name:"Campaign Block",type:h["f"].DictionaryBlock,role:h["e"].Node,title_key:"name",properties:{name:{type:d["g"].String,value:""},description:{type:d["g"].String,value:""},aliases:{type:d["g"].String,value:""},first_seen:{type:d["g"].String,value:""},last_seen:{type:d["g"].String,value:""},objective:{type:d["g"].String,value:""}},anchor_template:"@__builtin__anchor",style:k},{id:"tool",name:"Tool Block",type:h["f"].DictionaryBlock,role:h["e"].Node,title_key:"name",properties:{name:{type:d["g"].String,value:""},description:{type:d["g"].String,value:""},tool_types:{type:d["g"].String,value:""},aliases:{type:d["g"].String,value:""},kill_chain_phases:{type:d["g"].String,value:""},tool_version:{type:d["g"].String,value:""}},anchor_template:"@__builtin__anchor",style:j},{id:"vulnerability",name:"Vulnerability Block",type:h["f"].DictionaryBlock,role:h["e"].Node,title_key:"name",properties:{name:{type:d["g"].String,value:""},description:{type:d["g"].String,value:""},external_references:{type:d["g"].String,value:""}},anchor_template:"@__builtin__anchor",style:w}]},help_links:[{text:"Attack Flow GitHub",url:"https://github.com/center-for-threat-informed-defense/attack-flow"},{text:"MITRE ATT&CK Framework",url:"https://attack.mitre.org/"}],validator:r,publisher:c};t["a"]=S},fd45:function(e,t,i){}});
//# sourceMappingURL=app.09466d69.js.map